{"version":3,"file":"pam4-tracker.umd.js","sources":["../src/util.ts","../src/datastructure/Queue.ts","../src/Tracker/GoogleAnalytics.ts","../src/Tracker/FacebookPixel.ts","../src/Extension/PamChromeExtension.ts","../src/Pusher/types.ts","../src/Tracker/index.ts","../src/Pusher/consts.ts","../src/Pusher/popupTemplate.ts","../src/ShadowDOM/index.ts","../src/Pusher/PusherPopup.ts","../src/Attention/types.ts","../src/Pusher/PusherNavigation.ts","../node_modules/url-join/lib/url-join.js","../src/Pusher/index.ts","../src/ConsentManager/NotificationPopup.ts","../src/ConsentManager/PermissionManagement.ts","../src/ConsentManager/index.ts","../src/Attention/consts.ts","../src/Attention/popupTemplate.ts","../src/Attention/Popup.ts","../src/Attention/Injection.ts","../src/Attention/index.ts","../src/FacebookAds/index.ts","../src/PamEvent.ts","../src/Service/index.ts","../src/pam4-tracker.ts"],"sourcesContent":["export const urlB64ToUint8Array = (base64String: string): Uint8Array => {\n  const padding = '='.repeat((4 - (base64String.length % 4)) % 4)\n  const base64 = (base64String + padding).replace(/\\-/g, '+').replace(/_/g, '/')\n\n  const rawData = window.atob(base64)\n  const outputArray = new Uint8Array(rawData.length)\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i)\n  }\n  return outputArray\n}\n\nexport const windowOrigin = (): string => {\n  return (\n    window.location.protocol +\n    '//' +\n    window.location.hostname +\n    (window.location.port ? ':' + window.location.port : '')\n  )\n}\n\n// export const postRequester = <T>(url: string, data: any): Promise<T> => {\n//   return new Promise((resolve, reject) => {\n//     const xhr = new XMLHttpRequest()\n//     xhr.open('POST', url)\n//     xhr.addEventListener('load', () => {\n//       const { response, status } = xhr\n//       if (status >= 200 && status < 400) {\n//         resolve(JSON.parse(response))\n//       } else {\n//         reject(JSON.parse(response))\n//       }\n//     })\n\n//     xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8')\n//     xhr.withCredentials = true\n//     try {\n//       xhr.send(JSON.stringify(data))\n//     } catch (err) {\n//       reject(err)\n//     }\n//   })\n// }\n\nexport const postRequester = <T>(url: string, data: Record<string, any>): Promise<T> => {\n  return fetch(url, {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {\n      'Content-Type': 'application/json; charset=UTF-8',\n    },\n    credentials: 'include',\n  }).then((response) => {\n    if (response.ok) {\n      return response.json() as Promise<T>\n    } else {\n      throw new Error(`Network response was not ok: ${response.status} ${response.statusText}`)\n    }\n  })\n}\n\nexport const getRequester = <T>(url: string, data: any = {}): Promise<T> => {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n    xhr.open('GET', url + objectToQueryString(data))\n    xhr.addEventListener('load', () => {\n      const { response, status } = xhr\n      if (status >= 200 && status < 400) {\n        resolve(JSON.parse(response))\n      } else {\n        reject(JSON.parse(response))\n      }\n    })\n\n    xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8')\n    xhr.withCredentials = true\n    try {\n      xhr.send()\n    } catch (err) {\n      reject(err)\n    }\n  })\n}\n\nexport const readCookie = (name: string): string | null => {\n  const nameEQ = name + '='\n  const ca = document.cookie.split(';')\n  for (let i = 0; i < ca.length; i++) {\n    let c = ca[i]\n    while (c.charAt(0) === ' ') c = c.substring(1, c.length)\n    if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length)\n  }\n  return null\n}\n\nexport const writeCookie = (key: string, value: string, days = 1825) => {\n  const date = new Date()\n\n  // Get unix milliseconds at current time plus number of days\n  date.setTime(+date + days * 86400000) // 24 * 60 * 60 * 1000\n  window.document.cookie = `${key}=${value};expires=${date.toUTCString()};SameSite=None;Secure;path=/`\n}\n\nexport const toggleClass = (element: HTMLElement, className: string) => {\n  if (!element || !className) {\n    return\n  }\n\n  let classString = element.className\n  const nameIndex = classString.indexOf(className)\n  if (nameIndex === -1) {\n    classString += ' ' + className\n  } else {\n    classString = classString.substr(0, nameIndex) + classString.substr(nameIndex + className.length)\n  }\n  element.className = classString\n}\n\nexport const appendStyle = (shadow: ShadowRoot, style: string): void => {\n  const elm = window.document.createElement('style')\n  elm.innerHTML = style\n  shadow.appendChild(elm)\n}\n\nexport const getPageURL = () => window.document.location && window.document.location.href\n\nexport interface IFormatData {\n  event: string\n  page_language: string\n  page_referrer: string\n  page_title: string\n  page_url: string | null\n  platform: string\n  resolution: string\n  dstags: string\n  form_fields: Record<string, unknown>\n}\n\nexport const getFormatData = (event: string, formFields = {}, tags = ''): IFormatData => {\n  const pageLanguage = window.navigator.language\n  const pageReferrer = window.document.referrer\n  const pageTitle = window.document.title\n  const platform = window.navigator.userAgent\n  const resolution = window.screen.availWidth + 'x' + window.screen.availHeight\n\n  return {\n    event: event,\n    page_language: pageLanguage,\n    page_referrer: pageReferrer,\n    page_title: pageTitle,\n    page_url: decodeURI(getPageURL()),\n    platform: platform,\n    resolution: resolution,\n    dstags: tags,\n    form_fields: formFields,\n  }\n}\n\nexport const serializeJSON = (form: HTMLFormElement): Record<string, string> => {\n  const obj: Record<string, string> = {}\n  const elements = form.querySelectorAll<HTMLInputElement>('input, select, textarea')\n  elements.forEach((element) => {\n    const name = element.name\n    const value = element.value\n    if (name) obj[name] = value\n  })\n\n  return obj\n}\n\nexport const getScrollPercent = (): number => {\n  const h = document.documentElement\n  const b = document.body\n  const st = 'scrollTop'\n  const sh = 'scrollHeight'\n  return h && b ? ((h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight)) * 100 : 0\n}\n\nexport const isEmpty = (obj: any): boolean => {\n  for (const prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      return false\n    }\n  }\n\n  return JSON.stringify(obj) === JSON.stringify({})\n}\n\nexport const objectToQueryString = (obj: Record<string, string | number | boolean>): string => {\n  return (\n    '?' +\n    Object.keys(obj)\n      .reduce((a: any, k: any) => {\n        a.push(k + '=' + encodeURIComponent(obj[k]))\n        return a\n      }, [])\n      .join('&')\n  )\n}\n\nexport const getLocalStorage = <T>(key: string, defaultValue?: T, isObject = true): T | string => {\n  const val = window.localStorage.getItem(key)\n  if (val === null) {\n    return defaultValue || ''\n  }\n\n  if (isObject) {\n    try {\n      return JSON.parse(val) as T\n    } catch {\n      return (defaultValue || {}) as T\n    }\n  }\n\n  return val\n}\n\nexport const getContactId = (): string | null => {\n  return window.localStorage.getItem('contact_id')\n}\n\nexport const getPublicContactId = (): string | null => {\n  return window.localStorage.getItem('public_contact_id')\n}\n\nexport const getLoginContactId = (): string | null => {\n  return window.localStorage.getItem('login_contact_id')\n}\n\nexport const isPushApiSupported = (): boolean => {\n  return 'PushManager' in window\n}\n\nexport const saveContactID = (contact_id: string, database: string): void => {\n  window.localStorage.setItem('contact_id', contact_id)\n\n  if (database === DBType.LOGIN) {\n    window.localStorage.setItem('login_contact_id', contact_id)\n  } else {\n    window.localStorage.setItem('public_contact_id', contact_id)\n  }\n}\n\nexport enum DBType {\n  LOGIN = 'LOGIN',\n  PUBLIC = 'PUBLIC',\n}\n\nexport const getCurrentDBType = (): DBType => {\n  const dbType = window.localStorage.getItem('db_type') || DBType.PUBLIC\n  return dbType as DBType\n}\n\nexport const parseBool = (val: string): boolean => {\n  return val === 'true'\n}\n\nexport const sleep = async (mSec: number): Promise<void> => {\n  return new Promise((resolve) => setTimeout(() => resolve(), mSec))\n}\n","export default class Queue<T> {\n  private queue: T[]\n\n  constructor() {\n    this.queue = []\n  }\n\n  public get isEmpty(): boolean {\n    return this.queue.length <= 0\n  }\n\n  public enqueue(t: T): void {\n    this.queue.push(t)\n  }\n\n  public dequeue(): T | undefined {\n    return this.queue.shift()\n  }\n}\n\nexport enum TaskType {\n  TrackerSingle,\n  TrackerBulk,\n}\n\nexport class Task {\n  constructor(public pubclitype: TaskType, public data: any) {}\n}\n","import ConsentManager from '../ConsentManager'\n\ndeclare function gtag(op: string, ...args: string[]): void\n\nexport default class GoogleAnalytics {\n  public gaIds: string[]\n\n  constructor(private consentManager: ConsentManager) {\n    this.gaIds = this.consentManager.consentMessage?.setting?.analytics_cookies?.tracking_collection['google_tag_id'] ?? []\n  }\n\n  public installScript(): void {\n    if (!this.gaIds.length) {\n      return\n    }\n\n    const heads = window.document.getElementsByTagName('head')\n    if (!heads.length) {\n      throw new Error('no head element')\n    }\n\n    const script1 = window.document.createElement('script')\n    script1.async = true\n    script1.src = `https://www.googletagmanager.com/gtag/js?id=${this.gaIds[0]}`\n\n    const script2 = window.document.createElement('script')\n    script2.innerText = `window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); ${this.gaIds.map(\n      (id) => `gtag('config', '${id}'); `\n    )}`\n\n    heads[0].appendChild(script1)\n    heads[0].appendChild(script2)\n  }\n\n  public track(): void {\n    if (!this.gaIds.length) {\n      return\n    }\n\n    if (this.consentManager.customerConsentDetail?.tracking_permission?.analytics_cookies) {\n      for (const id of this.gaIds) {\n        gtag('config', id)\n      }\n    }\n  }\n}\n","import ConsentManager from '../ConsentManager'\n\ndeclare function fbq(op: string, ...arg: string[]): void\n\nexport default class FacebookPixel {\n  public pixelIds: string[]\n  constructor(private consentManager: ConsentManager) {\n    this.pixelIds =\n      this.consentManager.consentMessage?.setting?.social_media_cookies?.tracking_collection['facebook_pixel_id'] ?? []\n  }\n\n  public installScript(): void {\n    if (!this.pixelIds) {\n      return\n    }\n\n    const heads = window.document.getElementsByTagName('head')\n    if (!heads.length) {\n      throw new Error('no head element')\n    }\n\n    const script = window.document.createElement('script')\n    script.innerText = `!function(f,b,e,v,n,t,s) {if(f.fbq)return;n=f.fbq=function(){n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments)}; if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0'; n.queue=[];t=b.createElement(e);t.async=!0; t.src=v;s=b.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t,s)}(window, document,'script', 'https://connect.facebook.net/en_US/fbevents.js');`\n\n    heads[0].appendChild(script)\n\n    for (const id of this.pixelIds) {\n      fbq('init', id)\n    }\n\n    this.track()\n  }\n\n  public track(): void {\n    if (!this.pixelIds) {\n      return\n    }\n\n    if (this.consentManager.customerConsentDetail?.tracking_permission?.social_media_cookies) {\n      for (const id of this.pixelIds) {\n        fbq('trackSingle', id, 'PageView')\n      }\n    }\n  }\n}\n","import { kill } from 'process'\n\ninterface LogItem {\n  name: string\n  contactId: string\n  data: unknown\n}\n\nexport default class PamChromeExtension {\n  private static foundExtension = false\n  private static logHistory: LogItem[] = []\n\n  static init(): void {\n    window.addEventListener('message', (event) => {\n      if (!PamChromeExtension.foundExtension && event.data.method === 'pam-extension-hello') {\n        PamChromeExtension.foundExtension = true\n        window.postMessage({ method: 'pam-client-hello' }, window.location.origin)\n        PamChromeExtension.logHistory.forEach((l) => {\n          PamChromeExtension.sendLog(l.name, l.contactId, l.data)\n        })\n      }\n\n      if (event.data.method === 'pam-extension-full-history') {\n        window.postMessage(\n          { method: 'pam-client-full-history', history: PamChromeExtension.logHistory },\n          window.location.origin\n        )\n      }\n    })\n  }\n\n  private static sendLog(name: string, contactId: string, data: unknown) {\n    window.postMessage(\n      { method: 'pam-client-log', contactId: contactId, name: name, data: data },\n      window.location.origin\n    )\n  }\n\n  static log(name: string, contactId: string, data: unknown): void {\n    PamChromeExtension.logHistory.push({\n      name: name,\n      contactId: contactId,\n      data: data,\n    })\n    if (PamChromeExtension.foundExtension) {\n      PamChromeExtension.sendLog(name, contactId, data)\n    }\n  }\n}\n","export enum State {\n  PUSHER_STATE_SHOW = 'pusher_state_show',\n  PUSHER_STATE_HIDE = 'pusher_state_hide',\n}\n\nexport enum NotificationPermission {\n  DEFAULT = 'default',\n  GRANTED = 'granted',\n  DENIED = 'denied',\n}\n\nexport interface IPopupConfig {\n  autoSubscribe?: boolean\n  enableWebPushPopup?: boolean\n  enableWebPushNavigation?: boolean\n  title?: string\n  message?: string\n  button_text?: string\n  navigation_text?: string\n  primary?: string\n  secondary?: string\n  primary_font?: string\n  secondary_font?: string\n  animate_type_btn?: string\n}\n","import {\n  DBType,\n  getContactId,\n  getLoginContactId,\n  getPublicContactId,\n  getCurrentDBType,\n  getFormatData,\n  postRequester,\n  sleep,\n  windowOrigin,\n  readCookie,\n  writeCookie,\n  parseBool,\n  saveContactID,\n} from '../util'\nimport Attention from '../Attention'\nimport ConsentManager from '../ConsentManager'\nimport { IContext } from '../pam4-tracker'\nimport Queue from '../datastructure/Queue'\nimport Service from '../Service'\nimport GoogleAnalytics from './GoogleAnalytics'\nimport FacebookPixel from './FacebookPixel'\nimport Log from '../Extension/PamChromeExtension'\nimport { Task, TaskType } from '../datastructure/Queue'\nimport { PamEvent, PromisePamBulkEvent, PromisePamEvent } from '../PamEvent'\n\nexport interface ITrackerResponse {\n  contact_id: string\n  consent_id?: string\n  _database?: string\n}\n\nexport interface ITrackerBulkResponse {\n  results: ITrackerResponse[]\n}\n\nexport interface IQueryParam {\n  [key: string]: string\n}\n\nexport default class Tracker {\n  private contactID = ''\n  private readonly iframeSrcURL: string\n  private readonly iframeOrigin: string\n  private sentAutoTracking = false\n  private tags = ''\n  private formFields: Record<string, unknown> = {}\n  public googleAnalytics: GoogleAnalytics | undefined\n  public facebookPixel: FacebookPixel | undefined\n\n  constructor(\n    private ctx: IContext,\n    private service: Service,\n    private attention: Attention,\n    private consentManager: ConsentManager,\n    private eventQueue: Queue<Task>\n  ) {\n    this.iframeOrigin = this.ctx.config.baseApi + '/script'\n    this.iframeSrcURL =\n      this.iframeOrigin +\n      '/xdomain_cookie.html#' +\n      '{\"window_origin\":\"' +\n      windowOrigin() +\n      '\",\"iframe_origin\":\"' +\n      this.iframeOrigin +\n      '\"}'\n\n    this._initIFrame()\n    window.addEventListener('message', this._onMessage)\n    this.startEventQueueManager()\n    this.setupThirdPartyTracker()\n  }\n\n  public getContactID(): string {\n    return this.contactID\n  }\n\n  // Manual tracking others event type\n  public async send(\n    eventName: string,\n    tags: string,\n    formFields: Record<string, unknown>,\n    specificDatabase = 'AUTO'\n  ): Promise<ITrackerResponse> {\n    while (this.consentManager.isFetching) {\n      await sleep(200)\n    }\n\n    if (\n      this.isTrackingEvent(eventName) &&\n      !this.isAllowConsentFormField(formFields) &&\n      !this.ctx.config.enableSkipConsent\n    ) {\n      if (!this.consentManager.isTrackingAllowed) {\n        Log.log('Tracking is not Allow', '', {\n          ...getFormatData(eventName, formFields, tags),\n        })\n\n        throw new Error('tracking is not allowed')\n      }\n      formFields._consent_message_id = this.ctx.config.trackingConsentMessageId\n      formFields._version = this.consentManager.consentMessage.setting.version\n    }\n\n    if (!formFields._database) {\n      if (specificDatabase === DBType.LOGIN) {\n        formFields._database = this.ctx.config.loginDBAlias\n      } else if (specificDatabase === DBType.PUBLIC) {\n        formFields._database = this.ctx.config.loginDBAlias\n      } else {\n        formFields._database =\n          getCurrentDBType() === DBType.LOGIN ? this.ctx.config.loginDBAlias : this.ctx.config.publicDBAlias\n      }\n    }\n\n    const queryObject = this.getObjectFromQuery()\n    let contactId: string | null = ''\n\n    if (queryObject?.contact_id) {\n      contactId = queryObject?.contact_id\n    } else if (specificDatabase === 'AUTO') {\n      contactId = getContactId()\n    } else if (specificDatabase === DBType.LOGIN) {\n      contactId = getLoginContactId()\n    } else if (specificDatabase === DBType.PUBLIC) {\n      contactId = getPublicContactId()\n    }\n\n    if (this.consentManager.hasLoggedIn && this.consentManager.loginIdKey && this.consentManager.loginId) {\n      formFields[this.consentManager.loginIdKey] = this.consentManager.loginId\n    } else if (contactId) {\n      formFields._contact_id = contactId\n    } else {\n      if (readCookie('contact_id')) {\n        formFields._contact_id = readCookie('contact_id')\n      }\n    }\n\n    if (readCookie('_fbp')) {\n      formFields._fbp = readCookie('_fbp')\n    }\n    if (readCookie('_fbc')) {\n      formFields._fbc = readCookie('_fbc')\n    }\n\n    const formData = {\n      ...getFormatData(eventName, formFields, tags),\n    }\n\n    try {\n      const data = await postRequester<ITrackerResponse>(`${this.ctx.config.baseApi}/trackers/events`, formData)\n      this.contactID = data.contact_id\n\n      const trackingEvent: CustomEventInit = {\n        detail: {\n          contact_id: data.contact_id,\n          event: formData,\n        },\n      }\n\n      writeCookie('contact_id', data.contact_id, 365 * 5)\n      saveContactID(data.contact_id, getCurrentDBType())\n\n      this._setXDomainCookie(data)\n\n      if (data.contact_id && (this.mustRefreshConsentEvent(eventName) || this.isAllowConsentFormField(formFields))) {\n        await this.consentManager.refreshTrackingConsentStatus()\n      }\n\n      Log.log('Send', data.contact_id, { ...formData })\n\n      window.dispatchEvent(new CustomEvent('send_tracking', trackingEvent))\n      return data\n    } catch (e) {\n      return e as any\n    }\n  }\n\n  public async sendBulk(formData: Record<string, any>): Promise<ITrackerResponse[]> {\n    while (this.consentManager.isFetching) {\n      await sleep(200)\n    }\n\n    try {\n      const data = await postRequester<ITrackerBulkResponse>(`${this.ctx.config.baseApi}/trackers/events`, formData)\n\n      this.contactID = data.results[0].contact_id\n\n      writeCookie('contact_id', this.contactID, 365 * 5)\n      saveContactID(this.contactID, getCurrentDBType())\n      this._setXDomainCookie(data.results[0])\n\n      await this.consentManager.refreshTrackingConsentStatus()\n\n      window.dispatchEvent(new CustomEvent('send_tracking', formData))\n      return data.results\n    } catch (e) {\n      return e as any\n    }\n  }\n\n  private _initIFrame(): void {\n    if (!document.getElementById('xdomain_cookie_iframe')) {\n      const iframe = window.document.createElement('iframe')\n      iframe.style.display = 'none'\n      iframe.src = this.iframeSrcURL\n      iframe.id = 'xdomain_cookie_iframe'\n      window.document.body.appendChild(iframe)\n    }\n  }\n\n  private _onMessage = async (e: MessageEvent) => {\n    while (this.consentManager.isTrackingConsentRefreshing || this.consentManager.isFetching) {\n      await sleep(200)\n    }\n    if (!this.consentManager.isTrackingAllowed && !this.ctx.config.enableSkipConsent) {\n      return\n    }\n    this._setLocalCookie(this._readingIframeCookie(e))\n    if (this.ctx.config.autoTracking && !this.sentAutoTracking) {\n      this.service\n        .sendEvent('page_view', this.tags, this.formFields)\n        .then(() => {\n          if (this.attention) {\n            this.attention.startFetchInterval()\n          }\n        })\n        .catch(console.error)\n\n      if (this.googleAnalytics) {\n        this.googleAnalytics.track()\n      }\n\n      this.sentAutoTracking = true\n    }\n  }\n\n  private _readingIframeCookie(e: MessageEvent): void {\n    if (e.origin !== this.iframeOrigin) return\n    if (typeof e.data !== 'string') return\n\n    let data = null\n    try {\n      data = JSON.parse(e.data)\n    } catch (e) {\n      data = null\n    }\n\n    if (typeof data !== 'object' || data instanceof Array) return\n    if (!('msg_type' in data) || data.msg_type !== 'xdomain_cookie_read') return\n\n    return data.cookies\n  }\n\n  private _setLocalCookie(cookies: any): void {\n    for (const name in cookies) {\n      if (typeof cookies[name] !== 'function') {\n        writeCookie(name, cookies[name])\n      }\n    }\n  }\n\n  private _setXDomainCookie(cookies: any): void {\n    const msg = {\n      cookies: cookies,\n      msg_type: 'xdomain_cookie_write',\n    }\n\n    // post message to iframe window w/ data\n    const el = window.document.getElementById('xdomain_cookie_iframe') as HTMLIFrameElement\n    if (el && el.contentWindow) {\n      el.contentWindow.postMessage(JSON.stringify(msg), this.iframeOrigin)\n    }\n  }\n\n  public getObjectFromQuery(): IQueryParam {\n    const query = window.location.search\n    if (query === '') {\n      return {}\n    }\n    const objectQuery = query\n      .slice(1)\n      .split('&')\n      .map((kv) => ({ [kv.split('=')[0]]: kv.split('=')[1] }))\n    let tmp: IQueryParam = {}\n    objectQuery.forEach((object: Record<string, string>) => {\n      Object.keys(object).forEach((key: string) => {\n        tmp = {\n          ...tmp,\n          [key]: object[key],\n        }\n      })\n    })\n\n    return tmp\n  }\n\n  private isTrackingEvent(eventName: string): boolean {\n    return !['allow_consent', 'register', 'register_success', 'login', 'logout', 'save_push'].includes(eventName)\n  }\n\n  private mustRefreshConsentEvent(eventName: string): boolean {\n    return ['allow_consent'].includes(eventName)\n  }\n\n  private isAllowConsentFormField(formFields: Record<string, unknown>): boolean {\n    for (const key in formFields) {\n      if (key === '_allow_consent') {\n        const keyType = typeof formFields[key]\n        if (keyType === 'string') {\n          return parseBool(`${formFields[key]}`)\n        } else if (keyType === 'boolean') {\n          return formFields[key] as boolean\n        }\n        break\n      }\n    }\n    return false\n  }\n\n  private startEventQueueManager(): void {\n    this.consumeEventQueue()\n  }\n\n  private async consumeEventQueue(): Promise<void> {\n    while (!this.eventQueue.isEmpty) {\n      const task = this.eventQueue.dequeue()\n\n      if (task?.pubclitype === TaskType.TrackerSingle) {\n        const event = task?.data as PromisePamEvent\n        if (event == undefined) {\n          return undefined\n        }\n\n        try {\n          const res = await this.send(event.name, event.tags?.join() ?? '', event.formFields, event.specificDatabase)\n          event.resolve(res)\n        } catch (e) {\n          event.reject(e)\n        }\n      } else if (task?.pubclitype === TaskType.TrackerBulk) {\n        const event = task?.data as PromisePamBulkEvent\n        if (event == undefined) {\n          return undefined\n        }\n\n        try {\n          const res = await this.sendBulk(event.data)\n          event.resolve(res)\n        } catch (e) {\n          event.reject(e)\n        }\n      }\n    }\n    // if the queue is empty then sleep 200 ms before recursively consuming event queue\n    await sleep(200)\n    this.consumeEventQueue()\n  }\n\n  private async setupThirdPartyTracker(): Promise<void> {\n    while (this.consentManager.isFetching) {\n      await sleep(200)\n    }\n    this.googleAnalytics = new GoogleAnalytics(this.consentManager)\n    this.googleAnalytics.installScript()\n\n    this.facebookPixel = new FacebookPixel(this.consentManager)\n    this.facebookPixel.installScript()\n  }\n}\n","export const PUSHER_POPUP_OPEN_CLASS = 'pam-pusher-popup-open'\nexport const PUSHER_STATE_KEY = 'pusher_state_key'\n\nexport const ERROR = {\n  USER_IS_SUBSCRIBED: 'User is subscribed',\n  SUBSCRIBED_FAIL: 'failed to subscribe the user',\n  NOT_SUPPORTED: 'Push messaging is not supported',\n  SERVICE_WORKER_ERROR: 'Service Worker Error',\n  SUBSCRIPTION_SERVER_ERROR: 'Cannot send subscription data to server',\n  SUBSCRIPTION_ERROR: 'Cannot subscribe',\n}\n\nexport const POPUP_CONFIG = {\n  TITLE: 'Connect with us',\n  MESSAGE: `We'd like to show you\n  notifications for the\n  latest news and updates`,\n  BUTTON_TEXT: 'Subscribe',\n  NAVIGATION_TEXT: 'Click allow to subscribe',\n  PRIMARY: '#3d3d3d',\n  SECONDARY: '#ffffff',\n  ANIMATE_TYPE_BTN: 'vertical', // horizontal\n}\n\nexport const EVENT = {\n  SHOW: 'show',\n  HIDE: 'hide',\n  SUBSCRIBE: 'subscribe',\n}\n","import { IPopupConfig } from './types'\nimport { POPUP_CONFIG, EVENT } from './consts'\n\nexport const popupTemplate = (config: IPopupConfig) => {\n  const title = config.title || POPUP_CONFIG.TITLE\n  const message = config.message || POPUP_CONFIG.MESSAGE\n  const buttonText = config.button_text || POPUP_CONFIG.BUTTON_TEXT\n  const navigationText = config.navigation_text || POPUP_CONFIG.NAVIGATION_TEXT\n  const primary = config.primary || POPUP_CONFIG.PRIMARY\n  const secondary = config.secondary || POPUP_CONFIG.SECONDARY\n  const primaryFont = config.primary_font || primary\n  const secondaryFont = config.secondary_font || secondary\n  const animateTypeBtn = config.animate_type_btn || POPUP_CONFIG.ANIMATE_TYPE_BTN\n\n  return `\n    <div>\n      <link href=\"https://fonts.googleapis.com/css?family=Roboto&display=swap\" rel=\"stylesheet\">\n      <style>\n        * {\n          box-sizing: border-box !important;\n          font-family: 'Roboto', sans-serif;\n        }\n        body {\n          background: #000;\n        }\n        pre {\n          font-size: 16px;\n          margin: 0;\n          padding: 8px;\n          white-space: pre-wrap;\n        }\n        #noti-info-client.horizontal{\n          position: fixed;\n          right: 1%;\n          top: 2.6%;\n          z-index: 999999;\n          /*Absoluto*/\n          width: 330px; /* tamanho da notificação */\n          color: #5E7181;\n          font-size: 12px;\n        }\n        #noti-info-client.vertical{\n          position: fixed;\n          right: 5%;\n          top: 2.6%;\n          z-index: 999999;\n          /*Absoluto*/\n          width: 330px; /* tamanho da notificação */\n          color: #5E7181;\n          font-size: 12px;\n        }\n        #noti-info-client #panel{\n          z-index: 99;\n          display: block;\n          position: fixed;\n          background-color: ${primary};\n          width: 50px;\n          height: 50px;\n          border-radius: 50%;\n          bottom: 20px;\n          right: 20px;\n          margin: 10px 10px;\n          cursor: pointer;\n          -webkit-box-shadow: 0px 2px 3px 0px rgba(0,0,0,.4);\n          -moz-box-shadow: 0px 2px 3px 0px rgba(0,0,0,.4);\n          -ms-box-shadow: 0px 2px 3px 0px rgba(0,0,0,.4);\n          box-shadow: 0px 2px 3px 0px rgba(0,0,0,.4);\n        }\n        #noti-info-client #panel .icon {\n          display: inline-block;\n          width: 20px;\n          height: 20px;\n          stroke-width: 0;\n          stroke: currentColor;\n          fill: ${secondaryFont};\n          margin: auto;\n          position: absolute;\n          left: 0;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          transform-origin: 50% 0%;\n          -moz-transform-origin: 50% 0%;\n          -webkit-transform-origin: 50% 0%;\n          -ms-transform-origin: 50% 0%;\n        }\n        .bell-alert #panel::before{\n          /* Keyframe */\n          /* animation : sino-pulsa 1.2s infinite;\n          -webkit-animation : sino-pulsa 1.2s infinite;\n          -moz-animation : sino-pulsa 1.2s infinite;\n          -ms-animation : sino-pulsa 1.2s infinite; */\n        }\n        .bell-alert #panel{\n          /* background-color: \t${primary} !important; */\n        }\n        .bell-alert .icon{\n          /* fill: #FBF9FC !important; */\n        }\n        .active-btn-to{\n          /*transform: translateX(-166px);*/\n          animation: 1s animate-btn-to-${animateTypeBtn} ease-in-out !important;\n          -moz-animation: 1s animate-btn-to-${animateTypeBtn} ease-in-out !important;\n          -webkit-animation: 1s animate-btn-to-${animateTypeBtn} ease-in-out !important;\n          -ms-animation: 1s animate-btn-to-${animateTypeBtn} ease-in-out !important;\n\n          animation-fill-mode: forwards !important;\n          -webkit-animation-fill-mode: forwards !important;\n          -moz-animation-fill-mode: forwards !important;\n          -ms-animation-fill-mode: forwards !important;\n        }\n\n        .active-btn-from{\n          animation: 1s animate-btn-from-${animateTypeBtn} ease-in-out;\n          -webkit-animation: 1s animate-btn-from-${animateTypeBtn} ease-in-out;\n          -moz-animation: 1s animate-btn-from-${animateTypeBtn} ease-in-out;\n          -ms-animation: 1s animate-btn-from-${animateTypeBtn} ease-in-out;\n\n          animation-fill-mode: forwards;\n          -webkit-animation-fill-mode: forwards;\n          -moz-animation-fill-mode: forwards;\n          -ms-animation-fill-mode: forwards;\n        }\n\n        @keyframes animate-btn-to-horizontal{\n          from, 10%{\n              right: 0;\n          }\n          20%,40%{\n              transform: rotate(-30deg);\n              -moz-transform: rotate(-30deg);\n              -webkit-transform: rotate(-30deg);\n              -ms-transform: rotate(-30deg);\n          }\n          60%{\n              transform: rotate(30deg);\n              -moz-transform: rotate(30deg);\n              -webkit-transform: rotate(30deg);\n              -ms-transform: rotate(30deg);\n          }\n          70%{\n              transform: rotate(0deg);\n              -moz-transform: rotate(0deg);\n              -webkit-transform: rotate(0deg);\n              -ms-transform: rotate(0deg);\n          }\n          80%{\n              transform: rotate(-20deg);\n              -moz-transform: rotate(-20deg);\n              -webkit-transform: rotate(-20deg);\n              -ms-transform: rotate(-20deg);\n          }\n          60%, to{\n              right: 147px;\n          }\n        }\n        @keyframes animate-btn-from-horizontal{\n          from, 10%{\n              right: 147px;\n          }\n          20%,40%{\n              transform: rotate(30deg);\n              -moz-transform: rotate(30deg);\n              -webkit-transform: rotate(30deg);\n              -ms-transform: rotate(30deg);\n          }\n          60%{\n              transform: rotate(-30deg);\n              -moz-transform: rotate(-30deg);\n              -webkit-transform: rotate(-30deg);\n              -ms-transform: rotate(-30deg);\n          }\n          70%{\n              transform: rotate(0deg);\n              -moz-transform: rotate(0deg);\n              -webkit-transform: rotate(0deg);\n              -ms-transform: rotate(0deg);\n          }\n          80%{\n              transform: rotate(20deg);\n              -moz-transform: rotate(20deg);\n              -webkit-transform: rotate(20deg);\n              -ms-transform: rotate(20deg);\n          }\n          60%, to{\n              right: 0;\n          }\n        }\n        @keyframes animate-into-desc-horizontal{\n          from, 50%{\n            opacity: 0;\n          }\n          70%, 100%{\n            opacity: 1;\n          }\n          30%{\n            transform: translateY(50px);\n          }\n        }\n        @keyframes animate-btn-to-vertical{\n          from, 10%{\n              bottom: 20px;\n          }\n          20%,40%{\n              transform: rotate(-30deg);\n              -moz-transform: rotate(-30deg);\n              -webkit-transform: rotate(-30deg);\n              -ms-transform: rotate(-30deg);\n          }\n          60%{\n              transform: rotate(30deg);\n              -moz-transform: rotate(30deg);\n              -webkit-transform: rotate(30deg);\n              -ms-transform: rotate(30deg);\n          }\n          70%{\n              transform: rotate(0deg);\n              -moz-transform: rotate(0deg);\n              -webkit-transform: rotate(0deg);\n              -ms-transform: rotate(0deg);\n          }\n          80%{\n              transform: rotate(-20deg);\n              -moz-transform: rotate(-20deg);\n              -webkit-transform: rotate(-20deg);\n              -ms-transform: rotate(-20deg);\n          }\n          60%, to{\n              bottom: 95px;\n          }\n        }\n        @keyframes animate-btn-from-vertical{\n          from, 10%{\n                bottom: 95px;\n            }\n            20%,40%{\n                transform: rotate(30deg);\n                -moz-transform: rotate(30deg);\n                -webkit-transform: rotate(30deg);\n                -ms-transform: rotate(30deg);\n            }\n            60%{\n                transform: rotate(-30deg);\n                -moz-transform: rotate(-30deg);\n                -webkit-transform: rotate(-30deg);\n                -ms-transform: rotate(-30deg);\n            }\n            70%{\n                transform: rotate(0deg);\n                -moz-transform: rotate(0deg);\n                -webkit-transform: rotate(0deg);\n                -ms-transform: rotate(0deg);\n            }\n            80%{\n                transform: rotate(20deg);\n                -moz-transform: rotate(20deg);\n                -webkit-transform: rotate(20deg);\n                -ms-transform: rotate(20deg);\n            }\n            60%, to{\n                bottom: 20px;\n            }\n        }\n        @keyframes animate-into-desc-vertical{\n            from, 50%{\n                opacity: 0;\n            }\n            70%, 100%{\n                opacity: 1;\n            }\n            30%{\n                transform: translateX(50px);\n            }\n        }\n        #noti-info-client #wrapper-noti-body.horizontal {\n          position: fixed;\n          width: auto;\n          bottom: 100px;\n          background: ${secondary};\n          -webkit-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          -moz-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          -ms-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          border-radius: 4px;\n          display: none;\n          border: 1px solid #DDDDDD;\n        }\n        #noti-info-client #wrapper-noti-body.vertical {\n          position: fixed;\n          width: auto;\n          bottom: 55px;\n          background: #fff;\n          -webkit-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          -moz-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          -ms-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          border-radius: 4px;\n          display: none;\n          border: 1px solid #DDDDDD;\n        }\n        #noti-info-client #wrapper-noti-body #box {\n          min-height: 150px;\n          width: 300px;\n          text-align: center;\n          padding: 10px 20px 20px;\n        }\n        #noti-info-client #wrapper-noti-body #box #closeButton {\n          position: absolute;\n          top: 0;\n          right: 5px;\n          transform: rotate(0deg);\n          color:#3d3d3d;\n          opacity: 0.5;\n          transition: all 0.15s;\n          cursor: pointer;\n          font-size: 20px;\n        }\n        #noti-info-client #wrapper-noti-body #box #box-content{\n            letter-spacing: 1px;\n            padding-top: 10px !important;\n            min-height: 100px;\n        }\n        #noti-info-client #wrapper-noti-body #box #box-content p{\n          font-size: 16px;\n          margin: 0px;\n          padding-top: 8px;\n        }\n        #noti-info-client #wrapper-noti-body #box #btn-ok {\n          margin-top: 10px !important;\n          position: relative;\n        }\n        #submit-button:hover {\n          opacity: 0.3;\n        }\n        #noti-info-client #wrapper-noti-body #box #btn-ok button.btn {\n          background-color: ${primary};\n          padding: 10px 30px;\n          display: inline-block;\n          color: ${secondary};\n          font-size: 14px;\n          text-align: center;\n          outline: 0;\n          cursor: pointer;\n          border-radius: 4px;\n          text-transform: none;\n        }\n        .active-body-desc{\n          display: block !important;\n            /* keyframe */\n          animation:  2s animate-into-desc-${animateTypeBtn} !important;\n          -webkit-animation: 2s animate-into-desc-${animateTypeBtn} !important;\n          -moz-animation: 2s animate-into-desc-${animateTypeBtn} !important;\n          -ms-animation: 2s animate-into-desc-${animateTypeBtn} !important;\n        }\n        #noti-info-client #wrapper-noti-body div {\n          list-style: none;\n          margin: 0 !important;\n        }\n        #noti-info-client #wrapper-noti-body.horizontal::after, #noti-info-client #wrapper-noti-body.horizontal::before {\n          top: 100%;\n          left: 50%;\n          border: solid transparent;\n          content: \"\";\n          height: 0;\n          width: 0;\n          position: absolute;\n          pointer-events: none;\n          border-top-color: #DDDDDD;\n        }\n        #noti-info-client #wrapper-noti-body.horizontal::after {\n          border-top-color: #fff;\n          border-width: 10px;\n          margin-left: -10px;\n        }\n        #noti-info-client #wrapper-noti-body.horizontal::before {\n            border-width: 12px;\n            margin-left: -12px;\n        }\n        #noti-info-client #wrapper-noti-body.vertical::after, #noti-info-client #wrapper-noti-body.vertical::before {\n          top: 50%;\n          left: 100%;\n          border: solid transparent;\n          content: \"\";\n          height: 0;\n          width: 0;\n          position: absolute;\n          pointer-events: none;\n          border-left-color: #DDDDDD;\n        }\n        #noti-info-client #wrapper-noti-body.vertical::after {\n          border-left-color: #fff;\n          border-width: 10px;\n          margin-top: 1px;\n        }\n        #noti-info-client #wrapper-noti-body.vertical::before {\n          border-width: 11px;\n          margin-top: 0px;\n        }\n      </style>\n      <div id=\"noti-info-client\" class=\"${animateTypeBtn} popup-container bell-alert\">\n        <div id=\"panel\" class=\"active-btn-to\">\n          <span id=\"showButton\">\n            <svg class=\"icon icon-notification\">\n              <use xlink:href=\"#icon-notification\">\n                <symbol id=\"icon-notification\" viewBox=\"0 0 20 20\">\n                  <path d=\"M4 8c0-0.001 0-0.002 0-0.003 0-2.608 1.664-4.827 3.988-5.654l0.042-0.013c-0.016-0.095-0.025-0.204-0.025-0.315 0-1.105 0.895-2 2-2s2 0.895 2 2c0 0.111-0.009 0.22-0.027 0.327l0.002-0.012c2.361 0.843 4.020 3.060 4.020 5.664 0 0.002 0 0.004 0 0.006v-0 6l3 2v1h-18v-1l3-2v-6zM12 18c0 1.105-0.895 2-2 2s-2-0.895-2-2v0h4z\"></path>\n                </symbol>\n              </use>\n            </svg>\n          </span>\n        </div>\n        <div id=\"wrapper-noti-body\" class=\"${animateTypeBtn} active-body-desc\">\n          <div id=\"box\" >\n            <div id=\"closeButton\">&times;</div>\n            <div id=\"box-content\">\n              <pre>${message}</pre>\n            </div>\n            <div id=\"btn-ok\" class=\"clearfix\">\n              <button type=\"button\" id=\"submit-button\" class=\"btn model-close\">${buttonText}</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `\n}\n","export default class ShadowDOM {\n  public shadowRoot!: ShadowRoot\n  public shadowHost!: HTMLDivElement\n  public isRendered: boolean\n\n  constructor() {\n    this.isRendered = false\n  }\n\n  public render(): void {\n    if (this.isRendered) {\n      return\n    }\n    this.shadowHost = window.document.createElement('div')\n    const body = window.document.querySelector('body')!\n    body.insertBefore(this.shadowHost, body.childNodes[0] || null)\n    this.shadowRoot = this.shadowHost.attachShadow({ mode: 'open' })\n    this.isRendered = true\n  }\n\n  public renderOnElement(elementId: string): void {\n    this.shadowHost = window.document.createElement('div')\n    const elm = <HTMLIFrameElement>window.document.getElementById(elementId)\n    if (!elm) {\n      throw new Error('element id is not exists')\n    }\n    const body = elm.contentDocument!.getElementsByTagName('body')[0]\n    body.appendChild(this.shadowHost)\n    this.shadowRoot = this.shadowHost.attachShadow({ mode: 'open' })\n    this.isRendered = true\n  }\n\n  public setHTMLString(html: string): void {\n    if (!this.isRendered) {\n      return\n    }\n    const section = document.createElement('section')\n    section.innerHTML = html\n    this.shadowRoot.appendChild(section)\n  }\n\n  public setDOM(dom: HTMLElement): HTMLElement | null {\n    const section = document.createElement('section')\n    section.appendChild(dom)\n    this.shadowRoot.appendChild(section)\n    return section\n  }\n\n  public close(): void {\n    if (this.isRendered) {\n      this.shadowHost.remove()\n      this.isRendered = false\n    }\n  }\n\n  public static bubblesEvent(name: string): CustomEvent {\n    return new CustomEvent(name, { bubbles: true })\n  }\n}\n","import { toggleClass } from '../util'\nimport { PUSHER_POPUP_OPEN_CLASS, EVENT } from './consts'\nimport { popupTemplate } from './popupTemplate'\nimport { IPopupConfig } from './types'\nimport ShadowDOM from '../ShadowDOM'\n\nexport class PusherPopup {\n  constructor(\n    private shadowRoot: ShadowRoot,\n    private shadowHost: HTMLDivElement,\n    public config: IPopupConfig = {},\n    public onSubscribe: VoidFunction,\n    public onShow: VoidFunction,\n    public onHide: VoidFunction\n  ) {\n    this._render()\n  }\n\n  public close(): void {\n    if (this.shadowHost) {\n      toggleClass(window.document.body, PUSHER_POPUP_OPEN_CLASS)\n      this.shadowHost.remove()\n    }\n  }\n\n  private _render(): void {\n    const section = window.document.createElement('section')\n    this._createElement(section)\n    toggleClass(window.document.body, PUSHER_POPUP_OPEN_CLASS)\n  }\n\n  private _createElement(section: HTMLElement): void {\n    section.innerHTML = popupTemplate(this.config)\n    this.registerEventListeners(section)\n    this.addEventDispatchers(section)\n    this.shadowRoot.appendChild(section)\n  }\n\n  private registerEventListeners(section: HTMLElement): void {\n    section.addEventListener(EVENT.SHOW, this.onShow)\n    section.addEventListener(EVENT.HIDE, this.onHide)\n    section.addEventListener(EVENT.SUBSCRIBE, this.onSubscribe)\n  }\n\n  private addEventDispatchers(section: HTMLElement): void {\n    ;(section.querySelector('#panel')! as HTMLElement).onclick = () =>\n      section.dispatchEvent(ShadowDOM.bubblesEvent(EVENT.SHOW))\n    ;(section.querySelector('#showButton')! as HTMLElement).onclick = () =>\n      section.dispatchEvent(ShadowDOM.bubblesEvent(EVENT.SHOW))\n    ;(section.querySelector('#closeButton')! as HTMLElement).onclick = () =>\n      section.dispatchEvent(ShadowDOM.bubblesEvent(EVENT.HIDE))\n    section.querySelector('button')!.onclick = () => section.dispatchEvent(ShadowDOM.bubblesEvent(EVENT.SUBSCRIBE))\n  }\n}\n","export type IAttentionType = 'BAR' | 'POPUP' | 'CORNER' | 'REPLACE' | 'PREPEND' | 'APPEND'\n\nexport type IBARPositionType = 'TOP' | 'TOP_FIXED' | 'BOTTOM' | 'BOTTOM_FIXED'\n\nexport type ICornerPositionType = 'TOP_LEFT' | 'TOP_RIGHT' | 'BOTTOM_LEFT' | 'BOTTOM_RIGHT'\n\nexport type IPopupPositionType = null\n\nexport type IPopupSizeType = 'SM' | 'MD' | 'LG' | 'FULL' | 'CUSTOM'\n\nexport type INewPopupSizeType = 'small' | 'medium' | 'large' | 'full' | 'custom'\n\nexport interface ISize {\n  type: IPopupSizeType | INewPopupSizeType\n  width?: string\n}\n\nexport enum SizeType {\n  SM = 'SM',\n  MD = 'MD',\n  LG = 'LG',\n  FULL = 'FULL',\n  CUSTOM = 'CUSTOM',\n}\n\nexport enum NewSizeType {\n  SM = 'small',\n  MD = 'medium',\n  LG = 'large',\n  FULL = 'full',\n  CUSTOM = 'custom',\n}\n\nexport enum DisplayTimeType {\n  TIME_SPEND = 'TIME_SPEND',\n  PAGE_SCROLLING = 'PAGE_SCROLLING',\n}\n\nexport enum AttentionType {\n  BAR = 'BAR',\n  POPUP = 'POPUP',\n  CORNER = 'CORNER',\n  REPLACE = 'REPLACE',\n  PREPEND = 'PREPEND',\n  APPEND = 'APPEND',\n}\n\nexport interface IDisplayTimeSpend {\n  type: DisplayTimeType.TIME_SPEND\n  minute: number\n  second: number\n}\n\nexport interface IDisplayPageScrolling {\n  type: DisplayTimeType.PAGE_SCROLLING\n  percent: number\n}\n\nexport interface IAttentionItemOptions {\n  type: IAttentionType\n  position: IBARPositionType | ICornerPositionType | IPopupPositionType\n  container_id: string\n  size: ISize\n  allow_backdrop_click?: boolean\n  backdrop_opacity: number | null\n  is_borderless: boolean\n  display_after: {\n    type: 'TIME_SPEND' | 'PAGE_SCROLLING'\n    second?: number\n    percent?: number\n  }\n}\n\nexport interface IAttentionItem {\n  html: string\n  css: string\n  custom_css: string\n  js: string\n  options: IAttentionItemOptions\n}\n","import ShadowDOM from '../ShadowDOM'\n\nexport default class PusherNavigation extends ShadowDOM {\n  constructor(public navigationText = 'Click Allow to subscribe') {\n    super()\n  }\n\n  public render(): void {\n    super.render()\n    const html = `\n    <div>\n      <style>\n      .webpush-navigation {\n        position: fixed;\n        top: 0;\n        left: 0;\n        height: 100%;\n        width: 100%;\n        background-color: rgba(0, 0, 0, 0.6);\n        z-index: 999999;\n      }\n\n      .webpush-navigation svg {\n        width: 100px;\n        fill: #ffffff;\n      }\n\n      .webpush-navigation p {\n        font-size: 1.4em;\n        text-shadow: 2px 2px 5px #444444;\n      }\n\n      .wrapper {\n        position: relative;\n        text-align: left;\n        top: 150px;\n        left: 500px;\n        color: #ffffff;\n      }\n      </style>\n      <div class=\"webpush-navigation\">\n        <div class=\"wrapper\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 869.58 1381.15\">\n            <g id=\"Layer_2\" data-name=\"Layer 2\">\n              <g id=\"Draw_Layer\" data-name=\"Draw Layer\" transform=\"translate(20,2.5) rotate(10)\">\n                <path class=\"cls-1\" d=\"M31.15,27.47A16.25,16.25,0,0,0,25.33,49.7c.84,1.1,1.69,2.19,2.54,3.29A16.27,16.27,0,0,0,35,57.17q14.3,5.41,28.42,11.26A16.37,16.37,0,0,0,67.11,70C147.9,104.44,223.56,150,293.19,203.5,378,269.37,453.45,346.61,519.28,431.36c78.27,101.72,142.5,213.79,192.57,331.91a1632.82,1632.82,0,0,1,111.71,409.28q4.5,34,7.56,68.22v0a.28.28,0,0,1,0,.09q4.2,47.73,5.48,95.64.36,14.19.47,28.38a16.25,16.25,0,0,0,32.5,0q-.12-14.16-.47-28.33h0L869,1333c0-.15,0-.3,0-.45q-1.34-45.74-5.34-91.33s0-.09,0-.14,0-.08,0-.13a1638.1,1638.1,0,0,0-117.4-479,1570.43,1570.43,0,0,0-111.4-219.83,1441.5,1441.5,0,0,0-147-199.62q-40.35-45.9-84.92-87.8c-29.7-28-60.89-54.25-93.19-79.16-61-47-126.81-87.78-196.55-120.42-9.56-4.47-19.22-8.74-28.92-12.9l-.1-.06-3-1.26-3.76-1.59-1.61-.67h0q-6-2.51-12-4.93a16.63,16.63,0,0,0-3.58-1.47q-7.4-2.94-14.84-5.77l-.62-.24-1-.39-4.32-.58a16.21,16.21,0,0,0-8.21,2.22Z\"/>\n                <path class=\"cls-1\" d=\"M226.74,0,76.55,7.4,16.47,10.35a16.14,16.14,0,0,0-8.23,2.12,16.45,16.45,0,0,0-5.9,5.76C-.53,23-.95,29.82,2.15,34.63q45.71,70.92,91.44,141.82l25.55,39.62a16.92,16.92,0,0,0,9.62,7.59,16.27,16.27,0,0,0,20.13-11.11c1.15-4,.81-9-1.49-12.54L53.34,54.14l-8.2-12.72L176.74,35l49.34-2.43h.27c4.41-.21,8.33-1.47,11.55-4.62a16.25,16.25,0,0,0,.28-23A16.5,16.5,0,0,0,228.34.05a12.22,12.22,0,0,0-1.6,0Z\"/>\n              </g>\n            </g>\n          </svg>\n          <p>${this.navigationText}</p>\n        </div>\n      </div>\n    </div>\n    `\n    const section = document.createElement('section')\n    section.innerHTML = html\n    this.shadowRoot.appendChild(section)\n  }\n}\n","(function (name, context, definition) {\n  if (typeof module !== 'undefined' && module.exports) module.exports = definition();\n  else if (typeof define === 'function' && define.amd) define(definition);\n  else context[name] = definition();\n})('urljoin', this, function () {\n\n  function normalize (strArray) {\n    var resultArray = [];\n    if (strArray.length === 0) { return ''; }\n\n    if (typeof strArray[0] !== 'string') {\n      throw new TypeError('Url must be a string. Received ' + strArray[0]);\n    }\n\n    // If the first part is a plain protocol, we combine it with the next part.\n    if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1) {\n      var first = strArray.shift();\n      strArray[0] = first + strArray[0];\n    }\n\n    // There must be two or three slashes in the file protocol, two slashes in anything else.\n    if (strArray[0].match(/^file:\\/\\/\\//)) {\n      strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1:///');\n    } else {\n      strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1://');\n    }\n\n    for (var i = 0; i < strArray.length; i++) {\n      var component = strArray[i];\n\n      if (typeof component !== 'string') {\n        throw new TypeError('Url must be a string. Received ' + component);\n      }\n\n      if (component === '') { continue; }\n\n      if (i > 0) {\n        // Removing the starting slashes for each component but the first.\n        component = component.replace(/^[\\/]+/, '');\n      }\n      if (i < strArray.length - 1) {\n        // Removing the ending slashes for each component but the last.\n        component = component.replace(/[\\/]+$/, '');\n      } else {\n        // For the last component we will combine multiple slashes to a single one.\n        component = component.replace(/[\\/]+$/, '/');\n      }\n\n      resultArray.push(component);\n\n    }\n\n    var str = resultArray.join('/');\n    // Each input component is now separated by a single slash except the possible first plain protocol part.\n\n    // remove trailing slash before parameters or hash\n    str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n    // replace ? in parameters with &\n    var parts = str.split('?');\n    str = parts.shift() + (parts.length > 0 ? '?': '') + parts.join('&');\n\n    return str;\n  }\n\n  return function () {\n    var input;\n\n    if (typeof arguments[0] === 'object') {\n      input = arguments[0];\n    } else {\n      input = [].slice.call(arguments);\n    }\n\n    return normalize(input);\n  };\n\n});\n","import { IContext } from '../pam4-tracker'\nimport { PusherPopup } from './PusherPopup'\nimport ShadowDOM from '../ShadowDOM'\nimport { IPopupConfig, NotificationPermission, State } from './types'\nimport { ERROR, PUSHER_STATE_KEY } from './consts'\nimport { getRequester, postRequester, readCookie, urlB64ToUint8Array, windowOrigin } from '../util'\nimport PusherNavigation from './PusherNavigation'\nimport urlJoin from 'url-join'\n\nexport default class Pusher extends ShadowDOM {\n  private subscription: PushSubscription | null = null\n  private swRegistration: ServiceWorkerRegistration | null = null\n  private content!: PusherPopup\n  public isSubscribed = false\n  public permission: string\n  private ctx!: IContext\n  public pusherNavigation!: PusherNavigation\n\n  constructor() {\n    super()\n    this.permission = Notification.permission\n  }\n\n  public async init(ctx: IContext): Promise<IPopupConfig> {\n    this.ctx = ctx\n    try {\n      await this._registerServiceWorker()\n      const config = await this._fetchConfig()\n      if (config.enableWebPushNavigation) {\n        this.pusherNavigation = config.navigation_text\n          ? new PusherNavigation(config.navigation_text)\n          : new PusherNavigation()\n      }\n      return config\n    } catch (err) {\n      throw err\n    }\n  }\n\n  public subscribe(): void {\n    this.close()\n    if (this.permission === NotificationPermission.DEFAULT) {\n      if (this.pusherNavigation) {\n        this.showNavigation()\n      }\n      Notification.requestPermission().then(() => {\n        if (this.pusherNavigation) {\n          this.hideNavigation()\n        }\n        const applicationServerKey = urlB64ToUint8Array(this.ctx.config.webPushPublicKey)\n        if (this.swRegistration) {\n          this.swRegistration.pushManager\n            .subscribe({\n              userVisibleOnly: true,\n              applicationServerKey: applicationServerKey,\n            })\n            .then((subscription: PushSubscription) => {\n              this.subscription = subscription\n              this._updateSubscriptionOnServer(subscription, this.ctx.config.pusherAlias).catch((e) => {\n                window.console.error(ERROR.SUBSCRIPTION_SERVER_ERROR, e)\n              })\n            })\n            .catch((e) => {\n              window.console.error(ERROR.SUBSCRIPTION_ERROR, e)\n            })\n        }\n      })\n    } else {\n      this.swRegistration &&\n        this.swRegistration.pushManager\n          .getSubscription()\n          .then((subscription) => {\n            if (subscription) {\n              this._updateSubscriptionOnServer(subscription, this.ctx.config.pusherAlias).catch((e) => {\n                window.console.error(ERROR.SUBSCRIPTION_SERVER_ERROR, e)\n              })\n              this.subscription = subscription\n            } else {\n              window.console.error(ERROR.SUBSCRIPTION_ERROR, subscription)\n            }\n          })\n          .catch((e) => {\n            window.console.error(ERROR.SUBSCRIPTION_ERROR, e)\n          })\n    }\n  }\n\n  public render(config: IPopupConfig = {}): void {\n    super.render()\n    this.content = new PusherPopup(\n      this.shadowRoot,\n      this.shadowHost,\n      config,\n      () => this.subscribe(),\n      () => this.show(),\n      () => this.hide()\n    )\n    if (!this.isShown()) {\n      this.hide()\n    }\n  }\n\n  public close(): void {\n    super.close()\n  }\n\n  public show(): void {\n    this.shadowRoot.querySelector('.popup-container')!.classList.add('bell-alert')\n    this.shadowRoot.querySelector('#panel')!.classList.remove('active-btn-form')\n    this.shadowRoot.querySelector('#panel')!.classList.add('active-btn-to')\n    this.shadowRoot.querySelector('#wrapper-noti-body')!.classList.add('active-body-desc')\n    this.setState(PUSHER_STATE_KEY, State.PUSHER_STATE_SHOW)\n  }\n\n  public hide(): void {\n    this.shadowRoot.querySelector('.popup-container')!.classList.remove('bell-alert')\n    this.shadowRoot.querySelector('#panel')!.classList.remove('active-btn-to')\n    this.shadowRoot.querySelector('#panel')!.classList.add('active-btn-from')\n    this.shadowRoot.querySelector('#wrapper-noti-body')!.classList.remove('active-body-desc')\n    this.setState(PUSHER_STATE_KEY, State.PUSHER_STATE_HIDE)\n  }\n\n  public showNavigation(): void {\n    if (this.pusherNavigation) {\n      this.pusherNavigation.render()\n    }\n  }\n\n  public hideNavigation(): void {\n    if (this.pusherNavigation) {\n      this.pusherNavigation.close()\n    }\n  }\n\n  public isShown(): boolean {\n    const state = this.getState(PUSHER_STATE_KEY)\n    return !state || state === State.PUSHER_STATE_SHOW\n  }\n\n  private setState(key: string, state: State): void {\n    window.localStorage.setItem(key, state)\n  }\n\n  private getState(key: string): State | null {\n    const state = window.localStorage.getItem(key)\n    if (!state) {\n      return null\n    }\n    return window.localStorage.getItem(key)! as State\n  }\n\n  private _registerServiceWorker(): Promise<null> {\n    return new Promise((resolve, reject) => {\n      if ('serviceWorker' in navigator && 'PushManager' in window) {\n        navigator.serviceWorker\n          .register(urlJoin(windowOrigin(), this.ctx.config.prefixPathWorkerScript, 'pam-sw.js'))\n          .then((swReg: ServiceWorkerRegistration) => {\n            this.swRegistration = swReg\n            return this._notify()\n          })\n          .then((res) => resolve(res))\n          .catch((error) => {\n            reject(`${ERROR.SERVICE_WORKER_ERROR}: ${error}`)\n          })\n      } else {\n        reject(ERROR.NOT_SUPPORTED)\n      }\n    })\n  }\n\n  private _notify(): Promise<null> {\n    return new Promise((resolve, reject) => {\n      this.swRegistration &&\n        this.swRegistration.pushManager.getSubscription().then((subscription: PushSubscription | null) => {\n          this.subscription = subscription\n          this.isSubscribed = !(subscription === null)\n\n          if (this.isSubscribed) {\n            reject(ERROR.USER_IS_SUBSCRIBED)\n          } else {\n            resolve(null)\n          }\n        })\n    })\n  }\n\n  private _updateSubscriptionOnServer(subscription: PushSubscription, alias: string): Promise<PushSubscriptionJSON> {\n    const url = `${this.ctx.config.baseApi}/api/pub/contacts/${readCookie('contact_id')}/webpush/${alias}`\n    return postRequester(url, subscription.toJSON())\n  }\n\n  private _fetchConfig(): Promise<IPopupConfig> {\n    const url = `${this.ctx.config.baseApi}/api/media/webpush/${this.ctx.config.pusherAlias}/config`\n    return getRequester(url)\n  }\n}\n\nexport * from './consts'\nexport * from './types'\n","import ShadowDOM from '../ShadowDOM'\nimport { IConsentMessage, IPermissionBody, ITrackerResponse } from '../Service/types'\n\nexport default class NotificationPopup extends ShadowDOM {\n  constructor(\n    private consentDetail: IConsentMessage,\n    private submitConsentPermission?: (updatedConsentAcceptation: IPermissionBody) => Promise<ITrackerResponse>,\n    private immediatelySubmit: boolean = false,\n    private callback?: (prev: any, state: any) => void,\n    private previewMode: boolean = false,\n    private disableToggleOptions: boolean = false\n  ) {\n    super()\n  }\n\n  trackingConsentDetailType: any = {\n    terms_and_conditions: {\n      label: 'Terms & Conditions',\n      value: 'terms_and_conditions',\n      isAlwaysAccepted: true,\n    },\n    privacy_overview: {\n      label: 'Privacy Overview',\n      value: 'privacy_overview',\n      isAlwaysAccepted: true,\n    },\n    necessary_cookies: {\n      label: 'Necessary Cookies',\n      value: 'necessary_cookies',\n      isAlwaysAccepted: true,\n    },\n    preferences_cookies: {\n      label: 'Preferences Cookies',\n      value: 'preferences_cookies',\n      isAlwaysAccepted: this.disableToggleOptions || false,\n    },\n    analytics_cookies: {\n      label: 'Analytics Cookies',\n      value: 'analytics_cookies',\n      isAlwaysAccepted: this.disableToggleOptions || false,\n    },\n    marketing_cookies: {\n      label: 'Marketing Cookies',\n      value: 'marketing_cookies',\n      isAlwaysAccepted: this.disableToggleOptions || false,\n    },\n    social_media_cookies: {\n      label: 'Social Media Cookies',\n      value: 'social_media_cookies',\n      isAlwaysAccepted: this.disableToggleOptions || false,\n    },\n  }\n\n  contactingTypeDetailOptions: any = {\n    terms_and_conditions: {\n      label: 'Terms & Conditions',\n      value: 'terms_and_conditions',\n      isAlwaysAccepted: true,\n    },\n    privacy_overview: {\n      label: 'Privacy Overview',\n      value: 'privacy_overview',\n      isAlwaysAccepted: true,\n    },\n    email: {\n      label: 'Email',\n      value: 'email',\n      isAlwaysAccepted: this.disableToggleOptions || false,\n    },\n    sms: {\n      label: 'SMS',\n      value: 'sms',\n      isAlwaysAccepted: this.disableToggleOptions || false,\n    },\n    line: {\n      label: 'LINE',\n      value: 'line',\n      isAlwaysAccepted: this.disableToggleOptions || false,\n    },\n    facebook_messenger: {\n      label: 'Facebook Messenger',\n      value: 'facebook_messenger',\n      isAlwaysAccepted: this.disableToggleOptions || false,\n    },\n    push_notification: {\n      label: 'Push Notification',\n      value: 'push_notification',\n      isAlwaysAccepted: this.disableToggleOptions || false,\n    },\n  }\n\n  consentDetailType =\n    this.consentDetail.consent_message_type === 'tracking_type'\n      ? this.trackingConsentDetailType\n      : this.contactingTypeDetailOptions\n  activeLanguage = this.consentDetail.setting.default_language.toLowerCase()\n  selectedConsentDetailTypeIdx = 0\n\n  updatedConsentAcceptation: IPermissionBody = {\n    consent_message_id: this.consentDetail.consent_message_id,\n    version: this.consentDetail.setting.version!,\n    permission: {},\n  }\n\n  private template = `\n    <div>\n        <style>\n            * {\n                box-sizing: border-box;\n            }\n            \n            body {\n                margin: 0;\n                background-color: indigo;\n            }\n            \n            #consent-noti {\n                position: fixed;\n                display: flex;\n                justify-content: center;\n                bottom: 0;\n                left: 0;\n                width: 100%;\n                z-index: 900001;\n                /* background color and opacity */\n                background-color: ${this.consentDetail.style_configuration.bar_background_color};\n                opacity: ${this.consentDetail.style_configuration.bar_background_opacity_percentage / 100};\n            }\n            \n            .container {\n                display: flex;\n                align-content: center;\n                width: 100%;\n            }\n            \n            .container>div {\n                display: flex;\n                align-items: center;\n            }\n            \n            #consent-txt-container {\n                flex-grow: 1;\n                padding: 20px 20px 20px 40px;\n            }\n            \n            #consent-txt {\n                color: ${this.consentDetail.style_configuration.bar_text_color};\n                /*font-size: 0.9rem;*/\n            }\n            \n            #consent-txt a:link,\n            #consent-txt a:visited,\n            #consent-txt a:active {\n                color: ${this.consentDetail.style_configuration.bar_text_color};\n            }\n            \n            #consent-txt a:hover {\n                color: ${this.consentDetail.style_configuration.button_background_color};\n            }\n            \n            #consent-noti-btn-container {\n                display: flex;\n                flex-direction: column;\n                align-items: flex-end;\n                justify-content: space-between;\n                padding: 15px;\n            }\n            \n            #language-btn-container {\n                color: ${this.consentDetail.style_configuration.bar_text_color};\n                font-size: 0.8rem;\n                margin-bottom: 10px;\n            }\n            \n            #language-btn-container .language-btn {\n                cursor: pointer;\n            }\n            \n            #language-btn-container .active-language-btn {\n                color: ${this.consentDetail.style_configuration.consent_detail.primary_color} !important;\n            }\n\n            #language-btn-container .select-language {\n              cursor: pointer;\n              border: none;\n              background: none;\n              color: white;\n              border-color: white;\n          }\n            \n            .accept-btn {\n                cursor: pointer;\n                /* btn color */\n                background-color: ${this.consentDetail.style_configuration.button_background_color};\n                /* btn text color */\n                color: ${this.consentDetail.style_configuration.button_text_color};\n                padding: 12px 48px;\n                border-radius: 6px;\n                /*font-size: 1rem;*/\n            }\n            \n            .accept-btn:hover {\n                opacity: 0.8;\n            }\n            \n            .more-info-link {\n                margin-left: 6px;\n                text-decoration: underline;\n                cursor: pointer;\n            }\n            \n            .more-info-link:hover {\n                color: ${this.consentDetail.style_configuration.button_background_color};\n            }\n            \n            .notification-close-btn {\n                position: absolute;\n                top: 8px;\n                left: 8px;\n                height: 12px;\n                width: 12px;\n            }\n            \n            .close-btn {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                cursor: pointer;\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `768px`}) {\n                .close-btn {\n                    justify-content: flex-start;\n                }\n            }\n            \n            .close-btn:hover {\n                opacity: 0.5;\n            }\n            \n            .notification-close-btn::before,\n            .notification-close-btn::after {\n                position: absolute;\n                content: '';\n                width: 100%;\n                height: 1px;\n                /* btn color */\n                background-color: ${this.consentDetail.style_configuration.button_background_color};\n            }\n            \n            .close-btn::before {\n              \n            }\n            \n            .close-btn::after {\n               \n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `768px`}) {\n                .container {\n                    flex-direction: column;\n                }\n                #consent-txt-container {\n                    padding: 30px 15px 5px;\n                }\n                .accept-btn {\n                    text-align: center;\n                    width: 100%;\n                }\n            }\n            /* modal */\n            \n            .overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                height: 100%;\n                width: 100%;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 900002;\n            }\n            \n            .consent-message-modal {\n                padding: 10px;\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                width: ${this.previewMode ? `calc((100vh / 3) * 4)` : `800px`};\n                max-width: ${this.previewMode ? `95%` : `80%`};\n                height: ${this.previewMode ? `95%` : `90% !important`};\n                max-height: 550px;\n                min-height: 280px;\n                background-color: #ffffff;\n                z-index: 900003;\n                border-radius: 7px;\n                font-family: \"Roboto\", sans-serif;\n                display: flex;\n                flex-direction: column;\n            }\n            \n            .consent-message-topic-container {\n                display: flex;\n                margin-bottom: 5px;\n            }\n            \n            .consent-message-topic {\n                display: flex;\n                align-items: center;\n            }\n            \n            .pop-up-main-icon-container {\n                display: flex;\n                align-items: center;\n                margin-right: 15px;\n                color: ${this.consentDetail.style_configuration.consent_detail.primary_color};\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `768px`}) {\n                .consent-message-modal {\n                    padding: 10px;\n                }\n                .consent-message-topic {\n                    flex-direction: column;\n                    align-items: flex-start;\n                    flex-basis: 100%;\n                    margin-top: 0;\n                }\n                .pop-up-main-icon-container {\n                    margin-bottom: 10px;\n                    pop-up-main-icon-container\n                }\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `599px`}) {\n                .consent-message-modal {\n                    height: ${this.previewMode ? `95%` : `70%`};\n                }\n            }\n            \n            .pop-up-main-icon {\n                margin-right: 10px;\n                width:30px;\n                height:30px\n            }\n            \n            .consent-message-topic-container h2,\n            h3 {\n                margin: 0;\n            }\n            \n            .active-modal-language-btn {\n                box-shadow: 0px 0px 0px 1px ${\n                  this.consentDetail.style_configuration.consent_detail.primary_color\n                } inset;\n            }\n            \n            .inactive-language-btn {\n                background-color: #EBEBEB;\n            }\n            \n            .consent-message-container {\n                display: flex;\n                height: calc(80% - 55px);\n                flex-grow: 1;\n                border: 1px solid #C6C6C6;\n                flex-basis: 80%;\n                z-index: 2;\n                margin-bottom: auto;\n            }\n            \n            #consent-message-container {\n                border-radius: 8px;\n            }\n            \n            .consent-detail-title {\n                color: #303131;\n            }\n            \n            #consent-detail-type-tab-bar {\n                display: flex;\n                flex-direction: column;\n                flex-basis: 30%;\n                border-right: 1px solid #C6C6C6;\n                background-color: #EBEBEB;\n                border-radius: 8px 0px 0px 8px;\n                overflow-y: scroll;\n                -ms-overflow-style: none;\n                scrollbar-width: none;\n            }\n            \n            #consent-detail-type-tab-bar::-webkit-scrollbar {\n                display: none;\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `768px`}) {\n                #consent-message-container {\n                    display: none;\n                }\n            }\n            \n            .consent-detail-type-tab {\n                display: flex;\n                align-items: center;\n                padding: 15px;\n                cursor: pointer;\n                font-size: 0.9rem;\n            }\n            \n            .consent-detail-type-tab:first-of-type {\n                border-radius: 8px 0 0 0;\n            }\n            \n            .consent-detail-type {\n                color: #303131;\n                font-weight: 500;\n            }\n            \n            .active-consent-type-icon-container {\n                flex-basis: 24px;\n                margin-right: 10px;\n                height: 24px;\n            }\n            \n            .active-consent-type-icon-container svg {\n                width: 24px;\n                height: 24px;\n                color: #71D879;\n            }\n            \n            .modal-lang-and-close-btn {\n                margin-left: auto;\n                display: flex;\n            }\n            \n            #modal-language-btn-container {\n                display: flex;\n                align-items: center;\n                margin-right: 15px;\n            }\n\n            #modal-language-btn-container .select-language {\n              border: none;\n              background: #EBEBEB;\n              cursor: pointer;\n              padding: 5px;\n              border-radius: 4px;\n            }\n\n            .select-language:focus-visible {\n              outline: none;\n            }\n            \n            .modal-language-btn {\n                padding: 10px;\n                color: ${this.consentDetail.style_configuration.consent_detail.primary_color};\n                font-size: 0.8rem;\n                height: 35px;\n                width: 40px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                cursor: pointer;\n            }\n            \n            .modal-language-btn:first-of-type {\n                border-radius: 8px 0px 0px 8px;\n            }\n            \n            .modal-language-btn:last-of-type {\n                border-radius: 0px 8px 8px 0px;\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `599px`}) {\n                .modal-lang-and-close-btn {\n                    top: 15px;\n                    right: 10px;\n                }\n                #modal-language-btn-container {\n                    margin-right: 5px;\n                }\n                .modal-language-btn {\n                    height: 25px;\n                    width: 30px;\n                    font-size: 10px;\n                }\n                .modal-language-btn:first-of-type {\n                    border-radius: 5px 0px 0px 5px;\n                }\n                .modal-language-btn:last-of-type {\n                    border-radius: 0px 5px 5px 0px;\n                }\n            }\n            \n            .modal-close-btn::after {\n                content: '\\\\00d7';\n                color: #9CACAC;\n                font-size:30px;\n                margin-top: -15px;\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `599px`}) {\n                .modal-close-btn::before,\n                .modal-close-btn::after {\n                    width: 70%;\n                }\n            }\n            \n            .modal-tab:hover {\n                background-color: #f1f1f1;\n            }\n            \n            .modal-tab-active {\n                background-color: #FFFFFF;\n            }\n            \n            .consent-message-content-container {\n                flex-basis: 75%;\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                padding: 15px 25px;\n            }\n            \n            .modal-content-topic-container {\n                margin-bottom: 15px;\n                max-height: 20%;\n                color: ${this.consentDetail.style_configuration.consent_detail.secondary_color};\n            }\n            \n            #full-consent-message-container .modal-content-topic-container {\n                margin: 0px 0px 15px !important;\n            }\n            \n            #full-consent-message-container .consent-message-content-container {\n                flex-basis: 100%;\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `768px`}) {\n                #full-consent-message-container .consent-message-content-container {\n                    padding: 15px;\n                }\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `599px`}) {\n                #full-consent-message-container .consent-message-content-container {\n                    padding: 10px;\n                }\n                #modal-full-content-topic {\n                    font-size: 15px !important;\n                }\n            }\n            \n            .consent-message-description-container {\n                flex-basis: 80%;\n                overflow-y: scroll;\n                margin-bottom: auto;\n                max-height: 100%;\n            }\n            \n            #full-consent-message-container .consent-message-description-container {\n                flex-basis: 100%;\n            }\n            \n            .consent-message-description-container p {\n                font-size: 0.9rem;\n                color: ${this.consentDetail.style_configuration.consent_detail.text_color};\n                margin: 0;\n            }\n            \n            #modal-content-topic,\n            #modal-full-content-topic,\n            .mobile-modal-content-topic {\n                margin: 0;\n                color: #5A5F5F;\n                font-size: 1.2rem;\n                font-weight: 500;\n            }\n            \n            .modal-content p {\n                font-size: 0.9rem;\n                font-weight: 500;\n                color: #303131;\n            }\n            \n            #modal-content-footer-container,\n            .mobile-modal-content-footer-container {\n                padding-top: 15px;\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n            }\n            \n            .mobile-modal-content-footer-container {\n                margin: 0 10px;\n            }\n            \n            #full-version-btn-container .modal-content-footer-text,\n            .mobile-full-version-btn-container>.modal-content-footer-text {\n                text-decoration: underline;\n                cursor: pointer;\n            }\n            \n            .modal-content-footer-text {\n                font-size: 0.8rem;\n                font-weight: 500;\n                color: ${this.consentDetail.style_configuration.consent_detail.text_color};\n            }\n            \n            #accept-by-type-toggle-container {\n                display: flex;\n                align-items: center;\n            }\n            \n            #consent-message-modal-footer-container {\n                margin-top: 20px;\n            }\n            \n            #consent-message-modal-footer-container button {\n                color: ${this.consentDetail.style_configuration.consent_detail.button_text_color};\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `599px`}) {\n                #consent-message-modal-footer-container {\n                    margin-top: 10px;\n                }\n            }\n            \n            #brief-description-consent-message-btn-container {\n                display: flex;\n                justify-content: flex-end;\n            }\n            \n            #full-description-consent-message-btn-container {\n                display: flex;\n                justify-content: space-between;\n            }\n            \n            .consent-message-save-button {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                background-color: ${this.consentDetail.style_configuration.consent_detail.primary_color};\n                margin-right: 8px;\n                width: 150px;\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `599px`}) {\n                #full-description-consent-message-btn-container .consent-message-save-button {\n                    display: none !important;\n                }\n            }\n            \n            .consent-message-accept-button {\n                background-color: ${this.consentDetail.style_configuration.consent_detail.secondary_color};\n                width: 150px;\n            }\n            \n            .consent-message-back-button {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                background-color: ${this.consentDetail.style_configuration.consent_detail.secondary_color};\n            }\n            \n            .consent-message-btn-container button {\n                border: none;\n                border-radius: 7px;\n                padding: 10px 20px;\n                color: ${this.consentDetail.style_configuration.consent_detail.button_text_color};\n                cursor: pointer;\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `599px`}) {\n                #brief-description-consent-message-btn-container {\n                    width: 70%;\n                    margin-left: auto;\n                }\n                #brief-description-consent-message-btn-container button {\n                    padding: 10px 5px;\n                    font-size: 10px;\n                }\n                #full-description-consent-message-btn-container button {\n                    padding: 10px;\n                }\n            }\n            \n            .btn-icon-img {\n                width: auto;\n                height: 15px;\n                filter: invert(100%);\n                -webkit-filter: invert(100%);\n                margin-right: 8px;\n            }\n            \n            ::-webkit-scrollbar {\n                -webkit-appearance: none;\n                width: 7px;\n            }\n            \n            ::-webkit-scrollbar-thumb {\n                border-radius: 4px;\n                background-color: rgba(0, 0, 0, .5);\n                box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n            }\n            /* The switch - the box around the slider */\n            \n            .accept-by-type-switch {\n                position: relative;\n                display: inline-block;\n                width: 30px;\n                height: 17px;\n                margin-right: 7px;\n            }\n            /* Hide default HTML checkbox */\n            \n            .accept-by-type-switch input {\n                opacity: 0;\n                width: 0;\n                height: 0;\n            }\n            /* The slider */\n            \n            .slider {\n                position: absolute;\n                cursor: pointer;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: #EBEBEB;\n                -webkit-transition: .4s;\n                transition: .4s;\n            }\n            \n            .slider:before {\n                position: absolute;\n                content: \"\";\n                height: 13px;\n                width: 13px;\n                left: 2px;\n                bottom: 2px;\n                background-color: white;\n                -webkit-transition: .4s;\n                transition: .4s;\n            }\n            \n            input:checked+.slider {\n                background-color: #71D879;\n            }\n            \n            input:focus+.slider {\n                box-shadow: 0 0 1px #71D879;\n            }\n            \n            input:checked+.slider:before {\n                -webkit-transform: translateX(13px);\n                -ms-transform: translateX(13px);\n                transform: translateX(13px);\n            }\n            /* Rounded sliders */\n            \n            .slider.round {\n                border-radius: 34px;\n            }\n            \n            .slider.round:before {\n                border-radius: 50%;\n            }\n            \n            .hide-element {\n                display: none !important;\n            }\n            /* Mobile Reponsive Consent Message */\n            \n            #mobile-consent-message-container {\n                display: flex;\n                flex-direction: column;\n                height: 80%;\n                border: 1px solid #C6C6C6;\n                flex-basis: 80%;\n                z-index: 2;\n                margin-bottom: auto;\n                border-radius: 8px 8px 0 0;\n                overflow-y: scroll;\n                -ms-overflow-style: none;\n                scrollbar-width: none;\n            }\n            \n            #mobile-consent-message-container::-webkit-scrollbar {\n                display: none;\n            }\n            \n            @media only screen and (min-width: ${this.previewMode ? `376px` : `769px`}) {\n                #mobile-consent-message-container {\n                    display: none;\n                }\n            }\n            \n            .mobile-consent-detail-type-tab,\n            .mobile-consent-message-content-container {\n                border-bottom: 1px solid #C6C6C6;\n            }\n            \n            .mobile-consent-detail-type {\n                margin-right: auto;\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `599px`}) {\n                .mobile-consent-detail-type {\n                    font-size: 12px !important;\n                }\n            }\n            \n            .arrow {\n                border: solid #C7C7C7;\n                border-width: 0 3px 3px 0;\n                display: inline-block;\n                padding: 3px;\n            }\n            \n            .down {\n                transform: rotate(45deg);\n                -webkit-transform: rotate(45deg);\n            }\n            \n            .mobile-consent-message-content-container {\n                transition: all 0.2s ease;\n                position: relative;\n                padding: 0px 10px;\n            }\n            \n            .mobile-consent-message-description-container {\n                flex-basis: 80%;\n                overflow-y: scroll;\n                margin-bottom: auto;\n                max-height: 100%;\n                height: 120px;\n                margin: 0 0 0 10px;\n            }\n            \n            .mobile-consent-message-description {\n                font-size: 0.9rem;\n                color: #000;\n                margin: 0;\n                font-weight: 500;\n            }\n            \n            .mobile-accept-by-type-toggle-container {\n                display: flex;\n                align-items: center;\n            }\n            \n            .is-expanded .mobile-consent-message-content-container {\n                max-height: 1000px;\n                min-height: 200px;\n                overflow: visible;\n                padding: 15px 10px 20px;\n                opacity: 1;\n            }\n            \n            .is-collapsed .mobile-consent-message-content-container {\n                max-height: 0;\n                min-height: 0;\n                overflow: hidden;\n                opacity: 0;\n            }\n            \n            #full-consent-message-container {\n                border-radius: 8px;\n            }\n            \n            .highlight-mobile-type-tab {\n                box-shadow: 0px 8px 15px #0000002c;\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `768px`}) {\n                .modal-content-topic-container {\n                    margin: 0 10px 10px;\n                }\n            }\n            \n            @media only screen and (max-width: ${this.previewMode ? `375px` : `599px`} {\n                .consent-message-topic h3 {\n                    font-size: 13px;\n                }\n                #mobile-consent-message-container h4 {\n                    font-size: 13px;\n                }\n                #mobile-consent-message-container p {\n                    font-size: 13px;\n                }\n                .is-expanded .mobile-consent-message-content-container {\n                    padding: 10px;\n                }\n                .modal-content-topic-container {\n                    margin: 0 0 10px;\n                }\n                .mobile-consent-message-description-container {\n                    margin: 0px;\n                }\n                .mobile-modal-content-footer-container {\n                    margin: 0px;\n                }\n            }\n        </style>\n\n        <div id=\"consent-noti\">\n            <div class=\"notification-close-btn close-btn\"></div>\n            <div class=\"container\">\n                <div id=\"consent-txt-container\">\n                    <div id=\"consent-txt\">\n                        <!-- consent text -->\n                    </div>\n                </div>\n                <div id=\"consent-noti-btn-container\">\n                    <div id=\"language-btn-container\"></div>\n                    <div class=\"accept-btn\">\n                        <!-- button text -->\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"overlay\" id=\"overlay\"></div>\n\n        <div class=\"consent-message-modal\" id=\"modal\">\n            <div class=\"consent-message-topic-container\">\n                <div class=\"consent-message-topic\">\n                    <div class=\"pop-up-main-icon-container\">\n                        <svg class=\"pop-up-main-icon\" viewBox=\"0 0 30 30\">\n                            <path fill=\"currentColor\" d=\"M21,11C21,16.55 17.16,21.74 12,23C6.84,21.74 3,16.55 3,11V5L12,1L21,5V11M12,21C15.75,20 19,15.54 19,11.22V6.3L12,3.18V21Z\" />\n                        </svg>\n                        <h2>${this.consentDetail.style_configuration.consent_detail.popup_main_icon.toUpperCase()}</h2>\n                    </div>\n                    <div class=\"consent-detail-title\">\n                        <h3>\n                            <!-- consent detail title -->\n                        </h3>\n                    </div>\n                </div>\n                <div class=\"modal-lang-and-close-btn\">\n                    <div id=\"modal-language-btn-container\"></div>\n                    <div id=\"modal-close-btn\" class=\"modal-close-btn close-btn\"></div>\n                </div>\n            </div>\n            <div class=\"consent-message-container\" id=\"consent-message-container\">\n                <div id=\"consent-detail-type-tab-bar\"></div>\n                <div class=\"consent-message-content-container\">\n                    <div class=\"modal-content-topic-container\">\n                        <h4 id=\"modal-content-topic\"></h4>\n                    </div>\n                    <div class=\"consent-message-description-container\" id=\"modal-content-list\"></div>\n                    <div id=\"modal-content-footer-container\">\n                        <div id=\"full-version-btn-container\">\n                            <span class=\"modal-content-footer-text\">\n                                <!-- full version btn -->\n                            </span>\n                        </div>\n                        <div id=\"accept-by-type-toggle-container\">\n                            <!-- Accept btn -->\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"consent-message-container hide-element\" id=\"full-consent-message-container\">\n                <div class=\"consent-message-content-container\">\n                    <div class=\"modal-content-topic-container\">\n                        <h4 id=\"modal-full-content-topic\"></h4>\n                    </div>\n                    <div class=\"consent-message-description-container\" id=\"modal-full-content-list\">\n                        <!-- Full Description -->\n                    </div>\n                </div>\n            </div>\n            <div id=\"mobile-consent-message-container\">\n                <!-- Mobile Consent Message Body -->\n            </div>\n            <div id=\"consent-message-modal-footer-container\">\n                <div class=\"consent-message-btn-container\" id=\"brief-description-consent-message-btn-container\">\n                    <button class=\"consent-message-save-button\">Save Setting</button>\n                    <button class=\"consent-message-accept-button\">Accept All</button>\n                </div>\n                <div class=\"consent-message-btn-container hide-element\" id=\"full-description-consent-message-btn-container\">\n                    <button class=\"consent-message-back-button\"><img class=\"btn-icon-img\" src=\"https://static.thenounproject.com/png/2916775-200.png\" alt=\"go-back-icon\" />Back</button>\n                    <!-- <button class=\"consent-message-save-button\"><img class=\"btn-icon-img\" src=\"https://icon-library.com/images/icon-download-png/icon-download-png-20.jpg\" alt=\"download-icon\" />Download</button> -->\n                </div>\n            </div>\n        </div>\n    </div>`\n\n  public render(): void {\n    super.render()\n    const template = document.createElement('template')\n    template.innerHTML = this.template.trim()\n    this.setDOM(template.content.firstChild as HTMLElement)\n    this.init(false)\n  }\n\n  public renderOnElement(elementId: string): void {\n    super.renderOnElement(elementId)\n    const template = document.createElement('template')\n    template.innerHTML = this.template.trim()\n    this.setDOM(template.content.firstChild as HTMLElement)\n    this.init(true)\n    this.openModal()\n  }\n\n  public renderOnlyPopup(immediatelyPopup = false): void {\n    if (!this.isRendered) {\n      super.render()\n      const template = document.createElement('template')\n      template.innerHTML = this.template.trim()\n      this.setDOM(template.content.firstChild as HTMLElement)\n      this.init(true)\n\n      if (immediatelyPopup) {\n        this.openModal()\n      }\n    } else {\n      this.openModal()\n    }\n  }\n\n  public init = (isOnlyPopup: boolean): void => {\n    this.languageButton()\n    this.generateConsentTextForMobile()\n    this.displayConsentBar(isOnlyPopup)\n    this.generateConsentText()\n    this.generateConsentDetailTypeTab()\n    this.generateFullVersionButton()\n    this.generateFullVersionButtonForMobile()\n    this.generateAgreeToggleByType()\n    this.generateAgreeToggleByTypeForMobile()\n    this.changeLanguage(this.activeLanguage)\n    this.changeTab(0, false)\n    this.updateConsentAcceptationValue()\n\n    this.setButtonEvent()\n    this.closeModal()\n  }\n\n  public setButtonEvent = (): void => {\n    // Assign onclick event on individual HTML tags\n    const fullVersionBtnContainer = this.shadowRoot.querySelector('#full-version-btn-container')\n    const fullVersionSpanTag = <HTMLCollectionOf<HTMLElement>>(\n      fullVersionBtnContainer!.getElementsByClassName('modal-content-footer-text')\n    )\n    fullVersionSpanTag[0].onclick = this.showFullDescriptionToggle\n\n    const backBtnContainer = this.shadowRoot.querySelector('#full-description-consent-message-btn-container')\n    const backBtn = backBtnContainer!.getElementsByClassName(\n      'consent-message-back-button'\n    ) as HTMLCollectionOf<HTMLElement>\n    backBtn[0].onclick = this.showFullDescriptionToggle\n\n    const overlay = this.shadowRoot.querySelector<HTMLDivElement>('#overlay')!\n    if (!this.previewMode) {\n      overlay.onclick = this.closeModal\n    } else {\n      overlay.classList.add('hide-element')\n    }\n\n    if (!this.previewMode) {\n      const closeBtn = this.shadowRoot.querySelector<HTMLDivElement>('#modal-close-btn')!\n      closeBtn.onclick = this.closeModal\n\n      const notiCloseBtnn = this.shadowRoot.querySelectorAll<HTMLDivElement>('.notification-close-btn')!\n      notiCloseBtnn[0].onclick = this.closeNotiBar\n\n      const briefDescBtnContainer = this.shadowRoot.querySelector('#brief-description-consent-message-btn-container')\n      const saveSettingBtn = briefDescBtnContainer!.querySelectorAll<HTMLDivElement>('.consent-message-save-button')\n      if (this.immediatelySubmit) {\n        saveSettingBtn[0].onclick = this.submitConsent\n      } else {\n        saveSettingBtn[0].onclick = this.closeModal\n      }\n\n      const acceptAllBtn = briefDescBtnContainer!.querySelectorAll<HTMLDivElement>('.consent-message-accept-button')\n      acceptAllBtn[0].onclick = () => this.acceptAllConsent(this.immediatelySubmit, this.closeModal)\n\n      const notiBtnContainer = this.shadowRoot.querySelector('#consent-noti-btn-container')\n      const notiAcceptBtnn = notiBtnContainer!.querySelectorAll<HTMLDivElement>('.accept-btn')\n      notiAcceptBtnn[0].onclick = () => this.acceptAllConsent(true)\n    }\n  }\n\n  public expandConsentBox = (idx: number, isOnMobile: boolean): void => {\n    const consentMessageTopicContainer = this.shadowRoot.querySelectorAll('.mobile-consent-detail-type-tab')\n    const consentMessageBox = this.shadowRoot.querySelectorAll('.mobile-consent-detail-container')\n\n    for (let i = 0; i < consentMessageBox.length; i++) {\n      if (i == idx) {\n        if (isOnMobile) {\n          consentMessageTopicContainer[i].classList.toggle('highlight-mobile-type-tab')\n          consentMessageBox[i].classList.toggle('is-expanded')\n          consentMessageBox[i].classList.toggle('is-collapsed')\n        } else {\n          consentMessageTopicContainer[i].classList.toggle('highlight-mobile-type-tab')\n          consentMessageBox[i].classList.add('is-expanded')\n          consentMessageBox[i].classList.remove('is-collapsed')\n        }\n      } else {\n        consentMessageTopicContainer[i].classList.remove('highlight-mobile-type-tab')\n        consentMessageBox[i].classList.add('is-collapsed')\n        consentMessageBox[i].classList.remove('is-expanded')\n      }\n    }\n\n    if (isOnMobile) {\n      this.changeTab(idx, true)\n    }\n  }\n\n  public languageButton = (): void => {\n    if (this.consentDetail.setting.available_languages.length <= 1) {\n      return\n    }\n    const langBtnGroupContainer = this.shadowRoot.querySelector('#language-btn-container')\n    const modalLangBtnGroupContainer = this.shadowRoot.querySelector('#modal-language-btn-container')\n    if (langBtnGroupContainer && modalLangBtnGroupContainer) {\n      let i = 0\n      if (this.consentDetail.setting.available_languages.length > 4) {\n        // case bar consent\n        const langSelect = document.createElement('select')\n        langSelect.options.selectedIndex = 0\n        langSelect.id = `select_lang_bar`\n        langSelect.name = `select_lang_bar`\n        langSelect.classList.add('select-language')\n        for (const lang of this.consentDetail.setting.available_languages) {\n          const option = document.createElement('option')\n          option.value = lang.toLowerCase()\n          option.text = lang.toUpperCase()\n          langSelect.appendChild(option)\n        }\n        langSelect.onchange = () =>\n          this.changeLanguage(langSelect.options[langSelect.selectedIndex].value.toLowerCase())\n        langBtnGroupContainer.appendChild(langSelect)\n\n        const langSelectModal = document.createElement('select')\n        langSelectModal.options.selectedIndex = 0\n        langSelectModal.id = `select_lang_modal`\n        langSelectModal.name = `select_lang_modal`\n        langSelectModal.classList.add('select-language')\n        for (const lang of this.consentDetail.setting.available_languages) {\n          const option = document.createElement('option')\n          option.value = lang.toLowerCase()\n          option.text = lang.toUpperCase()\n          langSelectModal.appendChild(option)\n        }\n        langSelectModal.onchange = () =>\n          this.changeLanguage(langSelectModal.options[langSelectModal.selectedIndex].value.toLowerCase())\n\n        modalLangBtnGroupContainer.appendChild(langSelectModal)\n      } else if (this.consentDetail.setting.available_languages.length > 2) {\n        // case modal consent\n        const langSelectModal = document.createElement('select')\n        langSelectModal.options.selectedIndex = 0\n        langSelectModal.id = `select_lang_modal`\n        langSelectModal.name = `select_lang_modal`\n        langSelectModal.classList.add('select-language')\n        for (const lang of this.consentDetail.setting.available_languages) {\n          const option = document.createElement('option')\n          option.value = lang.toLowerCase()\n          option.text = lang.toUpperCase()\n          langSelectModal.appendChild(option)\n        }\n        langSelectModal.onchange = () =>\n          this.changeLanguage(langSelectModal.options[langSelectModal.selectedIndex].value.toLowerCase())\n\n        modalLangBtnGroupContainer.appendChild(langSelectModal)\n\n        for (const lang of this.consentDetail.setting.available_languages) {\n          const langBtnContainer = document.createElement('span')\n          langBtnContainer.innerHTML = lang.toUpperCase()\n          langBtnContainer.onclick = () => this.changeLanguage(lang.toLowerCase())\n          langBtnContainer.classList.add('language-btn')\n\n          if (lang == this.consentDetail.setting.default_language) {\n            langBtnContainer.classList.add('active-language-btn')\n          }\n\n          langBtnGroupContainer.appendChild(langBtnContainer)\n\n          if (this.consentDetail.setting.available_languages.length - i > 1) {\n            const divider = document.createElement('span')\n            divider.innerHTML = '&nbsp;&nbsp;|&nbsp;&nbsp;'\n            langBtnGroupContainer.appendChild(divider)\n          }\n\n          // For modal\n          // const modalLangBtnContainer = document.createElement('div')\n          // modalLangBtnContainer.classList.add('modal-language-btn')\n          // modalLangBtnContainer.onclick = () => this.changeLanguage(lang.toLowerCase())\n          // modalLangBtnContainer.innerHTML = lang.toUpperCase()\n\n          // modalLangBtnGroupContainer.appendChild(modalLangBtnContainer)\n\n          i += 1\n        }\n      } else {\n        for (const lang of this.consentDetail.setting.available_languages) {\n          const langBtnContainer = document.createElement('span')\n          langBtnContainer.innerHTML = lang.toUpperCase()\n          langBtnContainer.onclick = () => this.changeLanguage(lang.toLowerCase())\n          langBtnContainer.classList.add('language-btn')\n\n          if (lang == this.consentDetail.setting.default_language) {\n            langBtnContainer.classList.add('active-language-btn')\n          }\n\n          langBtnGroupContainer.appendChild(langBtnContainer)\n\n          if (this.consentDetail.setting.available_languages.length - i > 1) {\n            const divider = document.createElement('span')\n            divider.innerHTML = '&nbsp;&nbsp;|&nbsp;&nbsp;'\n            langBtnGroupContainer.appendChild(divider)\n          }\n\n          // For modal\n          const modalLangBtnContainer = document.createElement('div')\n          modalLangBtnContainer.classList.add('modal-language-btn')\n          modalLangBtnContainer.onclick = () => this.changeLanguage(lang.toLowerCase())\n          modalLangBtnContainer.innerHTML = lang.toUpperCase()\n\n          modalLangBtnGroupContainer.appendChild(modalLangBtnContainer)\n\n          i += 1\n        }\n      }\n    }\n  }\n\n  public generateConsentTextForMobile = (): void => {\n    const mobileAllConsentMessagesContainer = this.shadowRoot.querySelector('#mobile-consent-message-container')\n    if (mobileAllConsentMessagesContainer) {\n      let i = 0\n      for (const item in this.consentDetailType) {\n        if (this.consentDetail.setting[item].is_enabled) {\n          const index = i\n\n          // Top container of consent detail type\n          const consentMessageByTypeContainer = document.createElement('div')\n          consentMessageByTypeContainer.classList.add('mobile-consent-detail-container')\n          consentMessageByTypeContainer.classList.add('is-collapsed')\n\n          // Consent detail type tab container\n          const consentDetailTypeTabContainer = document.createElement('div')\n          consentDetailTypeTabContainer.classList.add('consent-detail-type-tab')\n          consentDetailTypeTabContainer.classList.add('mobile-consent-detail-type-tab')\n          consentDetailTypeTabContainer.onclick = () => this.expandConsentBox(index, true)\n\n          // Active icon\n          const activeIconContainer = document.createElement('div')\n          activeIconContainer.classList.add('active-consent-type-icon-container')\n\n          const checkIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n          checkIcon.classList.add('active-consent-type-icon')\n          checkIcon.setAttributeNS(null, 'viewBox', '0 0 24 24')\n\n          const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n          path.setAttribute('d', 'M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z')\n          path.setAttribute('fill', 'currentColor')\n\n          checkIcon.appendChild(path)\n          activeIconContainer.appendChild(checkIcon)\n\n          // Type title\n          const consentDetailTypeTitle = document.createElement('span')\n          consentDetailTypeTitle.classList.add('consent-detail-type')\n          consentDetailTypeTitle.classList.add('mobile-consent-detail-type')\n          consentDetailTypeTitle.innerHTML = this.consentDetailType[item].label\n\n          // Down arrow\n          const downArrowIconContainer = document.createElement('div')\n          const downArrowIcon = document.createElement('i')\n          downArrowIcon.classList.add('arrow')\n          downArrowIcon.classList.add('down')\n          downArrowIconContainer.appendChild(downArrowIcon)\n\n          // Assign child to parent containner\n          consentDetailTypeTabContainer.appendChild(activeIconContainer)\n          consentDetailTypeTabContainer.appendChild(consentDetailTypeTitle)\n          consentDetailTypeTabContainer.appendChild(downArrowIconContainer)\n\n          consentMessageByTypeContainer.appendChild(consentDetailTypeTabContainer)\n\n          // Consent message container\n          const mobileConsentContentContainer = document.createElement('div')\n          mobileConsentContentContainer.classList.add('mobile-consent-message-content-container')\n\n          // Topic\n          const typeTopicContainner = document.createElement('div')\n          typeTopicContainner.classList.add('modal-content-topic-container')\n          const typeTopic = document.createElement('h4')\n          typeTopic.classList.add('mobile-modal-content-topic')\n          typeTopic.innerHTML = this.consentDetailType[item].label\n\n          typeTopicContainner.appendChild(typeTopic)\n\n          // Body\n          const consentDescriptionContainer = document.createElement('div')\n          consentDescriptionContainer.classList.add('mobile-consent-message-description-container')\n          const consentDescriptionBody = document.createElement('p')\n          consentDescriptionBody.classList.add('mobile-consent-message-description')\n          consentDescriptionBody.innerHTML =\n            this.consentDetail.setting[item].brief_description[this.activeLanguage] || ''\n\n          consentDescriptionContainer.appendChild(consentDescriptionBody)\n\n          // Footer\n          const modalFooterContainer = document.createElement('div')\n          modalFooterContainer.classList.add('mobile-modal-content-footer-container')\n\n          const fullVersionBtnConntainer = document.createElement('div')\n          fullVersionBtnConntainer.classList.add('mobile-full-version-btn-container')\n\n          const acceptToggleConntainer = document.createElement('div')\n          acceptToggleConntainer.classList.add('mobile-accept-by-type-toggle-container')\n\n          modalFooterContainer.appendChild(fullVersionBtnConntainer)\n          modalFooterContainer.appendChild(acceptToggleConntainer)\n\n          // Assign child to parent containner\n          mobileConsentContentContainer.appendChild(typeTopicContainner)\n          mobileConsentContentContainer.appendChild(consentDescriptionContainer)\n          mobileConsentContentContainer.appendChild(modalFooterContainer)\n\n          consentMessageByTypeContainer.appendChild(mobileConsentContentContainer)\n\n          mobileAllConsentMessagesContainer.appendChild(consentMessageByTypeContainer)\n\n          i += 1\n        }\n      }\n    }\n  }\n\n  public generateMobileConsentBriefDescriptionByLang = (): void => {\n    const consentDescriptionBody = this.shadowRoot.querySelectorAll('.mobile-consent-message-description')\n    // const consentDetailType = this.consentDetail.consent_message_type === 'tracking_type' ? this.trackingConsentDetailType : this.contactingTypeDetailOptions;\n\n    let i = 0\n    for (const item in this.consentDetailType) {\n      if (this.consentDetail.setting[item].is_enabled) {\n        consentDescriptionBody[i].innerHTML =\n          this.consentDetail.setting[item].brief_description[this.activeLanguage] || ''\n\n        i += 1\n      }\n    }\n  }\n\n  public displayConsentBar = (isOnlyPopupDisplayed: boolean): void => {\n    const consentBarContainer = this.shadowRoot.querySelector('#consent-noti')\n    if (isOnlyPopupDisplayed) {\n      consentBarContainer!.classList.add('hide-element')\n    }\n  }\n\n  public generateConsentText = (): void => {\n    const consentText = this.shadowRoot.querySelector('#consent-txt')!\n    const acceptBtnContainer = this.shadowRoot.querySelector('#consent-noti-btn-container')\n    const acceptBtn = acceptBtnContainer!.querySelectorAll<HTMLDivElement>('.accept-btn')!\n    const consentDetailTitleContainer = this.shadowRoot.querySelectorAll('.consent-detail-title')\n\n    consentText.innerHTML = this.consentDetail.setting.display_text[this.activeLanguage]\n    acceptBtn[0].innerHTML = this.consentDetail.setting.accept_button_text[this.activeLanguage]\n\n    const consentDetailTitle = consentDetailTitleContainer[0].getElementsByTagName('h3')\n    consentDetailTitle[0].innerHTML = this.consentDetail.setting.consent_detail_title[this.activeLanguage]\n\n    const moreInfoBtn = document.createElement('span')\n    moreInfoBtn.innerHTML = this.consentDetail.setting.more_info.display_text[this.activeLanguage] || 'More Info'\n    moreInfoBtn.classList.add('more-info-link')\n\n    const moreInfoLink = document.createElement('a')\n\n    if (this.consentDetail.setting.more_info.is_custom_url_enabled) {\n      moreInfoLink.href = this.consentDetail.setting.more_info.custom_url[this.activeLanguage] || '#'\n      moreInfoLink.target = '_blank'\n      moreInfoLink.appendChild(moreInfoBtn)\n      consentText.appendChild(moreInfoLink)\n    } else {\n      moreInfoBtn.onclick = this.openModal\n      consentText.appendChild(moreInfoBtn)\n    }\n  }\n\n  public generateConsentDetailTypeTab = async (): Promise<void> => {\n    const checkboxContainer = this.shadowRoot.querySelector('#consent-detail-type-tab-bar')!\n    let i = 0\n    for (const item in this.consentDetailType) {\n      if (this.consentDetail.setting[item].is_enabled) {\n        const index = i\n\n        const typeTabContainer = document.createElement('div')\n        typeTabContainer.classList.add('consent-detail-type-tab')\n        typeTabContainer.onclick = () => this.changeTab(index, false)\n\n        const activeIconContainer = document.createElement('div')\n        activeIconContainer.classList.add('active-consent-type-icon-container')\n\n        const checkIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n        checkIcon.classList.add('active-consent-type-icon')\n        checkIcon.setAttributeNS(null, 'viewBox', '0 0 24 24')\n\n        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n        path.setAttribute('d', 'M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z')\n        path.setAttribute('fill', 'currentColor')\n\n        checkIcon.appendChild(path)\n\n        const typeName = document.createElement('span')\n        typeName.classList.add('consent-detail-type')\n        typeName.innerHTML = this.consentDetailType[item].label\n\n        activeIconContainer.appendChild(checkIcon)\n        typeTabContainer.appendChild(activeIconContainer)\n        typeTabContainer.appendChild(typeName)\n\n        checkboxContainer.appendChild(typeTabContainer)\n\n        i += 1\n      }\n    }\n  }\n\n  public generateFullVersionButton = (): void => {\n    const fullVersionBtnContainer = this.shadowRoot.querySelector('#full-version-btn-container')!\n    const fullVersionSpanTag = fullVersionBtnContainer.getElementsByClassName(\n      'modal-content-footer-text'\n    ) as HTMLCollectionOf<HTMLElement>\n\n    fullVersionSpanTag[0].onclick = this.showFullDescriptionToggle\n\n    let i = 0\n    for (const item in this.consentDetailType) {\n      if (this.consentDetail.setting[item].is_enabled) {\n        if (this.selectedConsentDetailTypeIdx == i) {\n          if (this.consentDetail.setting[item].is_full_description_enabled) {\n            fullVersionSpanTag[0].innerHTML = 'Full Version'\n            fullVersionSpanTag[0].style.display = 'block'\n          } else {\n            fullVersionSpanTag[0].innerHTML = ''\n            fullVersionSpanTag[0].style.display = 'none'\n          }\n          break\n        }\n        i += 1\n      }\n    }\n  }\n\n  public generateFullVersionButtonForMobile = (): void => {\n    const mobileFullVersionBtnContainer = this.shadowRoot.querySelectorAll('.mobile-full-version-btn-container')\n\n    let i = 0\n    for (const item in this.consentDetailType) {\n      if (this.consentDetail.setting[item].is_enabled) {\n        const fullVersionSpanTag = document.createElement('span')\n        fullVersionSpanTag.classList.add('modal-content-footer-text')\n        if (this.consentDetail.setting[item].is_full_description_enabled) {\n          fullVersionSpanTag.innerHTML = 'Full Version'\n          fullVersionSpanTag.onclick = this.showFullDescriptionToggle\n        } else {\n          fullVersionSpanTag.innerHTML = ''\n          fullVersionSpanTag.style.display = 'none'\n        }\n\n        mobileFullVersionBtnContainer[i].appendChild(fullVersionSpanTag)\n        i += 1\n      }\n    }\n  }\n\n  public generateAgreeToggleByType = (): void => {\n    const checkboxContainer = this.shadowRoot.querySelector<HTMLDivElement>('#accept-by-type-toggle-container')\n    let i = 0\n    // let isAlwaysAccepted = false\n    for (const item in this.consentDetailType) {\n      if (this.consentDetail.setting[item].is_enabled) {\n        const index = i\n        // isAlwaysAccepted = this.consentDetailType[item].isAlwaysAccepted\n\n        const checkbox = document.createElement('input')\n        checkbox.type = 'checkbox'\n        checkbox.id = `checkbox_${item}`\n        checkbox.name = `test-input-group`\n        checkbox.value = `${item}`\n        checkbox.classList.add('accept-by-type-toggle')\n        checkbox.checked = true\n        checkbox.onclick = () => this.acceptToggle(index, item)\n\n        const label = document.createElement('label')\n        label.classList.add('accept-by-type-switch')\n\n        if (this.selectedConsentDetailTypeIdx == index) {\n          label.style.display = 'block'\n        } else {\n          label.style.display = 'none'\n        }\n\n        const slider = document.createElement('span')\n        slider.classList.add('slider')\n        slider.classList.add('round')\n\n        label.appendChild(checkbox)\n        label.appendChild(slider)\n        checkboxContainer!.appendChild(label)\n\n        i += 1\n      }\n    }\n    const checkBoxLabel = document.createElement('span')\n    checkBoxLabel.innerHTML = 'Accept'\n    checkBoxLabel.classList.add('modal-content-footer-text')\n    checkboxContainer!.appendChild(checkBoxLabel)\n\n    // if(isAlwaysAccepted) {\n    //     checkboxContainer!.style.display = 'none'\n    // } else {\n    //     checkboxContainer!.style.display = 'block'\n    // }\n  }\n\n  public generateAgreeToggleByTypeForMobile = (): void => {\n    const mobilecheckboxContainer = this.shadowRoot.querySelectorAll<HTMLDivElement>(\n      '.mobile-accept-by-type-toggle-container'\n    )\n    let i = 0\n    for (const item in this.consentDetailType) {\n      if (this.consentDetail.setting[item].is_enabled) {\n        const index = i\n\n        const checkbox = document.createElement('input')\n        checkbox.type = 'checkbox'\n        checkbox.id = `mobile_checkbox_${item}`\n        checkbox.name = `mobile_${item}`\n        checkbox.value = `${item}`\n        checkbox.classList.add('accept-by-type-toggle')\n        checkbox.checked = true\n        checkbox.onclick = () => this.acceptToggle(index, item)\n\n        const label = document.createElement('label')\n        label.classList.add('accept-by-type-switch')\n\n        const slider = document.createElement('span')\n        slider.classList.add('slider')\n        slider.classList.add('round')\n\n        label.appendChild(checkbox)\n        label.appendChild(slider)\n\n        mobilecheckboxContainer[index].appendChild(label)\n\n        const checkBoxLabel = document.createElement('span')\n        checkBoxLabel.innerHTML = 'Accept'\n        checkBoxLabel.classList.add('modal-content-footer-text')\n        mobilecheckboxContainer[index].appendChild(checkBoxLabel)\n\n        if (this.consentDetailType[item].isAlwaysAccepted) {\n          mobilecheckboxContainer[index].style.display = 'none'\n        }\n\n        i += 1\n      }\n    }\n  }\n\n  public generateConsentDetailByType = (): void => {\n    const modelContent = this.shadowRoot.querySelector('#modal-content-list')\n    if (modelContent) {\n      while (modelContent.firstChild) {\n        modelContent.removeChild(modelContent.firstChild)\n      }\n\n      let i = 0\n      for (const item in this.consentDetailType) {\n        if (this.consentDetail.setting[item].is_enabled) {\n          const contentContainer = document.createElement('div')\n          contentContainer.classList.add('modal-content')\n\n          if (this.selectedConsentDetailTypeIdx == i) {\n            contentContainer.style.display = 'block'\n          } else {\n            contentContainer.style.display = 'none'\n          }\n\n          const contentParagraph = document.createElement('p')\n          contentParagraph.innerHTML = this.consentDetail.setting[item].brief_description[this.activeLanguage] || ''\n\n          contentContainer.appendChild(contentParagraph)\n          modelContent.appendChild(contentContainer)\n\n          i += 1\n        }\n      }\n    }\n  }\n\n  public generateConsentFullDetailByType = (): void => {\n    const modelFullContent = this.shadowRoot.querySelector('#modal-full-content-list')\n    if (modelFullContent) {\n      while (modelFullContent.firstChild) {\n        modelFullContent.removeChild(modelFullContent.firstChild)\n      }\n\n      let i = 0\n      for (const item in this.consentDetailType) {\n        if (this.consentDetail.setting[item].is_enabled) {\n          const contentContainer = document.createElement('div')\n          contentContainer.classList.add('full-modal-content')\n\n          if (this.selectedConsentDetailTypeIdx == i) {\n            contentContainer.style.display = 'block'\n          } else {\n            contentContainer.style.display = 'none'\n          }\n\n          const contentParagraph = document.createElement('p')\n          contentParagraph.innerHTML = this.consentDetail.setting[item].full_description[this.activeLanguage] || ''\n\n          contentContainer.appendChild(contentParagraph)\n          modelFullContent.appendChild(contentContainer)\n\n          i += 1\n        }\n      }\n    }\n  }\n\n  public changeLanguage = (lang: string): void => {\n    const langBtn = this.shadowRoot.querySelectorAll('.language-btn')\n    const modalLangBtn = this.shadowRoot.querySelectorAll('.modal-language-btn')\n    this.activeLanguage = lang\n\n    for (let i = 0; i < langBtn.length; i++) {\n      const presentLang = langBtn[i].innerHTML.trim().toLowerCase()\n      if (lang.toLowerCase() == presentLang) {\n        //this.activeLanguage = presentLang\n\n        langBtn[i].classList.add('active-language-btn')\n        if (langBtn.length < 3) {\n          modalLangBtn[i].classList.add('active-modal-language-btn')\n          modalLangBtn[i].classList.remove('inactive-language-btn')\n        }\n      } else {\n        langBtn[i].classList.remove('active-language-btn')\n        if (langBtn.length < 3) {\n          modalLangBtn[i].classList.remove('active-modal-language-btn')\n          modalLangBtn[i].classList.add('inactive-language-btn')\n        }\n      }\n    }\n\n    this.generateConsentText()\n    this.generateConsentDetailByType()\n    this.generateMobileConsentBriefDescriptionByLang()\n    this.generateConsentFullDetailByType()\n  }\n\n  public changeTab = (idx: number, isOnMobile: boolean): void => {\n    const tabs = this.shadowRoot.querySelectorAll<HTMLDivElement>('.consent-detail-type-tab')\n    const consentDetailTypeTag = this.shadowRoot.querySelectorAll<HTMLSpanElement>('.consent-detail-type')\n    const contents = this.shadowRoot.querySelectorAll<HTMLDivElement>('.modal-content')\n    const fullContents = this.shadowRoot.querySelectorAll<HTMLDivElement>('.full-modal-content')\n    const contentTopic = this.shadowRoot.querySelector<HTMLDivElement>('#modal-content-topic')\n    const fullContentTopic = this.shadowRoot.querySelector<HTMLDivElement>('#modal-full-content-topic')\n    const checkboxContainer = this.shadowRoot.querySelector<HTMLDivElement>('#accept-by-type-toggle-container')\n    const acceptSwitch = checkboxContainer!.getElementsByClassName(\n      'accept-by-type-switch'\n    ) as HTMLCollectionOf<HTMLLabelElement>\n\n    this.selectedConsentDetailTypeIdx = idx\n\n    for (let i = 0; i < contents.length; i++) {\n      if (i === idx) {\n        contentTopic!.innerHTML = consentDetailTypeTag[i].innerHTML\n        fullContentTopic!.innerHTML = consentDetailTypeTag[i].innerHTML\n        tabs[i].classList.add('modal-tab-active')\n        contents[i].style.display = 'block'\n        fullContents[i].style.display = 'block'\n\n        let typeSequence = 0\n        for (const item in this.consentDetailType) {\n          if (this.consentDetail.setting[item].is_enabled) {\n            if (typeSequence == idx) {\n              checkboxContainer!.style.display = this.consentDetailType[item].isAlwaysAccepted ? 'none' : 'flex'\n              break\n            }\n            typeSequence += 1\n          }\n        }\n        acceptSwitch[i].style.display = 'block'\n      } else {\n        tabs[i].classList.remove('modal-tab-active')\n        contents[i].style.display = 'none'\n        fullContents[i].style.display = 'none'\n        acceptSwitch[i].style.display = 'none'\n      }\n    }\n\n    this.generateFullVersionButton()\n\n    if (!isOnMobile) {\n      this.expandConsentBox(idx, false)\n    }\n  }\n\n  public showFullDescriptionToggle = (): void => {\n    const briefDescriptionContainer = this.shadowRoot.querySelector('#consent-message-container')\n    const fullDescriptionContainer = this.shadowRoot.querySelector('#full-consent-message-container')\n    const briefDescriptionBtnContainer = this.shadowRoot.querySelector(\n      '#brief-description-consent-message-btn-container'\n    )\n    const fullDescriptionBtnContainer = this.shadowRoot.querySelector('#full-description-consent-message-btn-container')\n\n    const mobileConsentMessageContainer = this.shadowRoot.querySelector('#mobile-consent-message-container')\n\n    mobileConsentMessageContainer!.classList.toggle('hide-element')\n\n    briefDescriptionContainer?.classList.toggle('hide-element')\n    fullDescriptionContainer?.classList.toggle('hide-element')\n\n    briefDescriptionBtnContainer?.classList.toggle('hide-element')\n    fullDescriptionBtnContainer?.classList.toggle('hide-element')\n  }\n\n  public acceptToggle = (idx: number, typeName: string): void => {\n    const webConsentMessageContainer = this.shadowRoot.querySelector('#consent-detail-type-tab-bar')\n    const mobileConsentMessageContainer = this.shadowRoot.querySelector('#mobile-consent-message-container')\n\n    const consentDetailTypeActiveIcon = webConsentMessageContainer!.querySelectorAll<HTMLImageElement>(\n      '.active-consent-type-icon'\n    )\n    const mobileConsentDetailTypeActiveIcon = mobileConsentMessageContainer!.querySelectorAll<HTMLImageElement>(\n      '.active-consent-type-icon'\n    )\n\n    consentDetailTypeActiveIcon[idx].classList.toggle('hide-element')\n    mobileConsentDetailTypeActiveIcon[idx].classList.toggle('hide-element')\n    this.shadowRoot.querySelector<HTMLInputElement>(`#checkbox_${typeName}`)!.checked = !consentDetailTypeActiveIcon[\n      idx\n    ].classList.contains('hide-element')\n    this.shadowRoot.querySelector<HTMLInputElement>(\n      `#mobile_checkbox_${typeName}`\n    )!.checked = !mobileConsentDetailTypeActiveIcon[idx].classList.contains('hide-element')\n\n    this.callbackTriggering()\n  }\n\n  public acceptAllConsent = (submitNow: boolean, func?: () => void): void => {\n    let i = 0\n\n    const webConsentMessageContainer = this.shadowRoot.querySelector('#consent-detail-type-tab-bar')\n    const mobileConsentMessageContainer = this.shadowRoot.querySelector('#mobile-consent-message-container')\n\n    const consentDetailTypeActiveIcon = webConsentMessageContainer!.querySelectorAll<HTMLImageElement>(\n      '.active-consent-type-icon'\n    )\n    const mobileConsentDetailTypeActiveIcon = mobileConsentMessageContainer!.querySelectorAll<HTMLImageElement>(\n      '.active-consent-type-icon'\n    )\n\n    for (const item in this.consentDetailType) {\n      if (this.consentDetail.setting[item].is_enabled) {\n        const index = i\n\n        consentDetailTypeActiveIcon[index].classList.remove('hide-element')\n        mobileConsentDetailTypeActiveIcon[index].classList.remove('hide-element')\n        this.shadowRoot.querySelector<HTMLInputElement>(`#checkbox_${item}`)!.checked = true\n        this.shadowRoot.querySelector<HTMLInputElement>(`#mobile_checkbox_${item}`)!.checked = true\n\n        i += 1\n      }\n    }\n\n    this.callbackTriggering()\n\n    if (submitNow) {\n      this.submitConsent()\n    }\n\n    func && func()\n  }\n\n  public unAcceptAllConsent = (): void => {\n    let i = 0\n\n    const webConsentMessageContainer = this.shadowRoot.querySelector('#consent-detail-type-tab-bar')\n    const mobileConsentMessageContainer = this.shadowRoot.querySelector('#mobile-consent-message-container')\n\n    const consentDetailTypeActiveIcon = webConsentMessageContainer!.querySelectorAll<HTMLImageElement>(\n      '.active-consent-type-icon'\n    )\n    const mobileConsentDetailTypeActiveIcon = mobileConsentMessageContainer!.querySelectorAll<HTMLImageElement>(\n      '.active-consent-type-icon'\n    )\n\n    for (const item in this.consentDetailType) {\n      if (this.consentDetail.setting[item].is_enabled) {\n        const index = i\n\n        consentDetailTypeActiveIcon[index].classList.add('hide-element')\n        mobileConsentDetailTypeActiveIcon[index].classList.add('hide-element')\n        this.shadowRoot.querySelector<HTMLInputElement>(`#checkbox_${item}`)!.checked = false\n        this.shadowRoot.querySelector<HTMLInputElement>(`#mobile_checkbox_${item}`)!.checked = false\n\n        i += 1\n      }\n    }\n\n    this.callbackTriggering()\n  }\n\n  public acceptSpecificConsent = (permissionBody: Record<string, boolean>): void => {\n    const webConsentMessageContainer = this.shadowRoot.querySelector('#consent-detail-type-tab-bar')\n    const mobileConsentMessageContainer = this.shadowRoot.querySelector('#mobile-consent-message-container')\n\n    const consentDetailTypeActiveIcon = webConsentMessageContainer!.querySelectorAll<HTMLImageElement>(\n      '.active-consent-type-icon'\n    )\n    const mobileConsentDetailTypeActiveIcon = mobileConsentMessageContainer!.querySelectorAll<HTMLImageElement>(\n      '.active-consent-type-icon'\n    )\n\n    for (const topic in permissionBody) {\n      let i = 0\n      for (const item in this.consentDetailType) {\n        if (this.consentDetail.setting[item].is_enabled) {\n          const index = i\n\n          if (topic == item) {\n            if (permissionBody[topic]) {\n              consentDetailTypeActiveIcon[index].classList.remove('hide-element')\n              mobileConsentDetailTypeActiveIcon[index].classList.remove('hide-element')\n            } else {\n              consentDetailTypeActiveIcon[index].classList.add('hide-element')\n              mobileConsentDetailTypeActiveIcon[index].classList.add('hide-element')\n            }\n\n            this.shadowRoot.querySelector<HTMLInputElement>(`#checkbox_${item}`)!.checked = permissionBody[topic]\n              ? true\n              : false\n            this.shadowRoot.querySelector<HTMLInputElement>(`#mobile_checkbox_${item}`)!.checked = permissionBody[topic]\n              ? true\n              : false\n\n            break\n          }\n\n          i += 1\n        }\n      }\n    }\n\n    this.callbackTriggering()\n  }\n\n  public updateConsentAcceptationValue = (): void => {\n    for (const item in this.consentDetailType) {\n      if (this.consentDetail.setting[item].is_enabled) {\n        this.assign(\n          this.updatedConsentAcceptation.permission,\n          [item],\n          this.shadowRoot.querySelector<HTMLInputElement>(`#checkbox_${item}`)!.checked\n        )\n      }\n    }\n  }\n\n  public submitConsent = async (): Promise<ITrackerResponse | null> => {\n    if (!this.previewMode) {\n      this.closeModal()\n      this.closeNotiBar()\n\n      let res: ITrackerResponse\n      try {\n        if (this.submitConsentPermission) {\n          res = await this.submitConsentPermission(this.updatedConsentAcceptation)\n          return res\n        }\n      } catch (e) {\n        throw e\n      }\n    }\n\n    return null\n  }\n\n  private callbackTriggering = (): void => {\n    const prev = {\n      consent_message_id: this.updatedConsentAcceptation.consent_message_id,\n      version: this.updatedConsentAcceptation.version,\n      permission: { ...this.updatedConsentAcceptation.permission },\n    }\n\n    this.updateConsentAcceptationValue()\n\n    const state = {\n      consent_message_id: this.updatedConsentAcceptation.consent_message_id,\n      version: this.updatedConsentAcceptation.version,\n      permission: { ...this.updatedConsentAcceptation.permission },\n    }\n\n    this.callback && this.callback(prev, state)\n  }\n\n  public openModal = (): void => {\n    this.shadowRoot.querySelector<HTMLDivElement>('#overlay')!.style.display = 'block'\n    this.shadowRoot.querySelector<HTMLDivElement>('#modal')!.style.display = 'flex'\n  }\n\n  public closeModal = (): void => {\n    this.shadowRoot.querySelector<HTMLDivElement>('#overlay')!.style.display = 'none'\n    this.shadowRoot.querySelector<HTMLDivElement>('#modal')!.style.display = 'none'\n  }\n\n  public closeNotiBar = (): void => {\n    this.shadowRoot.querySelector<HTMLDivElement>('#consent-noti')!.style.display = 'none'\n\n    window.localStorage.setItem('latest_get_customer_consent', new Date().toISOString())\n  }\n\n  public removePopup = (): void => {\n    this.close()\n  }\n\n  public assign = (obj: any, keyPath: any, value: any): void => {\n    const lastKeyIndex = keyPath.length - 1\n    for (let i = 0; i < lastKeyIndex; ++i) {\n      const key = keyPath[i]\n      if (!(key in obj)) {\n        obj[key] = {}\n      }\n      obj = obj[key]\n    }\n    obj[keyPath[lastKeyIndex]] = value\n  }\n}\n","import { IConsentMessage, IPermissionBody, ITrackerResponse } from '../Service/types'\n\nexport default class PermissionManagement {\n  constructor(\n    private consentDetail: IConsentMessage,\n    private submitConsentPermission?: (consentAcceptation: IPermissionBody) => Promise<ITrackerResponse>\n  ) {\n    this.init() // Init enabled permission data\n  }\n\n  public consentMessageID = ''\n  public permission: Record<string, Record<string, any>> = {}\n\n  trackingConsentDetailType: Record<string, Record<string, any>> = {\n    termsAndConditions: {\n      nameStr: 'Terms & Conditions',\n      key: 'terms_and_conditions',\n      allow: false,\n    },\n    privacyOverview: {\n      nameStr: 'Privacy Overview',\n      key: 'privacy_overview',\n      allow: false,\n    },\n    necessaryCookies: {\n      nameStr: 'Necessary Cookies',\n      key: 'necessary_cookies',\n      allow: false,\n    },\n    preferencesCookies: {\n      nameStr: 'Preferences Cookies',\n      key: 'preferences_cookies',\n      allow: false,\n    },\n    analyticsCookies: {\n      nameStr: 'Analytics Cookies',\n      key: 'analytics_cookies',\n      allow: false,\n    },\n    marketingCookies: {\n      nameStr: 'Marketing Cookies',\n      key: 'marketing_cookies',\n      allow: false,\n    },\n    socialMediaCookies: {\n      nameStr: 'Social Media Cookies',\n      key: 'social_media_cookies',\n      allow: false,\n    },\n  }\n\n  contactingTypeDetailOptions: Record<string, Record<string, any>> = {\n    termsAndConditions: {\n      nameStr: 'Terms & Conditions',\n      key: 'terms_and_conditions',\n      allow: false,\n    },\n    privacyOverview: {\n      nameStr: 'Privacy Overview',\n      key: 'privacy_overview',\n      allow: false,\n    },\n    email: {\n      nameStr: 'Email',\n      key: 'email',\n      allow: false,\n    },\n    sms: {\n      nameStr: 'SMS',\n      key: 'sms',\n      allow: false,\n    },\n    line: {\n      nameStr: 'LINE',\n      key: 'line',\n      allow: false,\n    },\n    facebookMessenger: {\n      nameStr: 'Facebook Messenger',\n      key: 'facebook_messenger',\n      allow: false,\n    },\n    pushNotification: {\n      nameStr: 'Push Notification',\n      key: 'push_notification',\n      allow: false,\n    },\n  }\n\n  consentAcceptation: IPermissionBody = {\n    consent_message_id: this.consentDetail.consent_message_id,\n    version: this.consentDetail.setting.version!,\n    permission: {},\n  }\n\n  private init = (): void => {\n    this.consentMessageID = this.consentDetail.consent_message_id\n    const tempPerm =\n      this.consentDetail.consent_message_type === 'tracking_type'\n        ? this.trackingConsentDetailType\n        : this.contactingTypeDetailOptions\n\n    for (const item in tempPerm) {\n      if (this.consentDetail.setting[tempPerm[item]['key']].is_enabled) {\n        this.permission[item] = { ...tempPerm[item] }\n      }\n    }\n  }\n\n  public setPermission = (name: string, allow: boolean): void => {\n    for (const item in this.permission) {\n      const permObj = this.permission[item]\n      if (item == name && this.consentDetail.setting[permObj['key']].is_enabled) {\n        permObj['allow'] = allow\n      }\n    }\n  }\n\n  public allowAll = (): void => {\n    for (const item in this.permission) {\n      const permObj = this.permission[item]\n      if (this.consentDetail.setting[permObj['key']].is_enabled) {\n        permObj['allow'] = true\n      }\n    }\n  }\n\n  public disallowAll = (): void => {\n    for (const item in this.permission) {\n      const permObj = this.permission[item]\n      if (this.consentDetail.setting[permObj['key']].is_enabled) {\n        permObj['allow'] = false\n        // this.assign(this.permission, item, false)\n      }\n    }\n  }\n\n  public submitConsent = async (): Promise<ITrackerResponse | undefined> => {\n    let res: ITrackerResponse\n\n    // Assign properly permission format to submit body\n    const submittedPerm: Record<string, boolean> = {}\n    for (const item in this.permission) {\n      const permObj = this.permission[item]\n      submittedPerm[permObj['key']] = permObj['allow']\n    }\n    this.consentAcceptation.permission = submittedPerm\n\n    try {\n      if (this.submitConsentPermission) {\n        res = await this.submitConsentPermission(this.consentAcceptation)\n        return res\n      }\n    } catch (e) {\n      throw e\n    }\n  }\n}\n","import { IContext } from '../pam4-tracker'\nimport { DBType, getCurrentDBType, parseBool, readCookie } from '../util'\nimport NotificationPopup from './NotificationPopup'\nimport PermissionManagement from './PermissionManagement'\nimport Service from '../Service'\nimport { IConsentMessage, IPermissionBody, ICustomerConsentDetail, ITrackerResponse } from '../Service/types'\nimport { ISetLoginStatePayload } from './types'\nimport { getFormatData, IFormatData } from '../util'\nexport default class ConsentManager {\n  private readonly NUMBER_OF_MINUTES_TO_CHECK_POPUP_PERMISSION = 1\n  private NUMBER_OF_HOUR_TO_GET_CONSENT_API = 1\n  private readonly HAS_LOGGEDIN_KEY = 'pam_has_loggedin'\n  private readonly LOGIN_ID_KEY = 'pam_login_id'\n\n  public consentMessage!: IConsentMessage\n  public customerConsentDetail: ICustomerConsentDetail | null\n  private notificationPopups: NotificationPopup[]\n  private _hasLoggedIn: boolean\n  public loginIdKey: string\n  public loginId: string | null\n  private _isFetching: boolean\n  private _isTrackingConsentRefreshing: boolean\n\n  constructor(private ctx: IContext, private service: Service) {\n    this.customerConsentDetail = null\n    this.notificationPopups = []\n    this._hasLoggedIn = parseBool(window.localStorage.getItem(this.HAS_LOGGEDIN_KEY) ?? '')\n    this.loginIdKey = this.ctx.config.loginKey\n    this.loginId = window.localStorage.getItem(this.LOGIN_ID_KEY)\n    this._isFetching = false\n    this._isTrackingConsentRefreshing = false\n\n    if (ctx.config.consentRenewalPeriodDays !== undefined) {\n      this.NUMBER_OF_HOUR_TO_GET_CONSENT_API = ctx.config.consentRenewalPeriodDays * 24\n    } else {\n      this.NUMBER_OF_HOUR_TO_GET_CONSENT_API = 30 * 24\n    }\n  }\n\n  public get isFetching(): boolean {\n    return this._isFetching\n  }\n\n  public get isTrackingConsentRefreshing(): boolean {\n    return this._isTrackingConsentRefreshing\n  }\n\n  public getContactId(): string | null {\n    return window.localStorage.getItem('contact_id')\n  }\n\n  public async start(): Promise<void> {\n    this._isFetching = true\n    if (!this.ctx.config.trackingConsentMessageId) {\n      console.error('PAM tracking consent message id must be provided')\n      this._isFetching = false\n      return\n    }\n\n    try {\n      this.consentMessage = await this.service.fetchConsentMessage()\n    } catch (e) {\n      console.error(e)\n      this._isFetching = false\n      return\n    }\n\n    const contactId = this.getContactId()\n    if (contactId) {\n      try {\n        await this.refreshTrackingConsentStatus()\n      } catch (e) {\n        this._isFetching = false\n      }\n    }\n\n    if (!this.ctx.config.disableInstantPopupUI) {\n      await this.getShowConsentPopup()\n    }\n    // else {\n    //   const contactId = getContactId()\n\n    //   if (contactId) {\n    //     try {\n    //       await this.refreshTrackingConsentStatus()\n    //     } catch (e) {\n    //       console.error(e)\n    //       this._isFetching = false\n    //       return\n    //     }\n    //   }\n    // }\n\n    this._isFetching = false\n  }\n\n  public async getShowConsentPopup(): Promise<void> {\n    await this.setIsShowConsentPopup(false)\n\n    setInterval(() => this.setIsShowConsentPopup(), this.NUMBER_OF_MINUTES_TO_CHECK_POPUP_PERMISSION * 60 * 1000)\n  }\n\n  public async setIsShowConsentPopup(ignoreTimestamp = false): Promise<void> {\n    let isShowPopup = this.isLastPopupMoreThanHours(this.NUMBER_OF_HOUR_TO_GET_CONSENT_API)\n    if (ignoreTimestamp) {\n      isShowPopup = true\n    }\n\n    if (isShowPopup) {\n      const contactId = this.getContactId()\n\n      if (contactId) {\n        try {\n          await this.refreshTrackingConsentStatus()\n        } catch (e) {\n          console.error(e)\n          return\n        }\n      }\n\n      const popupStack: NotificationPopup[] = []\n      if (!contactId || !this.customerConsentDetail || this.customerConsentDetail.need_consent_review) {\n        const popup = new NotificationPopup(this.consentMessage, this.submitConsentAndRefreshStatus, true)\n        this.notificationPopups.push(popup)\n        popupStack.push(popup)\n      }\n\n      if (contactId && this.ctx.config.contactingConsentMessageIds) {\n        for (const consentMsgId of this.ctx.config.contactingConsentMessageIds) {\n          try {\n            const consentDetail = await this.service.getCustomerConsentDetail(contactId, consentMsgId)\n            if (consentDetail.need_consent_review) {\n              const popup = await this.createPopup(consentMsgId, true)\n              popupStack.push(popup)\n            }\n          } catch (e) {}\n        }\n      }\n\n      while (popupStack.length) {\n        popupStack.pop()?.render()\n      }\n\n      // ไม่หยุดแสดง Consent Popup เพียงแค่ แสดงไปแล้ว 1 รอบ\n      // เพราะว่า หากเปลี่ยนไปหน้าอื่น หรือ รีเฟรชหน้า มันจะแสดง Popup รอบเดียว\n      // ซึ่ง เราอยากให้แสดงเรื่อยๆ จนกว่า เขาจะกดปิดไปเอง\n      // ย้ายไปทำ ตอนกดปิดอยู่ที่ไฟล์ NotificationPopup.ts:1923\n      //window.localStorage.setItem('latest_get_customer_consent', new Date().toISOString())\n    }\n  }\n\n  // return true if latestGetCustomerConsent is null (never notify)\n  private isLastPopupMoreThanHours(hours: number): boolean {\n    const latestGetCustomerConsent = window.localStorage.getItem('latest_get_customer_consent')\n\n    if (latestGetCustomerConsent) {\n      return (new Date().getTime() - new Date(latestGetCustomerConsent).getTime()) / (3600 * 1000) > hours\n    }\n\n    return true\n  }\n\n  public get isTrackingAllowed(): boolean {\n    return !!this.customerConsentDetail?.tracking_permission?.preferences_cookies && !!this.getContactId()\n  }\n\n  public submitConsentToPublicDatabase = async (\n    permissionBody: IPermissionBody,\n    formFields: Record<string, unknown> = {}\n  ): Promise<ITrackerResponse> => {\n    let database = this.ctx.config.publicDBAlias\n    if (permissionBody.database) {\n      database = permissionBody.database\n    }\n\n    const consentPerms: any = {\n      _consent_message_id: permissionBody.consent_message_id,\n      _version: permissionBody.version,\n      _database: database,\n\n      // override all fields\n      ...formFields,\n    }\n\n    if (this.hasLoggedIn && this.loginIdKey && this.loginId) {\n      consentPerms[this.loginIdKey] = this.loginId\n    }\n\n    if (permissionBody.permission) {\n      for (const [key, val] of Object.entries(permissionBody.permission)) {\n        consentPerms[`_allow_${key}`] = val\n      }\n    }\n\n    return this.service.sendEvent('allow_consent', '', { ...consentPerms }, DBType.PUBLIC)\n  }\n\n  public submitMultipleConsent = async (consents: Record<string, PermissionManagement>): Promise<any> => {\n    const events: IFormatData[] = []\n\n    const database = getCurrentDBType() === DBType.LOGIN ? this.ctx.config.loginDBAlias : this.ctx.config.publicDBAlias\n\n    for (const i in consents) {\n      const c = consents[i]\n\n      const formField: Record<string, any> = {}\n      formField['_consent_message_id'] = c.consentAcceptation.consent_message_id\n      formField['_version'] = c.consentAcceptation.version\n      formField['_database'] = database\n\n      for (const i in c.permission) {\n        const p = c.permission[i]\n        formField[`_allow_${p.key}`] = p.allow\n      }\n\n      const event = getFormatData('allow_consent', formField)\n      events.push(event)\n    }\n\n    const payload = {\n      _use_first_contact_id_for_all_events: true,\n      events: events,\n    }\n\n    const result = await this.service.sendBulkEvent(payload)\n\n    const resultMap: Record<string, ITrackerResponse> = {}\n\n    let cnt = 0\n    for (const i in consents) {\n      const c = consents[i]\n      resultMap[c.consentMessageID] = result[cnt]\n      cnt++\n    }\n\n    return resultMap\n  }\n\n  // for allow_to_contact consent type\n  public submitConsent = async (\n    permissionBody: IPermissionBody,\n    formFields: Record<string, unknown> = {}\n  ): Promise<ITrackerResponse> => {\n    let database = getCurrentDBType() === DBType.LOGIN ? this.ctx.config.loginDBAlias : this.ctx.config.publicDBAlias\n    if (permissionBody.database) {\n      database = permissionBody.database\n    }\n\n    const consentPerms: any = {\n      _consent_message_id: permissionBody.consent_message_id,\n      _version: permissionBody.version,\n      _database: database,\n\n      // override all fields\n      ...formFields,\n    }\n\n    if (this.hasLoggedIn && this.loginIdKey && this.loginId) {\n      consentPerms[this.loginIdKey] = this.loginId\n    }\n\n    if (permissionBody.permission) {\n      for (const [key, val] of Object.entries(permissionBody.permission)) {\n        consentPerms[`_allow_${key}`] = val\n      }\n    }\n\n    return this.service.sendEvent('allow_consent', '', { ...consentPerms })\n  }\n\n  private submitConsentAndRefreshStatus = async (\n    permissionBody: IPermissionBody,\n    formFields: Record<string, unknown> = {}\n  ): Promise<ITrackerResponse> => {\n    try {\n      const res = await this.submitConsent(permissionBody, formFields)\n      await this.refreshTrackingConsentStatus()\n      return res\n    } catch (e) {\n      throw e\n    }\n  }\n\n  public async refreshTrackingConsentStatus(): Promise<void> {\n    this._isTrackingConsentRefreshing = true\n    const contactId = this.getContactId()\n    if (!contactId) {\n      this._isTrackingConsentRefreshing = false\n      throw new Error('contact_id is not defined')\n    }\n\n    try {\n      this.customerConsentDetail = await this.service.getCustomerConsentDetail(\n        contactId,\n        this.ctx.config.trackingConsentMessageId\n      )\n    } catch (e) {\n      this.customerConsentDetail = null\n      if ((e as any).code === 'NOT_FOUND') {\n        this._isTrackingConsentRefreshing = false\n        return\n      }\n      this._isTrackingConsentRefreshing = false\n      throw e\n    }\n    this._isTrackingConsentRefreshing = false\n  }\n\n  public displayConsentMessageModal = async (consentMessageID: string): Promise<void> => {\n    const consentMessage = await this.service.fetchConsentMessage(consentMessageID)\n    const popup = new NotificationPopup(consentMessage, this.submitConsent, true)\n    this.notificationPopups.push(popup)\n    popup.renderOnlyPopup()\n  }\n\n  public createPopup = async (\n    consentMessageID: string,\n    immediatelySubmit: boolean,\n    callback?: (prev: any, state: any) => void,\n    disableToggleOptions = false\n  ): Promise<NotificationPopup> => {\n    const consentMessage = await this.service.fetchConsentMessage(consentMessageID)\n    const popup = new NotificationPopup(\n      consentMessage,\n      this.submitConsent,\n      immediatelySubmit,\n      callback,\n      false,\n      disableToggleOptions\n    )\n    this.notificationPopups.push(popup)\n    return popup\n  }\n\n  public loadConsentDetails = async (consentMessageIDs: string[]): Promise<Record<string, PermissionManagement>> => {\n    const consentMessages: Record<string, PermissionManagement> = {}\n    for (let i = 0; i < consentMessageIDs.length; i++) {\n      const consentMessage = await this.service.fetchConsentMessage(consentMessageIDs[i])\n      consentMessages[consentMessageIDs[i]] = new PermissionManagement(consentMessage, this.submitConsent)\n    }\n    return consentMessages\n  }\n\n  public clear(): void {\n    for (const popup of this.notificationPopups) {\n      popup.close()\n    }\n    this.notificationPopups = []\n  }\n\n  public setLoginState(payload: ISetLoginStatePayload): void {\n    if (payload.hasLoggedIn) {\n      this.loginId = window.localStorage.getItem(this.LOGIN_ID_KEY)\n\n      if (!this.loginIdKey) {\n        console.error('login_id key must be provided')\n        return\n      }\n\n      const loginId = payload.loginId || this.loginId\n\n      if (!loginId) {\n        console.log('login_id must be provided')\n        return\n      }\n\n      this._hasLoggedIn = true\n      window.localStorage.setItem(this.HAS_LOGGEDIN_KEY, 'true')\n      window.localStorage.setItem(this.LOGIN_ID_KEY, loginId)\n      window.localStorage.setItem('db_type', DBType.LOGIN)\n    } else {\n      this._hasLoggedIn = false\n      this.loginId = null\n      window.localStorage.setItem(this.HAS_LOGGEDIN_KEY, 'false')\n      window.localStorage.setItem('db_type', DBType.PUBLIC)\n    }\n  }\n\n  public async userLogin(id: string): Promise<void> {\n    this.clear()\n\n    const payload = {\n      _database: this.ctx.config.loginDBAlias,\n      [this.loginIdKey]: id,\n    }\n\n    try {\n      await this.service.sendEvent('login', '', payload)\n\n      this._hasLoggedIn = true\n      this.loginId = id\n      window.localStorage.setItem(this.HAS_LOGGEDIN_KEY, 'true')\n      window.localStorage.setItem(this.LOGIN_ID_KEY, id)\n      window.localStorage.setItem('db_type', DBType.LOGIN)\n\n      await this.setIsShowConsentPopup(true)\n    } catch (e) {\n      throw e\n    }\n  }\n\n  public async userLogout(): Promise<void> {\n    this.clear()\n\n    if (!this.loginIdKey) {\n      throw new Error('login_id key must be provided')\n    }\n\n    if (!this.loginId) {\n      throw new Error('login_id must be provided')\n    }\n\n    const payload = {\n      _database: this.ctx.config.loginDBAlias,\n      [this.loginIdKey]: this.loginId,\n    }\n\n    try {\n      await this.service.sendEvent('logout', '', payload)\n\n      this._hasLoggedIn = false\n      this.loginId = null\n      window.localStorage.setItem(this.HAS_LOGGEDIN_KEY, 'false')\n      const publicContactId = readCookie(`${this.ctx.config.publicDBAlias}_contact_id`) ?? ''\n      window.localStorage.setItem(this.LOGIN_ID_KEY, publicContactId)\n      window.localStorage.setItem('db_type', DBType.PUBLIC)\n      await this.setIsShowConsentPopup(true)\n    } catch (e) {\n      throw e\n    }\n  }\n\n  public get hasLoggedIn(): boolean {\n    return this._hasLoggedIn\n  }\n\n  public async getCustomerConsentDetail(\n    consentMessageId: string\n  ): Promise<ICustomerConsentDetail | Record<string, unknown>> {\n    this._isFetching = true\n    let consentDetail = {}\n    try {\n      const contactId = this.getContactId()\n      if (contactId) {\n        consentDetail = await this.service.getCustomerConsentDetail(contactId!, consentMessageId)\n        return consentDetail\n      }\n    } catch (e) {\n    } finally {\n      this._isFetching = false\n    }\n    return consentDetail\n  }\n}\n","export const SIZE = {\n  SM: '300px',\n  MD: '500px',\n  LG: '700px',\n  FULL: '1200px',\n  DEFAULT: '500px',\n}\n\nexport const POPUP_OPEN_CLASS = 'pam-attention-popup-open'\n","interface PopupTemplatePropTypes {\n  html: string\n  width: string\n  backdropOpacity: number\n  isBorderless: boolean\n}\n\nexport const popupTemplate = ({ html, width, backdropOpacity, isBorderless }: PopupTemplatePropTypes): string => {\n  return `<div>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\"/>\n    <style>\n\n    .popup {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      position: fixed;\n      z-index: 2147483647; /* Sit on top */\n      left: 0;\n      top: 0;\n      padding: 50px 50px;\n      width: 100%; /* Full width */\n      height: 100%; /* Full height */\n      overflow: auto; /* Enable scroll if needed */\n    }\n\n    .popup-content {\n      z-index: 2;\n      position: relative;\n      background-color: #fefefe;\n      width: ${width}; /* Could be more or less, depending on screen size */\n      outline: 0;\n      max-width: 92%;\n      overflow-x: hidden;\n      overflow-y: auto;\n      max-height: 100%;\n      -ms-overflow-style: none;  /* IE and Edge */\n    }\n\n    .body {\n      padding: ${isBorderless ? 0 : '20px'};\n      border-radius: 5px;\n      outline: 0;\n    }\n\n    @media (max-width: 575px) {\n      .popup-content {\n        width: 100%;\n      }\n      .popup {\n        padding: ${isBorderless ? 0 : '50px 15px'};\n      }\n    }\n\n    .attention-popup-backdrop {\n      overflow: hidden;\n      background-color: rgba(0, 0, 0, ${backdropOpacity / 100});\n      width: 100vw;\n      height: 100vh;\n      position: fixed;\n      left: 0;\n      top: 0;\n      z-index: 1;\n      visibility: visible;\n      transition: opacity 0.2s ease-in;\n    }\n\n    .attention-popup-close {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      position: absolute;\n      background-color: #ffffff;\n      border-radius: 50%;\n      width: 20px;\n      height: 20px;\n      right: 6px;\n      top: 6px;\n      z-index: 2001;\n      margin: 0;\n      padding: 0;\n      cursor: pointer\n    }\n    </style>\n    <div class=\"popup\">\n      <div\n        class=\"attention-popup-backdrop\"\n      ></div>\n      <div class=\"popup-content\">\n        <div class=\"attention-popup-close\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" id=\"Capa_1\" x=\"0px\" y=\"0px\" width=\"8px\" height=\"8px\" viewBox=\"0 0 348.333 348.334\" style=\"enable-background:new 0 0 348.333 348.334;\" xml:space=\"preserve\" class=\"\">\n            <g>\n              <path d=\"M336.559,68.611L231.016,174.165l105.543,105.549c15.699,15.705,15.699,41.145,0,56.85   c-7.844,7.844-18.128,11.769-28.407,11.769c-10.296,0-20.581-3.919-28.419-11.769L174.167,231.003L68.609,336.563   c-7.843,7.844-18.128,11.769-28.416,11.769c-10.285,0-20.563-3.919-28.413-11.769c-15.699-15.698-15.699-41.139,0-56.85   l105.54-105.549L11.774,68.611c-15.699-15.699-15.699-41.145,0-56.844c15.696-15.687,41.127-15.687,56.829,0l105.563,105.554   L279.721,11.767c15.705-15.687,41.139-15.687,56.832,0C352.258,27.466,352.258,52.912,336.559,68.611z\" data-original=\"#000000\" class=\"active-path\" data-old_color=\"#000000\" fill=\"#000000\"/>\n            </g>\n          </svg>\n        </div>\n        ${html}\n      </div>\n    </div>\n  </div>`\n}\n","import { IContext } from '../pam4-tracker'\nimport { IAttentionItem, ISize, SizeType, NewSizeType } from './types'\nimport { toggleClass } from '../util'\nimport { POPUP_OPEN_CLASS, SIZE } from './consts'\nimport { popupTemplate } from './popupTemplate'\n\nexport interface IPopup {\n  close(): void\n}\n\nexport default class Popup implements IPopup {\n  constructor(\n    private ctx: IContext,\n    private shadow: ShadowRoot,\n    private shadowHost: HTMLDivElement,\n    private attentionItem: IAttentionItem,\n    private onClose: () => void\n  ) {\n    this._render()\n  }\n\n  public close = (): void => {\n    if (this.shadowHost) {\n      toggleClass(window.document.body, POPUP_OPEN_CLASS)\n      this.shadowHost.remove()\n    }\n  }\n\n  private async _render(): Promise<void> {\n    const globalStyle = window.document.createElement('style')\n    globalStyle.innerHTML = `.${POPUP_OPEN_CLASS} {overflow: hidden !important;}`\n    document.body.insertBefore(globalStyle, document.body.firstChild)\n\n    const section = window.document.createElement('section')\n    this._createElement(section, this.attentionItem)\n    toggleClass(window.document.body, POPUP_OPEN_CLASS)\n\n    const isAllowBackdropClick = this.attentionItem.options.allow_backdrop_click || false\n    if (isAllowBackdropClick) {\n      const popupBackdrop = this.shadow.querySelectorAll<HTMLDivElement>('.attention-popup-backdrop')\n      popupBackdrop[0].onclick = this.onClose\n    }\n\n    const popupCloseBtn = this.shadow.querySelectorAll<HTMLDivElement>('.attention-popup-close')\n    popupCloseBtn[0].onclick = this.onClose\n  }\n\n  private _createElement(section: HTMLElement, attentionItem: IAttentionItem): void {\n    section.innerHTML = popupTemplate({\n      html: attentionItem.html,\n      width: Popup._getPopupSize(attentionItem.options.size),\n      backdropOpacity: attentionItem.options.backdrop_opacity !== null ? attentionItem.options.backdrop_opacity : 0.6,\n      isBorderless: attentionItem.options.is_borderless || false,\n    })\n\n    this.shadow.appendChild(section)\n  }\n\n  private static _getPopupSize(size: ISize): string {\n    switch (size.type) {\n      case NewSizeType.SM:\n      case SizeType.SM:\n        return SIZE.SM\n      case NewSizeType.MD:\n      case SizeType.MD:\n        return SIZE.MD\n      case NewSizeType.LG:\n      case SizeType.LG:\n        return SIZE.LG\n      case NewSizeType.FULL:\n      case SizeType.FULL:\n        return SIZE.FULL\n      case NewSizeType.CUSTOM:\n      case SizeType.CUSTOM:\n        return size.width ? size.width + 'px' : SIZE.DEFAULT\n      default:\n        return SIZE.DEFAULT\n    }\n  }\n}\n","import { IContext } from '../pam4-tracker'\nimport { IAttentionItem, AttentionType } from './types'\n\nexport interface IPopup {\n  close(): void\n}\n\nexport default class Injection implements IPopup {\n  constructor(private ctx: IContext, private attentionItem: IAttentionItem) {\n    this._render()\n  }\n\n  public close = (): void => {\n    console.log('')\n  }\n\n  private async _render(): Promise<void> {\n    if (this.attentionItem.options.container_id) {\n      const container = window.document.getElementById(this.attentionItem.options.container_id)\n      if (container != null) {\n        switch (this.attentionItem.options.type) {\n          case AttentionType.REPLACE:\n            container.innerHTML = this.attentionItem.html\n            break\n          case AttentionType.PREPEND:\n            container.innerHTML = this.attentionItem.html + container.innerHTML\n            break\n          case AttentionType.APPEND:\n            container.innerHTML += this.attentionItem.html\n            break\n          default:\n            console.error(`Attention's type is not found`)\n        }\n\n        const script = window.document.createElement('script')\n        const inlineScript = window.document.createTextNode(this.attentionItem.js)\n        script.appendChild(inlineScript)\n        container.appendChild(script)\n\n        const style = window.document.createElement('style')\n        let css = this.attentionItem.css\n        if (this.attentionItem.custom_css) {\n          css += this.attentionItem.custom_css.replace('\\n', '')\n        }\n        style.innerHTML = css\n        container.appendChild(style)\n      } else {\n        console.error(`Web-attention container's ID '${this.attentionItem.options.container_id}' is not found!`)\n      }\n    } else {\n      console.error(`Web-attention container's id is invalid!`)\n    }\n  }\n}\n","import { IContext } from '../pam4-tracker'\nimport Popup, { IPopup } from './Popup'\nimport Injection from './Injection'\nimport { getFormatData, getPageURL, getScrollPercent, postRequester, serializeJSON, readCookie } from '../util'\nimport { AttentionType, DisplayTimeType, IAttentionItem } from './types'\nimport { ITrackerResponse } from '../Tracker'\n\nexport default class Attention {\n  private shadow!: ShadowRoot\n  private content!: IPopup\n  private shadowHost!: HTMLDivElement\n  private attention!: IAttentionItem\n  private isRendered = false\n  private intervalInstance!: NodeJS.Timeout\n  private totalSeconds = 0\n  private readonly firstFetchIntervalPeriod = 5\n  private readonly fetchIntervalPeriod = 30 /* fetch every n seconds */\n\n  constructor(private ctx: IContext) {\n    this._fetchAndCount = this._fetchAndCount.bind(this)\n  }\n\n  public render(attention: IAttentionItem): void {\n    if (!this.isRendered) {\n      this.attention = attention\n\n      if (attention.options.display_after.type === DisplayTimeType.PAGE_SCROLLING) {\n        window.addEventListener('scroll', this._onScroll, true)\n        return\n      }\n\n      let msCalc = 0\n      if (attention.options.display_after.type === DisplayTimeType.TIME_SPEND) {\n        const sec = attention.options.display_after.second\n        if (sec) {\n          const remainSec = Math.max(sec - this.totalSeconds, 0)\n          msCalc = remainSec * 1000\n        }\n        this.isRendered = true\n      }\n\n      setTimeout(() => {\n        this._show()\n      }, msCalc)\n    }\n  }\n\n  private _createEvent(eventName: string, detail: any): CustomEvent {\n    return new CustomEvent(eventName, {\n      bubbles: true,\n      composed: true,\n      detail,\n    })\n  }\n\n  public async submit(form: HTMLFormElement, id: string): Promise<void> {\n    const button = form.querySelector('button[type=\"submit\"]')! as HTMLButtonElement\n    let tags = ''\n    if (button) {\n      tags = button.getAttribute('data-tags') || ''\n    }\n\n    const formFields = {\n      ...serializeJSON(form),\n      _campaign: id,\n      tags,\n    }\n\n    const data = getFormatData('form_submit', formFields)\n    try {\n      button.dispatchEvent(\n        this._createEvent('pam-submit:request', {\n          id: button.id,\n          data,\n        })\n      )\n\n      const res = await postRequester<ITrackerResponse>(`${this.ctx.config.baseApi}/trackers/events`, data)\n\n      button.dispatchEvent(\n        this._createEvent('pam-submit:success', {\n          id: button.id,\n          data,\n          response: res,\n        })\n      )\n    } catch (err) {\n      button.dispatchEvent(\n        this._createEvent('pam-submit:error', {\n          id: button.id,\n          data,\n          error: err,\n        })\n      )\n    } finally {\n      this.close()\n      const url = button.getAttribute('data-href')\n      if (url) {\n        window.location.href = url\n      }\n    }\n  }\n\n  public async tag(button: HTMLButtonElement, id: string): Promise<void> {\n    const tags = button.getAttribute('data-tags') || ''\n    const formFields = {\n      _campaign: id,\n      tags,\n    }\n\n    const data = getFormatData('attention_tag', formFields)\n    try {\n      button.dispatchEvent(\n        this._createEvent('pam-tag:request', {\n          id: button.id,\n          data,\n        })\n      )\n\n      if (!tags) {\n        throw new Error('tags is empty')\n      }\n\n      const res = await postRequester<ITrackerResponse>(`${this.ctx.config.baseApi}/trackers/events`, data)\n\n      button.dispatchEvent(\n        this._createEvent('pam-tag:success', {\n          id: button.id,\n          data,\n          response: res,\n        })\n      )\n    } catch (err) {\n      button.dispatchEvent(\n        this._createEvent('pam-tag:error', {\n          id: button.id,\n          data,\n          error: err,\n        })\n      )\n    } finally {\n      const url = button.getAttribute('data-href')\n      if (url) {\n        window.location.href = url\n      }\n    }\n  }\n\n  private _onScroll = () => {\n    const percent = this.attention.options.display_after.percent || 0\n    if (getScrollPercent() >= percent && !this.isRendered) {\n      this._show()\n    }\n  }\n\n  public close(): void {\n    if (this.attention.options.type === AttentionType.POPUP) {\n      window.removeEventListener('scroll', this._onScroll, true)\n      this.content.close()\n      window.dispatchEvent(\n        new Event('pam-wa:close', {\n          bubbles: true,\n          composed: true,\n        })\n      )\n    }\n  }\n\n  public async startFetchInterval(): Promise<void> {\n    // try to fetch one time. if it found the web attention, skip the interval\n    const attention = await this.fetch()\n    if (Object.keys(attention).length) {\n      this.render(attention)\n      return\n    }\n    // delay first fetch interval, then start the normal interval\n    setTimeout(() => {\n      this._fetchAndCount(this.firstFetchIntervalPeriod)\n      this.intervalInstance = setInterval(() => {\n        this._fetchAndCount()\n      }, this.fetchIntervalPeriod * 1000)\n    }, this.firstFetchIntervalPeriod * 1000)\n  }\n\n  public stopFetchInterval(): void {\n    if (this.intervalInstance) {\n      clearInterval(this.intervalInstance)\n    }\n  }\n\n  private async _fetchAndCount(second = this.fetchIntervalPeriod): Promise<void> {\n    try {\n      const attention = await this.fetch()\n      if (Object.keys(attention).length) {\n        this.render(attention)\n        this.stopFetchInterval()\n      }\n      this.totalSeconds += second\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  public fetch(): Promise<IAttentionItem> {\n    const contactId = readCookie(`contact_id`) ?? ''\n    return postRequester<IAttentionItem>(this.ctx.config.baseApi + '/attention', {\n      page_url: decodeURI(getPageURL()),\n      _contact_id: contactId,\n    })\n  }\n\n  private _show = () => {\n    if (this.attention.options.type === AttentionType.POPUP) {\n      this.shadowHost = window.document.createElement('div')\n      this.shadowHost.id = `pam_attention`\n\n      const body = window.document.querySelector('body')!\n      body.insertBefore(this.shadowHost, body.childNodes[0] || null)\n\n      this.shadow = this.shadowHost.attachShadow({ mode: 'open' })\n\n      const style = window.document.createElement('style')\n      let css = this.attention.css\n      if (this.attention.custom_css) {\n        css += this.attention.custom_css.replace('\\n', '')\n      }\n      style.innerHTML = css\n      this.shadow.appendChild(style)\n\n      this.content = new Popup(this.ctx, this.shadow, this.shadowHost, this.attention, () => this.close())\n\n      if (this.attention.js) {\n        const script = window.document.createElement('script')\n        const inlineScript = window.document.createTextNode(this.attention.js)\n        script.appendChild(inlineScript)\n        body.appendChild(script)\n      }\n\n      window.dispatchEvent(\n        new Event('pam-wa:open', {\n          bubbles: true,\n          composed: true,\n        })\n      )\n    } else if (this.attention.options.type === AttentionType.REPLACE || AttentionType.PREPEND || AttentionType.APPEND) {\n      this.content = new Injection(this.ctx, this.attention)\n    } else {\n      return\n    }\n\n    if (!this.isRendered) {\n      this.isRendered = true\n    }\n  }\n}\n","import { IFacebookEvent, IFacebookEventResponse } from './types'\nimport { getRequester } from '../util'\nimport { IContext } from '../pam4-tracker'\n\nexport default class FacebookAds {\n  public hasAlreadyInitialzed = false\n\n  constructor(private ctx: IContext) {}\n\n  public async init(): Promise<void> {\n    if (this.hasAlreadyInitialzed) {\n      throw new Error('facebook ads instance has already initialized')\n    }\n    try {\n      const { events } = await this.fetchEvents()\n      this.installScript()\n      this.initAndTrackFacebookEvent(events)\n      this.hasAlreadyInitialzed = true\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  private fetchEvents(): Promise<IFacebookEventResponse> {\n    return getRequester<IFacebookEventResponse>(`${this.ctx.config.baseApi}/audiences/events`)\n  }\n\n  private installScript(): void {\n    const heads = window.document.getElementsByTagName('head')\n    if (!heads.length) {\n      throw new Error('no head element')\n    }\n\n    const script = window.document.createElement('script')\n    script.innerText = `!function(f,b,e,v,n,t,s)\n        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n        n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n        n.queue=[];t=b.createElement(e);t.async=!0;\n        t.src=v;s=b.getElementsByTagName(e)[0];\n        s.parentNode.insertBefore(t,s)}(window, document,'script',\n        'https://connect.facebook.net/en_US/fbevents.js');`\n\n    heads[0].appendChild(script)\n  }\n\n  private initAndTrackFacebookEvent(events: IFacebookEvent[]): void {\n    const uniquePixelIds = Array.from(new Set(events.map((e) => e.pixel_id)))\n    uniquePixelIds.forEach((id) => {\n      ;(window as any).fbq('init', id)\n    })\n    events.forEach((e) => {\n      ;(window as any).fbq('trackSingleCustom', e.pixel_id, 'Other', {\n        name: 'PamSegment',\n        value: e.segment,\n      })\n    })\n  }\n}\n","import { ITrackerResponse } from './Service/types'\n\nexport class PamEvent {}\n\nexport class PromisePamEvent extends PamEvent {\n  constructor(\n    public name: string,\n    public formFields: Record<string, unknown>,\n    public resolve: (res: ITrackerResponse) => void,\n    public reject: (reason?: any) => void,\n    public tags?: string[],\n    public specificDatabase: string = 'AUTO'\n  ) {\n    super()\n  }\n}\n\nexport class PromisePamBulkEvent extends PamEvent {\n  constructor(\n    public data: Record<string, any>,\n    public resolve: (res: ITrackerResponse[]) => void,\n    public reject: (reason?: any) => void\n  ) {\n    super()\n  }\n}\n","import Queue from '../datastructure/Queue'\nimport { IContext } from '../pam4-tracker'\nimport { PamEvent, PromisePamBulkEvent, PromisePamEvent } from '../PamEvent'\nimport { getRequester, writeCookie } from '../util'\nimport { ITrackerResponse, ICustomerConsentDetail, IConsentMessage } from './types'\nimport { getCurrentDBType, saveContactID } from '../util'\nimport { Task, TaskType } from '../datastructure/Queue'\n\nexport default class Service {\n  constructor(private ctx: IContext, private eventQueue: Queue<Task>) {}\n\n  public async sendBulkEvent(data: Record<string, any>): Promise<ITrackerResponse[]> {\n    let globalResolve!: (res: ITrackerResponse[]) => void\n    let globalReject!: (reason: any) => void\n\n    const promise = new Promise<ITrackerResponse[]>((resolve, reject) => {\n      globalResolve = resolve\n      globalReject = reject\n    })\n\n    const event = new PromisePamBulkEvent(data, globalResolve, globalReject)\n\n    const task = new Task(TaskType.TrackerBulk, event)\n\n    this.eventQueue.enqueue(task)\n\n    try {\n      const data = await promise\n      writeCookie('contact_id', data[0].contact_id, 365 * 5)\n      saveContactID(data[0].contact_id, getCurrentDBType())\n\n      return data\n    } catch (e) {\n      return e as any\n    }\n  }\n\n  public async sendEvent(\n    eventName: string,\n    tags = '',\n    formFields = {},\n    specificDatabase = 'AUTO'\n  ): Promise<ITrackerResponse> {\n    let globalResolve!: (res: ITrackerResponse) => void\n    let globalReject!: (reason: any) => void\n\n    const promise = new Promise<ITrackerResponse>((resolve, reject) => {\n      globalResolve = resolve\n      globalReject = reject\n    })\n\n    const event = new PromisePamEvent(\n      eventName,\n      formFields,\n      globalResolve,\n      globalReject,\n      tags.split(','),\n      specificDatabase\n    )\n\n    const task = new Task(TaskType.TrackerSingle, event)\n\n    this.eventQueue.enqueue(task)\n\n    try {\n      const data = await promise\n      writeCookie('contact_id', data.contact_id, 365 * 5)\n      saveContactID(data.contact_id, getCurrentDBType())\n\n      return data\n    } catch (e) {\n      return e as any\n    }\n  }\n\n  public fetchConsentMessage(consentMessageId = this.ctx.config.trackingConsentMessageId): Promise<IConsentMessage> {\n    const url = `${this.ctx.config.baseApi}/consent-message/${consentMessageId}`\n    return getRequester(url)\n  }\n\n  public getCustomerConsentDetail(contactId: string, consentMsgId: string): Promise<ICustomerConsentDetail> {\n    return getRequester(`${this.ctx.config.baseApi}/contacts/${contactId}/consents/${consentMsgId}`)\n  }\n}\n","import Tracker, { ITrackerResponse } from './Tracker'\nimport Pusher, { ERROR, NotificationPermission } from './Pusher'\nimport ConsentManager from './ConsentManager'\nimport Attention from './Attention'\nimport { isPushApiSupported, DBType } from './util'\nimport FacebookAds from './FacebookAds'\nimport Service from './Service'\nimport Queue from './datastructure/Queue'\nimport { Task } from './datastructure/Queue'\nimport PamChromeExtension from './Extension/PamChromeExtension'\n\n// Only for new-CMS\nimport NotificationPopup from './ConsentManager/NotificationPopup'\nexport { NotificationPopup }\n\nexport interface IConfig {\n  // deprecated\n  trackerApi?: string\n\n  autoTracking: boolean\n  webPushPublicKey: string\n  baseApi: string\n  pusherAlias: string\n  enableFacebookTracking?: boolean\n  disableWebAttention?: boolean\n  prefixPathWorkerScript?: string\n  trackingConsentMessageId: string\n  contactingConsentMessageIds?: string[]\n  publicDBAlias: string\n  loginDBAlias: string\n  loginKey: string\n  enableSkipConsent?: boolean\n  disableInstantPopupUI?: boolean\n  consentRenewalPeriodDays?: number\n}\n\nexport interface IContext {\n  config: IConfig\n}\n\nexport default class Pam4Tracker {\n  private readonly ctx!: IContext\n  public consentManager!: ConsentManager\n  public tracker!: Tracker\n  public attention!: Attention\n  public pusher: Pusher | null = null\n  public facebookAds!: FacebookAds\n  public service!: Service\n  private eventQueue!: Queue<Task>\n\n  constructor(config: IConfig) {\n    if (!config.baseApi && config.trackerApi) {\n      config.baseApi = config.trackerApi.replace('/trackers/events', '')\n    }\n\n    if (typeof config.enableFacebookTracking === 'undefined') {\n      config.enableFacebookTracking = false\n    }\n    if (typeof config.disableWebAttention === 'undefined') {\n      config.disableWebAttention = false\n    }\n    if (typeof config.disableInstantPopupUI === 'undefined') {\n      config.disableInstantPopupUI = false\n    }\n    if (typeof config.enableSkipConsent === 'undefined') {\n      config.enableSkipConsent = false\n    }\n\n    if (!config.publicDBAlias) {\n      config.publicDBAlias = 'default'\n      console.warn('publicDBAlias is not defined, use default')\n    }\n    if (!config.loginDBAlias) {\n      config.loginDBAlias = 'default'\n      console.warn('logigDBAlias is not defined, use default')\n    }\n\n    config.prefixPathWorkerScript = config.prefixPathWorkerScript || ''\n\n    this.ctx = {\n      config,\n    }\n\n    this.eventQueue = new Queue()\n\n    this.service = new Service(this.ctx, this.eventQueue)\n\n    this.consentManager = new ConsentManager(this.ctx, this.service)\n\n    if (!config.disableWebAttention) {\n      this.attention = new Attention(this.ctx)\n    }\n\n    if (!config.enableSkipConsent) {\n      this.consentManager.start()\n    }\n\n    this.tracker = new Tracker(this.ctx, this.service, this.attention, this.consentManager, this.eventQueue)\n\n    if (config.enableFacebookTracking) {\n      window.addEventListener(\n        'send_tracking',\n        () => {\n          this.facebookAds = new FacebookAds(this.ctx)\n          this.facebookAds.init()\n        },\n        { once: true }\n      )\n    }\n\n    if (isPushApiSupported() && config.webPushPublicKey) {\n      this.initPusher()\n    }\n\n    PamChromeExtension.init()\n\n    PamChromeExtension.log('Pam Start', this.getContactID(), {\n      ...config,\n    })\n\n    setTimeout(() => {\n      window.dispatchEvent(new Event('pam-ready'))\n    }, 100)\n  }\n\n  public async trackToPublicDatabase(\n    eventName: string,\n    formFields: Record<string, unknown>,\n    tags: string[] = []\n  ): Promise<ITrackerResponse | { error: string }> {\n    try {\n      return await this.tracker.send(eventName, tags.join(','), formFields, DBType.PUBLIC)\n    } catch (e) {\n      return { error: String(e) }\n    }\n  }\n\n  public async track(\n    eventName: string,\n    formFields: Record<string, unknown>,\n    tags: string[] = []\n  ): Promise<ITrackerResponse | { error: string }> {\n    try {\n      return await this.tracker.send(eventName, tags.join(','), formFields)\n    } catch (e) {\n      return { error: String(e) }\n    }\n  }\n\n  public async send(\n    eventName: string,\n    tags: string,\n    formFields: Record<string, unknown>\n  ): Promise<ITrackerResponse | { error: string }> {\n    try {\n      return await this.tracker.send(eventName, tags, formFields)\n    } catch (e) {\n      return { error: String(e) }\n    }\n  }\n\n  public getContactID(): string {\n    return this.tracker.getContactID()\n  }\n\n  private initPusher(): void {\n    this.pusher = new Pusher()\n    this.pusher\n      .init(this.ctx)\n      .then((cfg) => {\n        if (cfg.autoSubscribe) {\n          this.pusher?.subscribe()\n        } else if (cfg.enableWebPushPopup && this.pusher?.permission === NotificationPermission.DEFAULT) {\n          this.pusher?.render(cfg)\n        }\n      })\n      .catch((err) => {\n        if (err !== ERROR.USER_IS_SUBSCRIBED) {\n          window.console.error(err)\n        }\n      })\n  }\n}\n"],"names":["DBType","urlB64ToUint8Array","base64String","padding","repeat","length","base64","replace","rawData","window","atob","outputArray","Uint8Array","i","charCodeAt","windowOrigin","location","protocol","hostname","port","postRequester","url","data","fetch","method","body","JSON","stringify","headers","credentials","then","response","ok","json","Error","status","statusText","getRequester","Promise","resolve","reject","xhr","XMLHttpRequest","open","objectToQueryString","addEventListener","parse","setRequestHeader","withCredentials","send","err","readCookie","name","c","nameEQ","ca","document","cookie","split","charAt","substring","indexOf","writeCookie","key","value","days","date","Date","setTime","toUTCString","toggleClass","element","className","classString","nameIndex","substr","getPageURL","href","getFormatData","event","formFields","tags","pageLanguage","navigator","language","pageReferrer","referrer","pageTitle","title","platform","userAgent","resolution","screen","availWidth","availHeight","page_language","page_referrer","page_title","page_url","decodeURI","dstags","form_fields","serializeJSON","form","obj","elements","querySelectorAll","forEach","getScrollPercent","h","documentElement","b","st","sh","clientHeight","Object","keys","reduce","a","k","push","encodeURIComponent","join","getContactId","localStorage","getItem","getPublicContactId","getLoginContactId","isPushApiSupported","saveContactID","contact_id","database","setItem","LOGIN","TaskType","getCurrentDBType","dbType","PUBLIC","parseBool","val","sleep","mSec","setTimeout","consentManager","gaIds","consentMessage","setting","analytics_cookies","tracking_collection","GoogleAnalytics","heads","getElementsByTagName","script1","createElement","async","src","script2","innerText","map","id","appendChild","customerConsentDetail","tracking_permission","_c","_i","gtag","pixelIds","social_media_cookies","FacebookPixel","script","_a","fbq","track","PamChromeExtension","foundExtension","postMessage","origin","logHistory","l","sendLog","contactId","history","queue","Queue","t","shift","State","pubclitype","ctx","service","attention","eventQueue","e","isTrackingConsentRefreshing","isFetching","isTrackingAllowed","config","enableSkipConsent","_setLocalCookie","_readingIframeCookie","autoTracking","sentAutoTracking","sendEvent","_this","startFetchInterval","catch","console","error","googleAnalytics","iframeOrigin","baseApi","iframeSrcURL","_initIFrame","_onMessage","startEventQueueManager","setupThirdPartyTracker","Tracker","contactID","eventName","specificDatabase","isTrackingEvent","isAllowConsentFormField","Log","log","_consent_message_id","trackingConsentMessageId","_version","version","_database","loginDBAlias","publicDBAlias","queryObject","getObjectFromQuery","hasLoggedIn","loginIdKey","loginId","_contact_id","_fbp","_fbc","formData","trackingEvent","detail","_setXDomainCookie","mustRefreshConsentEvent","refreshTrackingConsentStatus","dispatchEvent","CustomEvent","e_1","results","e_2","getElementById","iframe","style","display","Array","msg_type","cookies","name_1","el","contentWindow","query","search","objectQuery","slice","kv","tmp","object","includes","keyType","consumeEventQueue","isEmpty","task","dequeue","TrackerSingle","event_1","res","e_3","TrackerBulk","event_2","sendBulk","e_4","installScript","facebookPixel","PUSHER_POPUP_OPEN_CLASS","PUSHER_STATE_KEY","ERROR","USER_IS_SUBSCRIBED","SUBSCRIBED_FAIL","NOT_SUPPORTED","SERVICE_WORKER_ERROR","SUBSCRIPTION_SERVER_ERROR","SUBSCRIPTION_ERROR","POPUP_CONFIG","TITLE","MESSAGE","BUTTON_TEXT","NAVIGATION_TEXT","PRIMARY","SECONDARY","ANIMATE_TYPE_BTN","EVENT","SHOW","HIDE","SUBSCRIBE","popupTemplate","message","buttonText","button_text","navigationText","navigation_text","primary","secondary","primaryFont","primary_font","secondaryFont","secondary_font","animateTypeBtn","animate_type_btn","isRendered","ShadowDOM","shadowHost","querySelector","insertBefore","childNodes","shadowRoot","attachShadow","mode","elementId","elm","contentDocument","html","section","innerHTML","dom","remove","bubbles","onSubscribe","onShow","onHide","_render","PusherPopup","_createElement","registerEventListeners","addEventDispatchers","onclick","bubblesEvent","NotificationPermission","SizeType","_super","__extends","PusherNavigation","render","context","definition","module","exports","this","normalize","strArray","resultArray","TypeError","match","first","component","str","parts","input","arguments","call","permission","Notification","Pusher","_registerServiceWorker","_fetchConfig","enableWebPushNavigation","pusherNavigation","err_1","close","DEFAULT","showNavigation","requestPermission","hideNavigation","applicationServerKey","webPushPublicKey","swRegistration","pushManager","subscribe","userVisibleOnly","subscription","_updateSubscriptionOnServer","pusherAlias","getSubscription","content","show","hide","isShown","classList","add","setState","PUSHER_STATE_SHOW","PUSHER_STATE_HIDE","state","getState","serviceWorker","register","urlJoin","prefixPathWorkerScript","swReg","_notify","isSubscribed","alias","toJSON","consentDetail","submitConsentPermission","immediatelySubmit","callback","previewMode","disableToggleOptions","terms_and_conditions","label","isAlwaysAccepted","privacy_overview","necessary_cookies","preferences_cookies","marketing_cookies","email","sms","line","facebook_messenger","push_notification","consent_message_type","trackingConsentDetailType","contactingTypeDetailOptions","default_language","toLowerCase","consent_message_id","style_configuration","bar_background_color","bar_background_opacity_percentage","bar_text_color","button_background_color","consent_detail","primary_color","button_text_color","secondary_color","text_color","popup_main_icon","toUpperCase","isOnlyPopup","languageButton","generateConsentTextForMobile","displayConsentBar","generateConsentText","generateConsentDetailTypeTab","generateFullVersionButton","generateFullVersionButtonForMobile","generateAgreeToggleByType","generateAgreeToggleByTypeForMobile","changeLanguage","activeLanguage","changeTab","updateConsentAcceptationValue","setButtonEvent","closeModal","fullVersionBtnContainer","fullVersionSpanTag","getElementsByClassName","showFullDescriptionToggle","backBtnContainer","backBtn","overlay","closeBtn","notiCloseBtnn","closeNotiBar","briefDescBtnContainer","saveSettingBtn","submitConsent","acceptAllBtn","acceptAllConsent","notiBtnContainer","notiAcceptBtnn","idx","isOnMobile","consentMessageTopicContainer","consentMessageBox","toggle","available_languages","langBtnGroupContainer","modalLangBtnGroupContainer","langSelect_1","options","selectedIndex","lang","option","text","onchange","langSelectModal_1","_b","langSelectModal_2","_e","_d","langBtnContainer","divider","_g","_f","modalLangBtnContainer","_j","_h","mobileAllConsentMessagesContainer","item","is_enabled","index_1","consentMessageByTypeContainer","consentDetailTypeTabContainer","expandConsentBox","activeIconContainer","checkIcon","createElementNS","setAttributeNS","path","setAttribute","consentDetailTypeTitle","consentDetailType","downArrowIconContainer","downArrowIcon","mobileConsentContentContainer","typeTopicContainner","typeTopic","consentDescriptionContainer","consentDescriptionBody","brief_description","modalFooterContainer","fullVersionBtnConntainer","acceptToggleConntainer","isOnlyPopupDisplayed","consentBarContainer","consentText","acceptBtnContainer","acceptBtn","consentDetailTitleContainer","display_text","accept_button_text","consentDetailTitle","consent_detail_title","moreInfoBtn","more_info","moreInfoLink","is_custom_url_enabled","custom_url","target","openModal","checkboxContainer","this_1","index_2","typeTabContainer","typeName","selectedConsentDetailTypeIdx","is_full_description_enabled","mobileFullVersionBtnContainer","index_3","checkbox","type","checked","acceptToggle","slider","checkBoxLabel","mobilecheckboxContainer","index_4","modelContent","firstChild","removeChild","contentContainer","contentParagraph","modelFullContent","full_description","langBtn","modalLangBtn","presentLang","trim","generateConsentDetailByType","generateMobileConsentBriefDescriptionByLang","generateConsentFullDetailByType","tabs","consentDetailTypeTag","contents","fullContents","contentTopic","fullContentTopic","acceptSwitch","typeSequence","briefDescriptionContainer","fullDescriptionContainer","briefDescriptionBtnContainer","fullDescriptionBtnContainer","mobileConsentMessageContainer","webConsentMessageContainer","consentDetailTypeActiveIcon","mobileConsentDetailTypeActiveIcon","contains","callbackTriggering","submitNow","func","index","permissionBody","topic","assign","updatedConsentAcceptation","prev","toISOString","keyPath","lastKeyIndex","NotificationPopup","template","setDOM","init","renderOnElement","immediatelyPopup","termsAndConditions","nameStr","allow","privacyOverview","necessaryCookies","preferencesCookies","analyticsCookies","marketingCookies","socialMediaCookies","facebookMessenger","pushNotification","consentMessageID","tempPerm","permObj","submittedPerm","consentAcceptation","consentPerms","entries","consents","events","i_1","formField","p","payload","_use_first_contact_id_for_all_events","sendBulkEvent","result","resultMap","cnt","fetchConsentMessage","popup","notificationPopups","renderOnlyPopup","consentMessageIDs","consentMessages","PermissionManagement","_hasLoggedIn","HAS_LOGGEDIN_KEY","loginKey","LOGIN_ID_KEY","_isFetching","_isTrackingConsentRefreshing","NUMBER_OF_HOUR_TO_GET_CONSENT_API","consentRenewalPeriodDays","ConsentManager","disableInstantPopupUI","getShowConsentPopup","setIsShowConsentPopup","setInterval","NUMBER_OF_MINUTES_TO_CHECK_POPUP_PERMISSION","ignoreTimestamp","isShowPopup","isLastPopupMoreThanHours","popupStack","need_consent_review","submitConsentAndRefreshStatus","contactingConsentMessageIds","consentMsgId","getCustomerConsentDetail","createPopup","pop","hours","latestGetCustomerConsent","getTime","e_6","code","clear","e_7","publicContactId","e_8","consentMessageId","NewSizeType","DisplayTimeType","AttentionType","SIZE","SM","MD","LG","FULL","POPUP_OPEN_CLASS","width","backdropOpacity","isBorderless","shadow","attentionItem","onClose","Popup","globalStyle","isAllowBackdropClick","allow_backdrop_click","popupBackdrop","popupCloseBtn","_getPopupSize","size","backdrop_opacity","is_borderless","CUSTOM","Injection","container_id","container","REPLACE","PREPEND","APPEND","inlineScript","createTextNode","js","css","custom_css","percent","display_after","_show","POPUP","Event","composed","_fetchAndCount","bind","Attention","Math","max","PAGE_SCROLLING","_onScroll","msCalc","TIME_SPEND","sec","second","remainSec","totalSeconds","button","getAttribute","_campaign","_createEvent","err_2","removeEventListener","firstFetchIntervalPeriod","intervalInstance","fetchIntervalPeriod","clearInterval","stopFetchInterval","FacebookAds","hasAlreadyInitialzed","fetchEvents","initAndTrackFacebookEvent","uniquePixelIds","from","Set","pixel_id","segment","PamEvent","Service","promise","globalResolve","globalReject","PromisePamBulkEvent","Task","enqueue","data_1","PromisePamEvent","trackerApi","enableFacebookTracking","disableWebAttention","warn","start","tracker","facebookAds","once","initPusher","getContactID","Pam4Tracker","pusher","cfg","autoSubscribe","enableWebPushPopup"],"mappings":"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"}