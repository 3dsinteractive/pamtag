(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.pam4Tracker={})})(this,function(e){'use strict';function t(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function n(e,t,n,o){return new(n||(n=Promise))(function(i,a){function s(e){try{l(o.next(e))}catch(t){a(t)}}function r(e){try{l(o["throw"](e))}catch(t){a(t)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,r)}l((o=o.apply(e,t||[])).next())})}function o(e,n){function o(e){return function(t){return i([e,t])}}function i(t){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,s&&(r=2&t[0]?s["return"]:t[0]?s["throw"]||((r=s["return"])&&r.call(s),0):s.next)&&!(r=r.call(s,t[1])).done)return r;switch((s=0,r)&&(t=[2&t[0],r.value]),t[0]){case 0:case 1:r=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,s=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if((r=c.trys,!(r=0<r.length&&r[r.length-1]))&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3])){c.label=t[1];break}if(6===t[0]&&c.label<r[1]){c.label=r[1],r=t;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(t);break}r[2]&&c.ops.pop(),c.trys.pop();continue;}t=n.call(e,c)}catch(n){t=[6,n],s=0}finally{a=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a,s,r,l,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l}var a,s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},s(e,t)},r=function(){return r=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var n in t=arguments[o],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)},l=function(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),o=window.atob(n),a=new Uint8Array(o.length),s=0;s<o.length;++s)a[s]=o.charCodeAt(s);return a},c=function(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},d=function(e,t){return fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json; charset=UTF-8"},credentials:"include"}).then(function(e){if(e.ok)return e.json();throw new Error("Network response was not ok: "+e.status+" "+e.statusText)})},p=function(e,t){return void 0===t&&(t={}),new Promise(function(n,o){var i=new XMLHttpRequest;i.open("GET",e+x(t)),i.addEventListener("load",function(){var e=i.response,t=i.status;200<=t&&400>t?n(JSON.parse(e)):o(JSON.parse(e))}),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.withCredentials=!0;try{i.send()}catch(e){o(e)}})},g=function(e){for(var t,n=e+"=",o=document.cookie.split(";"),a=0;a<o.length;a++){for(t=o[a];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(n))return t.substring(n.length,t.length)}return null},m=function(e,t,n){void 0===n&&(n=1825);var o=new Date;o.setTime(+o+864e5*n),window.document.cookie=e+"="+t+";expires="+o.toUTCString()+";SameSite=None;Secure;path=/"},u=function(e,t){if(e&&t){var n=e.className,o=n.indexOf(t);-1===o?n+=" "+t:n=n.substr(0,o)+n.substr(o+t.length),e.className=n}},b=function(){return window.document.location&&window.document.location.href},h=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n="");var o=window.navigator.language,i=window.document.referrer,a=window.document.title,s=window.navigator.userAgent,r=window.screen.availWidth+"x"+window.screen.availHeight;return{event:e,page_language:o,page_referrer:i,page_title:a,page_url:decodeURI(b()),platform:s,resolution:r,dstags:n,form_fields:t}},f=function(e){var t={},n=e.querySelectorAll("input, select, textarea");return n.forEach(function(e){var n=e.name,o=e.value;n&&(t[n]=o)}),t},y=function(){var e=document.documentElement,t=document.body,n="scrollTop",o="scrollHeight";return e&&t?100*((e[n]||t[n])/((e[o]||t[o])-e.clientHeight)):0},x=function(e){return"?"+Object.keys(e).reduce(function(t,n){return t.push(n+"="+encodeURIComponent(e[n])),t},[]).join("&")},_=function(){return window.localStorage.getItem("contact_id")},v=function(){return window.localStorage.getItem("public_contact_id")},w=function(){return window.localStorage.getItem("login_contact_id")},k=function(){return"PushManager"in window},C=function(e,t){window.localStorage.setItem("contact_id",e),t===a.LOGIN?window.localStorage.setItem("login_contact_id",e):window.localStorage.setItem("public_contact_id",e)};(function(e){e.LOGIN="LOGIN",e.PUBLIC="PUBLIC"})(a||(a={}));var S,E=function(){var e=window.localStorage.getItem("db_type")||a.PUBLIC;return e},L=function(e){return"true"===e},T=function(e){return n(void 0,void 0,void 0,function(){return o(this,function(){return[2,new Promise(function(t){return setTimeout(function(){return t()},e)})]})})},D=function(){function e(e){var t,n,o,i;this.consentManager=e,this.gaIds=null!==(i=null===(o=null===(n=null===(t=this.consentManager.consentMessage)||void 0===t?void 0:t.setting)||void 0===n?void 0:n.analytics_cookies)||void 0===o?void 0:o.tracking_collection.google_tag_id)&&void 0!==i?i:[]}return e.prototype.installScript=function(){if(this.gaIds.length){var e=window.document.getElementsByTagName("head");if(!e.length)throw new Error("no head element");var t=window.document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+this.gaIds[0];var n=window.document.createElement("script");n.innerText="window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); "+this.gaIds.map(function(e){return"gtag('config', '"+e+"'); "}),e[0].appendChild(t),e[0].appendChild(n)}},e.prototype.track=function(){var e,t;if(this.gaIds.length&&(null===(t=null===(e=this.consentManager.customerConsentDetail)||void 0===e?void 0:e.tracking_permission)||void 0===t?void 0:t.analytics_cookies))for(var n,o=0,i=this.gaIds;o<i.length;o++)n=i[o],gtag("config",n)},e}(),I=function(){function e(e){var t,n,o,i;this.consentManager=e,this.pixelIds=null!==(i=null===(o=null===(n=null===(t=this.consentManager.consentMessage)||void 0===t?void 0:t.setting)||void 0===n?void 0:n.social_media_cookies)||void 0===o?void 0:o.tracking_collection.facebook_pixel_id)&&void 0!==i?i:[]}return e.prototype.installScript=function(){if(this.pixelIds){var e=window.document.getElementsByTagName("head");if(!e.length)throw new Error("no head element");var t=window.document.createElement("script");t.innerText="!function(f,b,e,v,n,t,s) {if(f.fbq)return;n=f.fbq=function(){n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments)}; if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0'; n.queue=[];t=b.createElement(e);t.async=!0; t.src=v;s=b.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t,s)}(window, document,'script', 'https://connect.facebook.net/en_US/fbevents.js');",e[0].appendChild(t);for(var n,o=0,i=this.pixelIds;o<i.length;o++)n=i[o],fbq("init",n);this.track()}},e.prototype.track=function(){var e,t;if(this.pixelIds&&(null===(t=null===(e=this.consentManager.customerConsentDetail)||void 0===e?void 0:e.tracking_permission)||void 0===t?void 0:t.social_media_cookies))for(var n,o=0,i=this.pixelIds;o<i.length;o++)n=i[o],fbq("trackSingle",n,"PageView")},e}(),A=function(){function e(){}return e.init=function(){window.addEventListener("message",function(t){e.foundExtension||"pam-extension-hello"!==t.data.method||(e.foundExtension=!0,window.postMessage({method:"pam-client-hello"},window.location.origin),e.logHistory.forEach(function(t){e.sendLog(t.name,t.contactId,t.data)})),"pam-extension-full-history"===t.data.method&&window.postMessage({method:"pam-client-full-history",history:e.logHistory},window.location.origin)})},e.sendLog=function(e,t,n){window.postMessage({method:"pam-client-log",contactId:t,name:e,data:n},window.location.origin)},e.log=function(t,n,o){e.logHistory.push({name:t,contactId:n,data:o}),e.foundExtension&&e.sendLog(t,n,o)},e.foundExtension=!1,e.logHistory=[],e}(),M=function(){function e(){this.queue=[]}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0>=this.queue.length},enumerable:!0,configurable:!0}),e.prototype.enqueue=function(e){this.queue.push(e)},e.prototype.dequeue=function(){return this.queue.shift()},e}();(function(e){e[e.TrackerSingle=0]="TrackerSingle",e[e.TrackerBulk=1]="TrackerBulk"})(S||(S={}));var R,P=function(){return function(e,t){this.pubclitype=e,this.data=t}}(),O=function(){function e(e,t,i,a,s){var r=this;this.ctx=e,this.service=t,this.attention=i,this.consentManager=a,this.eventQueue=s,this.contactID="",this.sentAutoTracking=!1,this.tags="",this.formFields={},this._onMessage=function(t){return n(r,void 0,void 0,function(){var e=this;return o(this,function(n){switch(n.label){case 0:return this.consentManager.isTrackingConsentRefreshing||this.consentManager.isFetching?[4,T(200)]:[3,2];case 1:return n.sent(),[3,0];case 2:return this.consentManager.isTrackingAllowed||this.ctx.config.enableSkipConsent?(this._setLocalCookie(this._readingIframeCookie(t)),this.ctx.config.autoTracking&&!this.sentAutoTracking&&(this.service.sendEvent("page_view",this.tags,this.formFields).then(function(){e.attention&&e.attention.startFetchInterval()}).catch(console.error),this.googleAnalytics&&this.googleAnalytics.track(),this.sentAutoTracking=!0),[2]):[2];}})})},this.iframeOrigin=this.ctx.config.baseApi+"/script",this.iframeSrcURL=this.iframeOrigin+"/xdomain_cookie.html#{\"window_origin\":\""+c()+"\",\"iframe_origin\":\""+this.iframeOrigin+"\"}",this._initIFrame(),window.addEventListener("message",this._onMessage),this.startEventQueueManager(),this.setupThirdPartyTracker()}return e.prototype.getContactID=function(){return this.contactID},e.prototype.send=function(e,t,i,s){return void 0===s&&(s="AUTO"),n(this,void 0,void 0,function(){var n,l,c,p,u,b;return o(this,function(o){switch(o.label){case 0:return this.consentManager.isFetching?[4,T(200)]:[3,2];case 1:return o.sent(),[3,0];case 2:if(this.isTrackingEvent(e)&&!this.isAllowConsentFormField(i)&&!this.ctx.config.enableSkipConsent){if(!this.consentManager.isTrackingAllowed)throw A.log("Tracking is not Allow","",r({},h(e,i,t))),new Error("tracking is not allowed");i._consent_message_id=this.ctx.config.trackingConsentMessageId,i._version=this.consentManager.consentMessage.setting.version}i._database||(s===a.LOGIN?i._database=this.ctx.config.loginDBAlias:s===a.PUBLIC?i._database=this.ctx.config.loginDBAlias:i._database=E()===a.LOGIN?this.ctx.config.loginDBAlias:this.ctx.config.publicDBAlias),n=this.getObjectFromQuery(),l="",(null===n||void 0===n?void 0:n.contact_id)?l=null===n||void 0===n?void 0:n.contact_id:"AUTO"===s?l=_():s===a.LOGIN?l=w():s===a.PUBLIC&&(l=v()),this.consentManager.hasLoggedIn&&this.consentManager.loginIdKey&&this.consentManager.loginId?i[this.consentManager.loginIdKey]=this.consentManager.loginId:l?i._contact_id=l:g("contact_id")&&(i._contact_id=g("contact_id")),g("_fbp")&&(i._fbp=g("_fbp")),g("_fbc")&&(i._fbc=g("_fbc")),c=r({},h(e,i,t)),o.label=3;case 3:return o.trys.push([3,7,,8]),[4,d(this.ctx.config.baseApi+"/trackers/events",c)];case 4:return p=o.sent(),this.contactID=p.contact_id,u={detail:{contact_id:p.contact_id,event:c}},m("contact_id",p.contact_id,1825),C(p.contact_id,E()),this._setXDomainCookie(p),p.contact_id&&(this.mustRefreshConsentEvent(e)||this.isAllowConsentFormField(i))?[4,this.consentManager.refreshTrackingConsentStatus()]:[3,6];case 5:o.sent(),o.label=6;case 6:return A.log("Send",p.contact_id,r({},c)),window.dispatchEvent(new CustomEvent("send_tracking",u)),[2,p];case 7:return b=o.sent(),[2,b];case 8:return[2];}})})},e.prototype.sendBulk=function(e){return n(this,void 0,void 0,function(){var t,n;return o(this,function(o){switch(o.label){case 0:return this.consentManager.isFetching?[4,T(200)]:[3,2];case 1:return o.sent(),[3,0];case 2:return o.trys.push([2,5,,6]),[4,d(this.ctx.config.baseApi+"/trackers/events",e)];case 3:return t=o.sent(),this.contactID=t.results[0].contact_id,m("contact_id",this.contactID,1825),C(this.contactID,E()),this._setXDomainCookie(t.results[0]),[4,this.consentManager.refreshTrackingConsentStatus()];case 4:return o.sent(),window.dispatchEvent(new CustomEvent("send_tracking",e)),[2,t.results];case 5:return n=o.sent(),[2,n];case 6:return[2];}})})},e.prototype._initIFrame=function(){if(!document.getElementById("xdomain_cookie_iframe")){var e=window.document.createElement("iframe");e.style.display="none",e.src=this.iframeSrcURL,e.id="xdomain_cookie_iframe",window.document.body.appendChild(e)}},e.prototype._readingIframeCookie=function(t){if(t.origin===this.iframeOrigin&&"string"==typeof t.data){var n=null;try{n=JSON.parse(t.data)}catch(t){n=null}return"object"!=typeof n||n instanceof Array?void 0:"msg_type"in n&&"xdomain_cookie_read"===n.msg_type?n.cookies:void 0}},e.prototype._setLocalCookie=function(e){for(var t in e)"function"!=typeof e[t]&&m(t,e[t])},e.prototype._setXDomainCookie=function(e){var t=window.document.getElementById("xdomain_cookie_iframe");t&&t.contentWindow&&t.contentWindow.postMessage(JSON.stringify({cookies:e,msg_type:"xdomain_cookie_write"}),this.iframeOrigin)},e.prototype.getObjectFromQuery=function(){var e=window.location.search;if(""===e)return{};var t=e.slice(1).split("&").map(function(e){var t;return t={},t[e.split("=")[0]]=e.split("=")[1],t}),n={};return t.forEach(function(e){Object.keys(e).forEach(function(t){var o;n=r(r({},n),(o={},o[t]=e[t],o))})}),n},e.prototype.isTrackingEvent=function(e){return!["allow_consent","register","register_success","login","logout","save_push"].includes(e)},e.prototype.mustRefreshConsentEvent=function(e){return["allow_consent"].includes(e)},e.prototype.isAllowConsentFormField=function(e){for(var t in e)if("_allow_consent"==t){var n=typeof e[t];if("string"==n)return L(""+e[t]);if("boolean"==n)return e[t];break}return!1},e.prototype.startEventQueueManager=function(){this.consumeEventQueue()},e.prototype.consumeEventQueue=function(){var e,t;return n(this,void 0,void 0,function(){var n,i,a,s,r,a,l;return o(this,function(o){switch(o.label){case 0:if(!!this.eventQueue.isEmpty)return[3,10];if(n=this.eventQueue.dequeue(),(null===n||void 0===n?void 0:n.pubclitype)!==S.TrackerSingle)return[3,5];if(i=null===n||void 0===n?void 0:n.data,null==i)return[2,void 0];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.send(i.name,null!==(t=null===(e=i.tags)||void 0===e?void 0:e.join())&&void 0!==t?t:"",i.formFields,i.specificDatabase)];case 2:return a=o.sent(),i.resolve(a),[3,4];case 3:return s=o.sent(),i.reject(s),[3,4];case 4:return[3,9];case 5:if((null===n||void 0===n?void 0:n.pubclitype)!==S.TrackerBulk)return[3,9];if(r=null===n||void 0===n?void 0:n.data,null==r)return[2,void 0];o.label=6;case 6:return o.trys.push([6,8,,9]),[4,this.sendBulk(r.data)];case 7:return a=o.sent(),r.resolve(a),[3,9];case 8:return l=o.sent(),r.reject(l),[3,9];case 9:return[3,0];case 10:return[4,T(200)];case 11:return o.sent(),this.consumeEventQueue(),[2];}})})},e.prototype.setupThirdPartyTracker=function(){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return this.consentManager.isFetching?[4,T(200)]:[3,2];case 1:return e.sent(),[3,0];case 2:return this.googleAnalytics=new D(this.consentManager),this.googleAnalytics.installScript(),this.facebookPixel=new I(this.consentManager),this.facebookPixel.installScript(),[2];}})})},e}(),B="pam-pusher-popup-open",q="pusher_state_key",N={USER_IS_SUBSCRIBED:"User is subscribed",SUBSCRIBED_FAIL:"failed to subscribe the user",NOT_SUPPORTED:"Push messaging is not supported",SERVICE_WORKER_ERROR:"Service Worker Error",SUBSCRIPTION_SERVER_ERROR:"Cannot send subscription data to server",SUBSCRIPTION_ERROR:"Cannot subscribe"},H={TITLE:"Connect with us",MESSAGE:"We'd like to show you\n  notifications for the\n  latest news and updates",BUTTON_TEXT:"Subscribe",NAVIGATION_TEXT:"Click allow to subscribe",PRIMARY:"#3d3d3d",SECONDARY:"#ffffff",ANIMATE_TYPE_BTN:"vertical"},F={SHOW:"show",HIDE:"hide",SUBSCRIBE:"subscribe"},U=function(e){var t=e.title||H.TITLE,n=e.message||H.MESSAGE,o=e.button_text||H.BUTTON_TEXT,i=e.navigation_text||H.NAVIGATION_TEXT,a=e.primary||H.PRIMARY,s=e.secondary||H.SECONDARY,r=e.primary_font||a,l=e.secondary_font||s,c=e.animate_type_btn||H.ANIMATE_TYPE_BTN;return"\n    <div>\n      <link href=\"https://fonts.googleapis.com/css?family=Roboto&display=swap\" rel=\"stylesheet\">\n      <style>\n        * {\n          box-sizing: border-box !important;\n          font-family: 'Roboto', sans-serif;\n        }\n        body {\n          background: #000;\n        }\n        pre {\n          font-size: 16px;\n          margin: 0;\n          padding: 8px;\n          white-space: pre-wrap;\n        }\n        #noti-info-client.horizontal{\n          position: fixed;\n          right: 1%;\n          top: 2.6%;\n          z-index: 999999;\n          /*Absoluto*/\n          width: 330px; /* tamanho da notifica\xE7\xE3o */\n          color: #5E7181;\n          font-size: 12px;\n        }\n        #noti-info-client.vertical{\n          position: fixed;\n          right: 5%;\n          top: 2.6%;\n          z-index: 999999;\n          /*Absoluto*/\n          width: 330px; /* tamanho da notifica\xE7\xE3o */\n          color: #5E7181;\n          font-size: 12px;\n        }\n        #noti-info-client #panel{\n          z-index: 99;\n          display: block;\n          position: fixed;\n          background-color: "+a+";\n          width: 50px;\n          height: 50px;\n          border-radius: 50%;\n          bottom: 20px;\n          right: 20px;\n          margin: 10px 10px;\n          cursor: pointer;\n          -webkit-box-shadow: 0px 2px 3px 0px rgba(0,0,0,.4);\n          -moz-box-shadow: 0px 2px 3px 0px rgba(0,0,0,.4);\n          -ms-box-shadow: 0px 2px 3px 0px rgba(0,0,0,.4);\n          box-shadow: 0px 2px 3px 0px rgba(0,0,0,.4);\n        }\n        #noti-info-client #panel .icon {\n          display: inline-block;\n          width: 20px;\n          height: 20px;\n          stroke-width: 0;\n          stroke: currentColor;\n          fill: "+l+";\n          margin: auto;\n          position: absolute;\n          left: 0;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          transform-origin: 50% 0%;\n          -moz-transform-origin: 50% 0%;\n          -webkit-transform-origin: 50% 0%;\n          -ms-transform-origin: 50% 0%;\n        }\n        .bell-alert #panel::before{\n          /* Keyframe */\n          /* animation : sino-pulsa 1.2s infinite;\n          -webkit-animation : sino-pulsa 1.2s infinite;\n          -moz-animation : sino-pulsa 1.2s infinite;\n          -ms-animation : sino-pulsa 1.2s infinite; */\n        }\n        .bell-alert #panel{\n          /* background-color: \t"+a+" !important; */\n        }\n        .bell-alert .icon{\n          /* fill: #FBF9FC !important; */\n        }\n        .active-btn-to{\n          /*transform: translateX(-166px);*/\n          animation: 1s animate-btn-to-"+c+" ease-in-out !important;\n          -moz-animation: 1s animate-btn-to-"+c+" ease-in-out !important;\n          -webkit-animation: 1s animate-btn-to-"+c+" ease-in-out !important;\n          -ms-animation: 1s animate-btn-to-"+c+" ease-in-out !important;\n\n          animation-fill-mode: forwards !important;\n          -webkit-animation-fill-mode: forwards !important;\n          -moz-animation-fill-mode: forwards !important;\n          -ms-animation-fill-mode: forwards !important;\n        }\n\n        .active-btn-from{\n          animation: 1s animate-btn-from-"+c+" ease-in-out;\n          -webkit-animation: 1s animate-btn-from-"+c+" ease-in-out;\n          -moz-animation: 1s animate-btn-from-"+c+" ease-in-out;\n          -ms-animation: 1s animate-btn-from-"+c+" ease-in-out;\n\n          animation-fill-mode: forwards;\n          -webkit-animation-fill-mode: forwards;\n          -moz-animation-fill-mode: forwards;\n          -ms-animation-fill-mode: forwards;\n        }\n\n        @keyframes animate-btn-to-horizontal{\n          from, 10%{\n              right: 0;\n          }\n          20%,40%{\n              transform: rotate(-30deg);\n              -moz-transform: rotate(-30deg);\n              -webkit-transform: rotate(-30deg);\n              -ms-transform: rotate(-30deg);\n          }\n          60%{\n              transform: rotate(30deg);\n              -moz-transform: rotate(30deg);\n              -webkit-transform: rotate(30deg);\n              -ms-transform: rotate(30deg);\n          }\n          70%{\n              transform: rotate(0deg);\n              -moz-transform: rotate(0deg);\n              -webkit-transform: rotate(0deg);\n              -ms-transform: rotate(0deg);\n          }\n          80%{\n              transform: rotate(-20deg);\n              -moz-transform: rotate(-20deg);\n              -webkit-transform: rotate(-20deg);\n              -ms-transform: rotate(-20deg);\n          }\n          60%, to{\n              right: 147px;\n          }\n        }\n        @keyframes animate-btn-from-horizontal{\n          from, 10%{\n              right: 147px;\n          }\n          20%,40%{\n              transform: rotate(30deg);\n              -moz-transform: rotate(30deg);\n              -webkit-transform: rotate(30deg);\n              -ms-transform: rotate(30deg);\n          }\n          60%{\n              transform: rotate(-30deg);\n              -moz-transform: rotate(-30deg);\n              -webkit-transform: rotate(-30deg);\n              -ms-transform: rotate(-30deg);\n          }\n          70%{\n              transform: rotate(0deg);\n              -moz-transform: rotate(0deg);\n              -webkit-transform: rotate(0deg);\n              -ms-transform: rotate(0deg);\n          }\n          80%{\n              transform: rotate(20deg);\n              -moz-transform: rotate(20deg);\n              -webkit-transform: rotate(20deg);\n              -ms-transform: rotate(20deg);\n          }\n          60%, to{\n              right: 0;\n          }\n        }\n        @keyframes animate-into-desc-horizontal{\n          from, 50%{\n            opacity: 0;\n          }\n          70%, 100%{\n            opacity: 1;\n          }\n          30%{\n            transform: translateY(50px);\n          }\n        }\n        @keyframes animate-btn-to-vertical{\n          from, 10%{\n              bottom: 20px;\n          }\n          20%,40%{\n              transform: rotate(-30deg);\n              -moz-transform: rotate(-30deg);\n              -webkit-transform: rotate(-30deg);\n              -ms-transform: rotate(-30deg);\n          }\n          60%{\n              transform: rotate(30deg);\n              -moz-transform: rotate(30deg);\n              -webkit-transform: rotate(30deg);\n              -ms-transform: rotate(30deg);\n          }\n          70%{\n              transform: rotate(0deg);\n              -moz-transform: rotate(0deg);\n              -webkit-transform: rotate(0deg);\n              -ms-transform: rotate(0deg);\n          }\n          80%{\n              transform: rotate(-20deg);\n              -moz-transform: rotate(-20deg);\n              -webkit-transform: rotate(-20deg);\n              -ms-transform: rotate(-20deg);\n          }\n          60%, to{\n              bottom: 95px;\n          }\n        }\n        @keyframes animate-btn-from-vertical{\n          from, 10%{\n                bottom: 95px;\n            }\n            20%,40%{\n                transform: rotate(30deg);\n                -moz-transform: rotate(30deg);\n                -webkit-transform: rotate(30deg);\n                -ms-transform: rotate(30deg);\n            }\n            60%{\n                transform: rotate(-30deg);\n                -moz-transform: rotate(-30deg);\n                -webkit-transform: rotate(-30deg);\n                -ms-transform: rotate(-30deg);\n            }\n            70%{\n                transform: rotate(0deg);\n                -moz-transform: rotate(0deg);\n                -webkit-transform: rotate(0deg);\n                -ms-transform: rotate(0deg);\n            }\n            80%{\n                transform: rotate(20deg);\n                -moz-transform: rotate(20deg);\n                -webkit-transform: rotate(20deg);\n                -ms-transform: rotate(20deg);\n            }\n            60%, to{\n                bottom: 20px;\n            }\n        }\n        @keyframes animate-into-desc-vertical{\n            from, 50%{\n                opacity: 0;\n            }\n            70%, 100%{\n                opacity: 1;\n            }\n            30%{\n                transform: translateX(50px);\n            }\n        }\n        #noti-info-client #wrapper-noti-body.horizontal {\n          position: fixed;\n          width: auto;\n          bottom: 100px;\n          background: "+s+";\n          -webkit-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          -moz-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          -ms-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          border-radius: 4px;\n          display: none;\n          border: 1px solid #DDDDDD;\n        }\n        #noti-info-client #wrapper-noti-body.vertical {\n          position: fixed;\n          width: auto;\n          bottom: 55px;\n          background: #fff;\n          -webkit-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          -moz-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          -ms-box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          box-shadow: 0px 3px 6px 0px rgba(235,235,235,.3);\n          border-radius: 4px;\n          display: none;\n          border: 1px solid #DDDDDD;\n        }\n        #noti-info-client #wrapper-noti-body #box {\n          min-height: 150px;\n          width: 300px;\n          text-align: center;\n          padding: 10px 20px 20px;\n        }\n        #noti-info-client #wrapper-noti-body #box #closeButton {\n          position: absolute;\n          top: 0;\n          right: 5px;\n          transform: rotate(0deg);\n          color:#3d3d3d;\n          opacity: 0.5;\n          transition: all 0.15s;\n          cursor: pointer;\n          font-size: 20px;\n        }\n        #noti-info-client #wrapper-noti-body #box #box-content{\n            letter-spacing: 1px;\n            padding-top: 10px !important;\n            min-height: 100px;\n        }\n        #noti-info-client #wrapper-noti-body #box #box-content p{\n          font-size: 16px;\n          margin: 0px;\n          padding-top: 8px;\n        }\n        #noti-info-client #wrapper-noti-body #box #btn-ok {\n          margin-top: 10px !important;\n          position: relative;\n        }\n        #submit-button:hover {\n          opacity: 0.3;\n        }\n        #noti-info-client #wrapper-noti-body #box #btn-ok button.btn {\n          background-color: "+a+";\n          padding: 10px 30px;\n          display: inline-block;\n          color: "+s+";\n          font-size: 14px;\n          text-align: center;\n          outline: 0;\n          cursor: pointer;\n          border-radius: 4px;\n          text-transform: none;\n        }\n        .active-body-desc{\n          display: block !important;\n            /* keyframe */\n          animation:  2s animate-into-desc-"+c+" !important;\n          -webkit-animation: 2s animate-into-desc-"+c+" !important;\n          -moz-animation: 2s animate-into-desc-"+c+" !important;\n          -ms-animation: 2s animate-into-desc-"+c+" !important;\n        }\n        #noti-info-client #wrapper-noti-body div {\n          list-style: none;\n          margin: 0 !important;\n        }\n        #noti-info-client #wrapper-noti-body.horizontal::after, #noti-info-client #wrapper-noti-body.horizontal::before {\n          top: 100%;\n          left: 50%;\n          border: solid transparent;\n          content: \"\";\n          height: 0;\n          width: 0;\n          position: absolute;\n          pointer-events: none;\n          border-top-color: #DDDDDD;\n        }\n        #noti-info-client #wrapper-noti-body.horizontal::after {\n          border-top-color: #fff;\n          border-width: 10px;\n          margin-left: -10px;\n        }\n        #noti-info-client #wrapper-noti-body.horizontal::before {\n            border-width: 12px;\n            margin-left: -12px;\n        }\n        #noti-info-client #wrapper-noti-body.vertical::after, #noti-info-client #wrapper-noti-body.vertical::before {\n          top: 50%;\n          left: 100%;\n          border: solid transparent;\n          content: \"\";\n          height: 0;\n          width: 0;\n          position: absolute;\n          pointer-events: none;\n          border-left-color: #DDDDDD;\n        }\n        #noti-info-client #wrapper-noti-body.vertical::after {\n          border-left-color: #fff;\n          border-width: 10px;\n          margin-top: 1px;\n        }\n        #noti-info-client #wrapper-noti-body.vertical::before {\n          border-width: 11px;\n          margin-top: 0px;\n        }\n      </style>\n      <div id=\"noti-info-client\" class=\""+c+" popup-container bell-alert\">\n        <div id=\"panel\" class=\"active-btn-to\">\n          <span id=\"showButton\">\n            <svg class=\"icon icon-notification\">\n              <use xlink:href=\"#icon-notification\">\n                <symbol id=\"icon-notification\" viewBox=\"0 0 20 20\">\n                  <path d=\"M4 8c0-0.001 0-0.002 0-0.003 0-2.608 1.664-4.827 3.988-5.654l0.042-0.013c-0.016-0.095-0.025-0.204-0.025-0.315 0-1.105 0.895-2 2-2s2 0.895 2 2c0 0.111-0.009 0.22-0.027 0.327l0.002-0.012c2.361 0.843 4.020 3.060 4.020 5.664 0 0.002 0 0.004 0 0.006v-0 6l3 2v1h-18v-1l3-2v-6zM12 18c0 1.105-0.895 2-2 2s-2-0.895-2-2v0h4z\"></path>\n                </symbol>\n              </use>\n            </svg>\n          </span>\n        </div>\n        <div id=\"wrapper-noti-body\" class=\""+c+" active-body-desc\">\n          <div id=\"box\" >\n            <div id=\"closeButton\">&times;</div>\n            <div id=\"box-content\">\n              <pre>"+n+"</pre>\n            </div>\n            <div id=\"btn-ok\" class=\"clearfix\">\n              <button type=\"button\" id=\"submit-button\" class=\"btn model-close\">"+o+"</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  "},z=function(){function e(){this.isRendered=!1}return e.prototype.render=function(){if(!this.isRendered){this.shadowHost=window.document.createElement("div");var e=window.document.querySelector("body");e.insertBefore(this.shadowHost,e.childNodes[0]||null),this.shadowRoot=this.shadowHost.attachShadow({mode:"open"}),this.isRendered=!0}},e.prototype.renderOnElement=function(e){this.shadowHost=window.document.createElement("div");var t=window.document.getElementById(e);if(!t)throw new Error("element id is not exists");var n=t.contentDocument.getElementsByTagName("body")[0];n.appendChild(this.shadowHost),this.shadowRoot=this.shadowHost.attachShadow({mode:"open"}),this.isRendered=!0},e.prototype.setHTMLString=function(e){if(this.isRendered){var t=document.createElement("section");t.innerHTML=e,this.shadowRoot.appendChild(t)}},e.prototype.setDOM=function(e){var t=document.createElement("section");return t.appendChild(e),this.shadowRoot.appendChild(t),t},e.prototype.close=function(){this.isRendered&&(this.shadowHost.remove(),this.isRendered=!1)},e.bubblesEvent=function(e){return new CustomEvent(e,{bubbles:!0})},e}(),G=function(){function e(e,t,n,o,i,a){void 0===n&&(n={}),this.shadowRoot=e,this.shadowHost=t,this.config=n,this.onSubscribe=o,this.onShow=i,this.onHide=a,this._render()}return e.prototype.close=function(){this.shadowHost&&(u(window.document.body,B),this.shadowHost.remove())},e.prototype._render=function(){var e=window.document.createElement("section");this._createElement(e),u(window.document.body,B)},e.prototype._createElement=function(e){e.innerHTML=U(this.config),this.registerEventListeners(e),this.addEventDispatchers(e),this.shadowRoot.appendChild(e)},e.prototype.registerEventListeners=function(e){e.addEventListener(F.SHOW,this.onShow),e.addEventListener(F.HIDE,this.onHide),e.addEventListener(F.SUBSCRIBE,this.onSubscribe)},e.prototype.addEventDispatchers=function(e){e.querySelector("#panel").onclick=function(){return e.dispatchEvent(z.bubblesEvent(F.SHOW))},e.querySelector("#showButton").onclick=function(){return e.dispatchEvent(z.bubblesEvent(F.SHOW))},e.querySelector("#closeButton").onclick=function(){return e.dispatchEvent(z.bubblesEvent(F.HIDE))},e.querySelector("button").onclick=function(){return e.dispatchEvent(z.bubblesEvent(F.SUBSCRIBE))}},e}();(function(e){e.PUSHER_STATE_SHOW="pusher_state_show",e.PUSHER_STATE_HIDE="pusher_state_hide"})(R||(R={}));var j;(function(e){e.DEFAULT="default",e.GRANTED="granted",e.DENIED="denied"})(j||(j={}));var K,W=function(e){function n(t){void 0===t&&(t="Click Allow to subscribe");var n=e.call(this)||this;return n.navigationText=t,n}return t(n,e),n.prototype.render=function(){e.prototype.render.call(this);var t="\n    <div>\n      <style>\n      .webpush-navigation {\n        position: fixed;\n        top: 0;\n        left: 0;\n        height: 100%;\n        width: 100%;\n        background-color: rgba(0, 0, 0, 0.6);\n        z-index: 999999;\n      }\n\n      .webpush-navigation svg {\n        width: 100px;\n        fill: #ffffff;\n      }\n\n      .webpush-navigation p {\n        font-size: 1.4em;\n        text-shadow: 2px 2px 5px #444444;\n      }\n\n      .wrapper {\n        position: relative;\n        text-align: left;\n        top: 150px;\n        left: 500px;\n        color: #ffffff;\n      }\n      </style>\n      <div class=\"webpush-navigation\">\n        <div class=\"wrapper\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 869.58 1381.15\">\n            <g id=\"Layer_2\" data-name=\"Layer 2\">\n              <g id=\"Draw_Layer\" data-name=\"Draw Layer\" transform=\"translate(20,2.5) rotate(10)\">\n                <path class=\"cls-1\" d=\"M31.15,27.47A16.25,16.25,0,0,0,25.33,49.7c.84,1.1,1.69,2.19,2.54,3.29A16.27,16.27,0,0,0,35,57.17q14.3,5.41,28.42,11.26A16.37,16.37,0,0,0,67.11,70C147.9,104.44,223.56,150,293.19,203.5,378,269.37,453.45,346.61,519.28,431.36c78.27,101.72,142.5,213.79,192.57,331.91a1632.82,1632.82,0,0,1,111.71,409.28q4.5,34,7.56,68.22v0a.28.28,0,0,1,0,.09q4.2,47.73,5.48,95.64.36,14.19.47,28.38a16.25,16.25,0,0,0,32.5,0q-.12-14.16-.47-28.33h0L869,1333c0-.15,0-.3,0-.45q-1.34-45.74-5.34-91.33s0-.09,0-.14,0-.08,0-.13a1638.1,1638.1,0,0,0-117.4-479,1570.43,1570.43,0,0,0-111.4-219.83,1441.5,1441.5,0,0,0-147-199.62q-40.35-45.9-84.92-87.8c-29.7-28-60.89-54.25-93.19-79.16-61-47-126.81-87.78-196.55-120.42-9.56-4.47-19.22-8.74-28.92-12.9l-.1-.06-3-1.26-3.76-1.59-1.61-.67h0q-6-2.51-12-4.93a16.63,16.63,0,0,0-3.58-1.47q-7.4-2.94-14.84-5.77l-.62-.24-1-.39-4.32-.58a16.21,16.21,0,0,0-8.21,2.22Z\"/>\n                <path class=\"cls-1\" d=\"M226.74,0,76.55,7.4,16.47,10.35a16.14,16.14,0,0,0-8.23,2.12,16.45,16.45,0,0,0-5.9,5.76C-.53,23-.95,29.82,2.15,34.63q45.71,70.92,91.44,141.82l25.55,39.62a16.92,16.92,0,0,0,9.62,7.59,16.27,16.27,0,0,0,20.13-11.11c1.15-4,.81-9-1.49-12.54L53.34,54.14l-8.2-12.72L176.74,35l49.34-2.43h.27c4.41-.21,8.33-1.47,11.55-4.62a16.25,16.25,0,0,0,.28-23A16.5,16.5,0,0,0,228.34.05a12.22,12.22,0,0,0-1.6,0Z\"/>\n              </g>\n            </g>\n          </svg>\n          <p>"+this.navigationText+"</p>\n        </div>\n      </div>\n    </div>\n    ",n=document.createElement("section");n.innerHTML=t,this.shadowRoot.appendChild(n)},n}(z),V="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,Y=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){(function(t,n,o){e.exports?e.exports=o():n[t]=o()})("urljoin",V,function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&1<e.length){var n=e.shift();e[0]=n+e[0]}e[0]=e[0].match(/^file:\/\/\//)?e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0].replace(/^([^/:]+):\/*/,"$1://");for(var o,a=0;a<e.length;a++){if(o=e[a],"string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(0<a&&(o=o.replace(/^[\/]+/,"")),o=a<e.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),t.push(o))}var s=t.join("/");s=s.replace(/\/(\?|&|#[^!])/g,"$1");var r=s.split("?");return s=r.shift()+(0<r.length?"?":"")+r.join("&"),s}return function(){var t;return t="object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments),e(t)}})}),Q=function(e){function i(){var t=e.call(this)||this;return t.subscription=null,t.swRegistration=null,t.isSubscribed=!1,t.permission=Notification.permission,t}return t(i,e),i.prototype.init=function(e){return n(this,void 0,void 0,function(){var t,n;return o(this,function(o){switch(o.label){case 0:this.ctx=e,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,this._registerServiceWorker()];case 2:return o.sent(),[4,this._fetchConfig()];case 3:return t=o.sent(),t.enableWebPushNavigation&&(this.pusherNavigation=t.navigation_text?new W(t.navigation_text):new W),[2,t];case 4:throw n=o.sent(),n;case 5:return[2];}})})},i.prototype.subscribe=function(){var e=this;this.close(),this.permission===j.DEFAULT?(this.pusherNavigation&&this.showNavigation(),Notification.requestPermission().then(function(){e.pusherNavigation&&e.hideNavigation();var t=l(e.ctx.config.webPushPublicKey);e.swRegistration&&e.swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t}).then(function(t){e.subscription=t,e._updateSubscriptionOnServer(t,e.ctx.config.pusherAlias).catch(function(t){window.console.error(N.SUBSCRIPTION_SERVER_ERROR,t)})}).catch(function(t){window.console.error(N.SUBSCRIPTION_ERROR,t)})})):this.swRegistration&&this.swRegistration.pushManager.getSubscription().then(function(t){t?(e._updateSubscriptionOnServer(t,e.ctx.config.pusherAlias).catch(function(t){window.console.error(N.SUBSCRIPTION_SERVER_ERROR,t)}),e.subscription=t):window.console.error(N.SUBSCRIPTION_ERROR,t)}).catch(function(t){window.console.error(N.SUBSCRIPTION_ERROR,t)})},i.prototype.render=function(t){var n=this;void 0===t&&(t={}),e.prototype.render.call(this),this.content=new G(this.shadowRoot,this.shadowHost,t,function(){return n.subscribe()},function(){return n.show()},function(){return n.hide()}),this.isShown()||this.hide()},i.prototype.close=function(){e.prototype.close.call(this)},i.prototype.show=function(){this.shadowRoot.querySelector(".popup-container").classList.add("bell-alert"),this.shadowRoot.querySelector("#panel").classList.remove("active-btn-form"),this.shadowRoot.querySelector("#panel").classList.add("active-btn-to"),this.shadowRoot.querySelector("#wrapper-noti-body").classList.add("active-body-desc"),this.setState(q,R.PUSHER_STATE_SHOW)},i.prototype.hide=function(){this.shadowRoot.querySelector(".popup-container").classList.remove("bell-alert"),this.shadowRoot.querySelector("#panel").classList.remove("active-btn-to"),this.shadowRoot.querySelector("#panel").classList.add("active-btn-from"),this.shadowRoot.querySelector("#wrapper-noti-body").classList.remove("active-body-desc"),this.setState(q,R.PUSHER_STATE_HIDE)},i.prototype.showNavigation=function(){this.pusherNavigation&&this.pusherNavigation.render()},i.prototype.hideNavigation=function(){this.pusherNavigation&&this.pusherNavigation.close()},i.prototype.isShown=function(){var e=this.getState(q);return!e||e===R.PUSHER_STATE_SHOW},i.prototype.setState=function(e,t){window.localStorage.setItem(e,t)},i.prototype.getState=function(e){var t=window.localStorage.getItem(e);return t?window.localStorage.getItem(e):null},i.prototype._registerServiceWorker=function(){var e=this;return new Promise(function(t,n){"serviceWorker"in navigator&&"PushManager"in window?navigator.serviceWorker.register(Y(c(),e.ctx.config.prefixPathWorkerScript,"pam-sw.js")).then(function(t){return e.swRegistration=t,e._notify()}).then(function(e){return t(e)}).catch(function(e){n(N.SERVICE_WORKER_ERROR+": "+e)}):n(N.NOT_SUPPORTED)})},i.prototype._notify=function(){var e=this;return new Promise(function(t,n){e.swRegistration&&e.swRegistration.pushManager.getSubscription().then(function(o){e.subscription=o,e.isSubscribed=null!==o,e.isSubscribed?n(N.USER_IS_SUBSCRIBED):t(null)})})},i.prototype._updateSubscriptionOnServer=function(e,t){var n=this.ctx.config.baseApi+"/api/pub/contacts/"+g("contact_id")+"/webpush/"+t;return d(n,e.toJSON())},i.prototype._fetchConfig=function(){var e=this.ctx.config.baseApi+"/api/media/webpush/"+this.ctx.config.pusherAlias+"/config";return p(e)},i}(z),X=function(e){function i(t,i,a,s,l,c){void 0===a&&(a=!1),void 0===l&&(l=!1),void 0===c&&(c=!1);var d=e.call(this)||this;return d.consentDetail=t,d.submitConsentPermission=i,d.immediatelySubmit=a,d.callback=s,d.previewMode=l,d.disableToggleOptions=c,d.trackingConsentDetailType={terms_and_conditions:{label:"Terms & Conditions",value:"terms_and_conditions",isAlwaysAccepted:!0},privacy_overview:{label:"Privacy Overview",value:"privacy_overview",isAlwaysAccepted:!0},necessary_cookies:{label:"Necessary Cookies",value:"necessary_cookies",isAlwaysAccepted:!0},preferences_cookies:{label:"Preferences Cookies",value:"preferences_cookies",isAlwaysAccepted:d.disableToggleOptions||!1},analytics_cookies:{label:"Analytics Cookies",value:"analytics_cookies",isAlwaysAccepted:d.disableToggleOptions||!1},marketing_cookies:{label:"Marketing Cookies",value:"marketing_cookies",isAlwaysAccepted:d.disableToggleOptions||!1},social_media_cookies:{label:"Social Media Cookies",value:"social_media_cookies",isAlwaysAccepted:d.disableToggleOptions||!1}},d.contactingTypeDetailOptions={terms_and_conditions:{label:"Terms & Conditions",value:"terms_and_conditions",isAlwaysAccepted:!0},privacy_overview:{label:"Privacy Overview",value:"privacy_overview",isAlwaysAccepted:!0},email:{label:"Email",value:"email",isAlwaysAccepted:d.disableToggleOptions||!1},sms:{label:"SMS",value:"sms",isAlwaysAccepted:d.disableToggleOptions||!1},line:{label:"LINE",value:"line",isAlwaysAccepted:d.disableToggleOptions||!1},facebook_messenger:{label:"Facebook Messenger",value:"facebook_messenger",isAlwaysAccepted:d.disableToggleOptions||!1},push_notification:{label:"Push Notification",value:"push_notification",isAlwaysAccepted:d.disableToggleOptions||!1}},d.consentDetailType="tracking_type"===d.consentDetail.consent_message_type?d.trackingConsentDetailType:d.contactingTypeDetailOptions,d.activeLanguage=d.consentDetail.setting.default_language.toLowerCase(),d.selectedConsentDetailTypeIdx=0,d.updatedConsentAcceptation={consent_message_id:d.consentDetail.consent_message_id,version:d.consentDetail.setting.version,permission:{}},d.template="\n    <div>\n        <style>\n            * {\n                box-sizing: border-box;\n            }\n            \n            body {\n                margin: 0;\n                background-color: indigo;\n            }\n            \n            #consent-noti {\n                position: fixed;\n                display: flex;\n                justify-content: center;\n                bottom: 0;\n                left: 0;\n                width: 100%;\n                z-index: 900001;\n                /* background color and opacity */\n                background-color: "+d.consentDetail.style_configuration.bar_background_color+";\n                opacity: "+d.consentDetail.style_configuration.bar_background_opacity_percentage/100+";\n            }\n            \n            .container {\n                display: flex;\n                align-content: center;\n                width: 100%;\n            }\n            \n            .container>div {\n                display: flex;\n                align-items: center;\n            }\n            \n            #consent-txt-container {\n                flex-grow: 1;\n                padding: 20px 20px 20px 40px;\n            }\n            \n            #consent-txt {\n                color: "+d.consentDetail.style_configuration.bar_text_color+";\n                font-size: 0.9rem;\n            }\n            \n            #consent-txt a:link,\n            #consent-txt a:visited,\n            #consent-txt a:active {\n                color: "+d.consentDetail.style_configuration.bar_text_color+";\n            }\n            \n            #consent-txt a:hover {\n                color: "+d.consentDetail.style_configuration.button_background_color+";\n            }\n            \n            #consent-noti-btn-container {\n                display: flex;\n                flex-direction: column;\n                align-items: flex-end;\n                justify-content: space-between;\n                padding: 15px;\n            }\n            \n            #language-btn-container {\n                color: "+d.consentDetail.style_configuration.bar_text_color+";\n                font-size: 0.8rem;\n                margin-bottom: 10px;\n            }\n            \n            #language-btn-container .language-btn {\n                cursor: pointer;\n            }\n            \n            #language-btn-container .active-language-btn {\n                color: "+d.consentDetail.style_configuration.consent_detail.primary_color+" !important;\n            }\n\n            #language-btn-container .select-language {\n              cursor: pointer;\n              border: none;\n              background: none;\n              color: white;\n              border-color: white;\n          }\n            \n            .accept-btn {\n                cursor: pointer;\n                /* btn color */\n                background-color: "+d.consentDetail.style_configuration.button_background_color+";\n                /* btn text color */\n                color: "+d.consentDetail.style_configuration.button_text_color+";\n                padding: 12px 48px;\n                border-radius: 6px;\n                font-size: 1rem;\n            }\n            \n            .accept-btn:hover {\n                opacity: 0.8;\n            }\n            \n            .more-info-link {\n                margin-left: 6px;\n                text-decoration: underline;\n                cursor: pointer;\n            }\n            \n            .more-info-link:hover {\n                color: "+d.consentDetail.style_configuration.button_background_color+";\n            }\n            \n            .notification-close-btn {\n                position: absolute;\n                top: 8px;\n                left: 8px;\n                height: 12px;\n                width: 12px;\n            }\n            \n            .close-btn {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                cursor: pointer;\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"768px")+") {\n                .close-btn {\n                    justify-content: flex-start;\n                }\n            }\n            \n            .close-btn:hover {\n                opacity: 0.5;\n            }\n            \n            .notification-close-btn::before,\n            .notification-close-btn::after {\n                position: absolute;\n                content: '';\n                width: 100%;\n                height: 1px;\n                /* btn color */\n                background-color: "+d.consentDetail.style_configuration.button_background_color+";\n            }\n            \n            .close-btn::before {\n              \n            }\n            \n            .close-btn::after {\n               \n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"768px")+") {\n                .container {\n                    flex-direction: column;\n                }\n                #consent-txt-container {\n                    padding: 30px 15px 5px;\n                }\n                .accept-btn {\n                    text-align: center;\n                    width: 100%;\n                }\n            }\n            /* modal */\n            \n            .overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                height: 100%;\n                width: 100%;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 900002;\n            }\n            \n            .consent-message-modal {\n                padding: 10px;\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                width: "+(d.previewMode?"calc((100vh / 3) * 4)":"800px")+";\n                max-width: "+(d.previewMode?"95%":"80%")+";\n                height: "+(d.previewMode?"95%":"90% !important")+";\n                max-height: 550px;\n                min-height: 280px;\n                background-color: #ffffff;\n                z-index: 900003;\n                border-radius: 7px;\n                font-family: \"Roboto\", sans-serif;\n                display: flex;\n                flex-direction: column;\n            }\n            \n            .consent-message-topic-container {\n                display: flex;\n                margin-bottom: 5px;\n            }\n            \n            .consent-message-topic {\n                display: flex;\n                align-items: center;\n            }\n            \n            .pop-up-main-icon-container {\n                display: flex;\n                align-items: center;\n                margin-right: 15px;\n                color: "+d.consentDetail.style_configuration.consent_detail.primary_color+";\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"768px")+") {\n                .consent-message-modal {\n                    padding: 10px;\n                }\n                .consent-message-topic {\n                    flex-direction: column;\n                    align-items: flex-start;\n                    flex-basis: 100%;\n                    margin-top: 0;\n                }\n                .pop-up-main-icon-container {\n                    margin-bottom: 10px;\n                    pop-up-main-icon-container\n                }\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"599px")+") {\n                .consent-message-modal {\n                    height: "+(d.previewMode?"95%":"70%")+";\n                }\n            }\n            \n            .pop-up-main-icon {\n                margin-right: 10px;\n                width:30px;\n                height:30px\n            }\n            \n            .consent-message-topic-container h2,\n            h3 {\n                margin: 0;\n            }\n            \n            .active-modal-language-btn {\n                box-shadow: 0px 0px 0px 1px "+d.consentDetail.style_configuration.consent_detail.primary_color+" inset;\n            }\n            \n            .inactive-language-btn {\n                background-color: #EBEBEB;\n            }\n            \n            .consent-message-container {\n                display: flex;\n                height: calc(80% - 55px);\n                flex-grow: 1;\n                border: 1px solid #C6C6C6;\n                flex-basis: 80%;\n                z-index: 2;\n                margin-bottom: auto;\n            }\n            \n            #consent-message-container {\n                border-radius: 8px;\n            }\n            \n            .consent-detail-title {\n                color: #303131;\n            }\n            \n            #consent-detail-type-tab-bar {\n                display: flex;\n                flex-direction: column;\n                flex-basis: 30%;\n                border-right: 1px solid #C6C6C6;\n                background-color: #EBEBEB;\n                border-radius: 8px 0px 0px 8px;\n                overflow-y: scroll;\n                -ms-overflow-style: none;\n                scrollbar-width: none;\n            }\n            \n            #consent-detail-type-tab-bar::-webkit-scrollbar {\n                display: none;\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"768px")+") {\n                #consent-message-container {\n                    display: none;\n                }\n            }\n            \n            .consent-detail-type-tab {\n                display: flex;\n                align-items: center;\n                padding: 15px;\n                cursor: pointer;\n                font-size: 0.9rem;\n            }\n            \n            .consent-detail-type-tab:first-of-type {\n                border-radius: 8px 0 0 0;\n            }\n            \n            .consent-detail-type {\n                color: #303131;\n                font-weight: 500;\n            }\n            \n            .active-consent-type-icon-container {\n                flex-basis: 24px;\n                margin-right: 10px;\n                height: 24px;\n            }\n            \n            .active-consent-type-icon-container svg {\n                width: 24px;\n                height: 24px;\n                color: #71D879;\n            }\n            \n            .modal-lang-and-close-btn {\n                margin-left: auto;\n                display: flex;\n            }\n            \n            #modal-language-btn-container {\n                display: flex;\n                align-items: center;\n                margin-right: 15px;\n            }\n\n            #modal-language-btn-container .select-language {\n              border: none;\n              background: #EBEBEB;\n              cursor: pointer;\n              padding: 5px;\n              border-radius: 4px;\n            }\n\n            .select-language:focus-visible {\n              outline: none;\n            }\n            \n            .modal-language-btn {\n                padding: 10px;\n                color: "+d.consentDetail.style_configuration.consent_detail.primary_color+";\n                font-size: 0.8rem;\n                height: 35px;\n                width: 40px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                cursor: pointer;\n            }\n            \n            .modal-language-btn:first-of-type {\n                border-radius: 8px 0px 0px 8px;\n            }\n            \n            .modal-language-btn:last-of-type {\n                border-radius: 0px 8px 8px 0px;\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"599px")+") {\n                .modal-lang-and-close-btn {\n                    top: 15px;\n                    right: 10px;\n                }\n                #modal-language-btn-container {\n                    margin-right: 5px;\n                }\n                .modal-language-btn {\n                    height: 25px;\n                    width: 30px;\n                    font-size: 10px;\n                }\n                .modal-language-btn:first-of-type {\n                    border-radius: 5px 0px 0px 5px;\n                }\n                .modal-language-btn:last-of-type {\n                    border-radius: 0px 5px 5px 0px;\n                }\n            }\n            \n            .modal-close-btn::after {\n                content: '\\00d7';\n                color: #9CACAC;\n                font-size:30px;\n                margin-top: -15px;\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"599px")+") {\n                .modal-close-btn::before,\n                .modal-close-btn::after {\n                    width: 70%;\n                }\n            }\n            \n            .modal-tab:hover {\n                background-color: #f1f1f1;\n            }\n            \n            .modal-tab-active {\n                background-color: #FFFFFF;\n            }\n            \n            .consent-message-content-container {\n                flex-basis: 75%;\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                padding: 15px 25px;\n            }\n            \n            .modal-content-topic-container {\n                margin-bottom: 15px;\n                max-height: 20%;\n                color: "+d.consentDetail.style_configuration.consent_detail.secondary_color+";\n            }\n            \n            #full-consent-message-container .modal-content-topic-container {\n                margin: 0px 0px 15px !important;\n            }\n            \n            #full-consent-message-container .consent-message-content-container {\n                flex-basis: 100%;\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"768px")+") {\n                #full-consent-message-container .consent-message-content-container {\n                    padding: 15px;\n                }\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"599px")+") {\n                #full-consent-message-container .consent-message-content-container {\n                    padding: 10px;\n                }\n                #modal-full-content-topic {\n                    font-size: 15px !important;\n                }\n            }\n            \n            .consent-message-description-container {\n                flex-basis: 80%;\n                overflow-y: scroll;\n                margin-bottom: auto;\n                max-height: 100%;\n            }\n            \n            #full-consent-message-container .consent-message-description-container {\n                flex-basis: 100%;\n            }\n            \n            .consent-message-description-container p {\n                font-size: 0.9rem;\n                color: "+d.consentDetail.style_configuration.consent_detail.text_color+";\n                margin: 0;\n            }\n            \n            #modal-content-topic,\n            #modal-full-content-topic,\n            .mobile-modal-content-topic {\n                margin: 0;\n                color: #5A5F5F;\n                font-size: 1.2rem;\n                font-weight: 500;\n            }\n            \n            .modal-content p {\n                font-size: 0.9rem;\n                font-weight: 500;\n                color: #303131;\n            }\n            \n            #modal-content-footer-container,\n            .mobile-modal-content-footer-container {\n                padding-top: 15px;\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n            }\n            \n            .mobile-modal-content-footer-container {\n                margin: 0 10px;\n            }\n            \n            #full-version-btn-container .modal-content-footer-text,\n            .mobile-full-version-btn-container>.modal-content-footer-text {\n                text-decoration: underline;\n                cursor: pointer;\n            }\n            \n            .modal-content-footer-text {\n                font-size: 0.8rem;\n                font-weight: 500;\n                color: "+d.consentDetail.style_configuration.consent_detail.text_color+";\n            }\n            \n            #accept-by-type-toggle-container {\n                display: flex;\n                align-items: center;\n            }\n            \n            #consent-message-modal-footer-container {\n                margin-top: 20px;\n            }\n            \n            #consent-message-modal-footer-container button {\n                color: "+d.consentDetail.style_configuration.consent_detail.button_text_color+";\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"599px")+") {\n                #consent-message-modal-footer-container {\n                    margin-top: 10px;\n                }\n            }\n            \n            #brief-description-consent-message-btn-container {\n                display: flex;\n                justify-content: flex-end;\n            }\n            \n            #full-description-consent-message-btn-container {\n                display: flex;\n                justify-content: space-between;\n            }\n            \n            .consent-message-save-button {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                background-color: "+d.consentDetail.style_configuration.consent_detail.primary_color+";\n                margin-right: 8px;\n                width: 150px;\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"599px")+") {\n                #full-description-consent-message-btn-container .consent-message-save-button {\n                    display: none !important;\n                }\n            }\n            \n            .consent-message-accept-button {\n                background-color: "+d.consentDetail.style_configuration.consent_detail.secondary_color+";\n                width: 150px;\n            }\n            \n            .consent-message-back-button {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                background-color: "+d.consentDetail.style_configuration.consent_detail.secondary_color+";\n            }\n            \n            .consent-message-btn-container button {\n                border: none;\n                border-radius: 7px;\n                padding: 10px 20px;\n                color: "+d.consentDetail.style_configuration.consent_detail.button_text_color+";\n                cursor: pointer;\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"599px")+") {\n                #brief-description-consent-message-btn-container {\n                    width: 70%;\n                    margin-left: auto;\n                }\n                #brief-description-consent-message-btn-container button {\n                    padding: 10px 5px;\n                    font-size: 10px;\n                }\n                #full-description-consent-message-btn-container button {\n                    padding: 10px;\n                }\n            }\n            \n            .btn-icon-img {\n                width: auto;\n                height: 15px;\n                filter: invert(100%);\n                -webkit-filter: invert(100%);\n                margin-right: 8px;\n            }\n            \n            ::-webkit-scrollbar {\n                -webkit-appearance: none;\n                width: 7px;\n            }\n            \n            ::-webkit-scrollbar-thumb {\n                border-radius: 4px;\n                background-color: rgba(0, 0, 0, .5);\n                box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n            }\n            /* The switch - the box around the slider */\n            \n            .accept-by-type-switch {\n                position: relative;\n                display: inline-block;\n                width: 30px;\n                height: 17px;\n                margin-right: 7px;\n            }\n            /* Hide default HTML checkbox */\n            \n            .accept-by-type-switch input {\n                opacity: 0;\n                width: 0;\n                height: 0;\n            }\n            /* The slider */\n            \n            .slider {\n                position: absolute;\n                cursor: pointer;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: #EBEBEB;\n                -webkit-transition: .4s;\n                transition: .4s;\n            }\n            \n            .slider:before {\n                position: absolute;\n                content: \"\";\n                height: 13px;\n                width: 13px;\n                left: 2px;\n                bottom: 2px;\n                background-color: white;\n                -webkit-transition: .4s;\n                transition: .4s;\n            }\n            \n            input:checked+.slider {\n                background-color: #71D879;\n            }\n            \n            input:focus+.slider {\n                box-shadow: 0 0 1px #71D879;\n            }\n            \n            input:checked+.slider:before {\n                -webkit-transform: translateX(13px);\n                -ms-transform: translateX(13px);\n                transform: translateX(13px);\n            }\n            /* Rounded sliders */\n            \n            .slider.round {\n                border-radius: 34px;\n            }\n            \n            .slider.round:before {\n                border-radius: 50%;\n            }\n            \n            .hide-element {\n                display: none !important;\n            }\n            /* Mobile Reponsive Consent Message */\n            \n            #mobile-consent-message-container {\n                display: flex;\n                flex-direction: column;\n                height: 80%;\n                border: 1px solid #C6C6C6;\n                flex-basis: 80%;\n                z-index: 2;\n                margin-bottom: auto;\n                border-radius: 8px 8px 0 0;\n                overflow-y: scroll;\n                -ms-overflow-style: none;\n                scrollbar-width: none;\n            }\n            \n            #mobile-consent-message-container::-webkit-scrollbar {\n                display: none;\n            }\n            \n            @media only screen and (min-width: "+(d.previewMode?"376px":"769px")+") {\n                #mobile-consent-message-container {\n                    display: none;\n                }\n            }\n            \n            .mobile-consent-detail-type-tab,\n            .mobile-consent-message-content-container {\n                border-bottom: 1px solid #C6C6C6;\n            }\n            \n            .mobile-consent-detail-type {\n                margin-right: auto;\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"599px")+") {\n                .mobile-consent-detail-type {\n                    font-size: 12px !important;\n                }\n            }\n            \n            .arrow {\n                border: solid #C7C7C7;\n                border-width: 0 3px 3px 0;\n                display: inline-block;\n                padding: 3px;\n            }\n            \n            .down {\n                transform: rotate(45deg);\n                -webkit-transform: rotate(45deg);\n            }\n            \n            .mobile-consent-message-content-container {\n                transition: all 0.2s ease;\n                position: relative;\n                padding: 0px 10px;\n            }\n            \n            .mobile-consent-message-description-container {\n                flex-basis: 80%;\n                overflow-y: scroll;\n                margin-bottom: auto;\n                max-height: 100%;\n                height: 120px;\n                margin: 0 0 0 10px;\n            }\n            \n            .mobile-consent-message-description {\n                font-size: 0.9rem;\n                color: #000;\n                margin: 0;\n                font-weight: 500;\n            }\n            \n            .mobile-accept-by-type-toggle-container {\n                display: flex;\n                align-items: center;\n            }\n            \n            .is-expanded .mobile-consent-message-content-container {\n                max-height: 1000px;\n                min-height: 200px;\n                overflow: visible;\n                padding: 15px 10px 20px;\n                opacity: 1;\n            }\n            \n            .is-collapsed .mobile-consent-message-content-container {\n                max-height: 0;\n                min-height: 0;\n                overflow: hidden;\n                opacity: 0;\n            }\n            \n            #full-consent-message-container {\n                border-radius: 8px;\n            }\n            \n            .highlight-mobile-type-tab {\n                box-shadow: 0px 8px 15px #0000002c;\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"768px")+") {\n                .modal-content-topic-container {\n                    margin: 0 10px 10px;\n                }\n            }\n            \n            @media only screen and (max-width: "+(d.previewMode?"375px":"599px")+" {\n                .consent-message-topic h3 {\n                    font-size: 13px;\n                }\n                #mobile-consent-message-container h4 {\n                    font-size: 13px;\n                }\n                #mobile-consent-message-container p {\n                    font-size: 13px;\n                }\n                .is-expanded .mobile-consent-message-content-container {\n                    padding: 10px;\n                }\n                .modal-content-topic-container {\n                    margin: 0 0 10px;\n                }\n                .mobile-consent-message-description-container {\n                    margin: 0px;\n                }\n                .mobile-modal-content-footer-container {\n                    margin: 0px;\n                }\n            }\n        </style>\n\n        <div id=\"consent-noti\">\n            <div class=\"notification-close-btn close-btn\"></div>\n            <div class=\"container\">\n                <div id=\"consent-txt-container\">\n                    <div id=\"consent-txt\">\n                        <!-- consent text -->\n                    </div>\n                </div>\n                <div id=\"consent-noti-btn-container\">\n                    <div id=\"language-btn-container\"></div>\n                    <div class=\"accept-btn\">\n                        <!-- button text -->\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"overlay\" id=\"overlay\"></div>\n\n        <div class=\"consent-message-modal\" id=\"modal\">\n            <div class=\"consent-message-topic-container\">\n                <div class=\"consent-message-topic\">\n                    <div class=\"pop-up-main-icon-container\">\n                        <svg class=\"pop-up-main-icon\" viewBox=\"0 0 30 30\">\n                            <path fill=\"currentColor\" d=\"M21,11C21,16.55 17.16,21.74 12,23C6.84,21.74 3,16.55 3,11V5L12,1L21,5V11M12,21C15.75,20 19,15.54 19,11.22V6.3L12,3.18V21Z\" />\n                        </svg>\n                        <h2>"+d.consentDetail.style_configuration.consent_detail.popup_main_icon.toUpperCase()+"</h2>\n                    </div>\n                    <div class=\"consent-detail-title\">\n                        <h3>\n                            <!-- consent detail title -->\n                        </h3>\n                    </div>\n                </div>\n                <div class=\"modal-lang-and-close-btn\">\n                    <div id=\"modal-language-btn-container\"></div>\n                    <div id=\"modal-close-btn\" class=\"modal-close-btn close-btn\"></div>\n                </div>\n            </div>\n            <div class=\"consent-message-container\" id=\"consent-message-container\">\n                <div id=\"consent-detail-type-tab-bar\"></div>\n                <div class=\"consent-message-content-container\">\n                    <div class=\"modal-content-topic-container\">\n                        <h4 id=\"modal-content-topic\"></h4>\n                    </div>\n                    <div class=\"consent-message-description-container\" id=\"modal-content-list\"></div>\n                    <div id=\"modal-content-footer-container\">\n                        <div id=\"full-version-btn-container\">\n                            <span class=\"modal-content-footer-text\">\n                                <!-- full version btn -->\n                            </span>\n                        </div>\n                        <div id=\"accept-by-type-toggle-container\">\n                            <!-- Accept btn -->\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"consent-message-container hide-element\" id=\"full-consent-message-container\">\n                <div class=\"consent-message-content-container\">\n                    <div class=\"modal-content-topic-container\">\n                        <h4 id=\"modal-full-content-topic\"></h4>\n                    </div>\n                    <div class=\"consent-message-description-container\" id=\"modal-full-content-list\">\n                        <!-- Full Description -->\n                    </div>\n                </div>\n            </div>\n            <div id=\"mobile-consent-message-container\">\n                <!-- Mobile Consent Message Body -->\n            </div>\n            <div id=\"consent-message-modal-footer-container\">\n                <div class=\"consent-message-btn-container\" id=\"brief-description-consent-message-btn-container\">\n                    <button class=\"consent-message-save-button\">Save Setting</button>\n                    <button class=\"consent-message-accept-button\">Accept All</button>\n                </div>\n                <div class=\"consent-message-btn-container hide-element\" id=\"full-description-consent-message-btn-container\">\n                    <button class=\"consent-message-back-button\"><img class=\"btn-icon-img\" src=\"https://static.thenounproject.com/png/2916775-200.png\" alt=\"go-back-icon\" />Back</button>\n                    <!-- <button class=\"consent-message-save-button\"><img class=\"btn-icon-img\" src=\"https://icon-library.com/images/icon-download-png/icon-download-png-20.jpg\" alt=\"download-icon\" />Download</button> -->\n                </div>\n            </div>\n        </div>\n    </div>",d.init=function(e){d.languageButton(),d.generateConsentTextForMobile(),d.displayConsentBar(e),d.generateConsentText(),d.generateConsentDetailTypeTab(),d.generateFullVersionButton(),d.generateFullVersionButtonForMobile(),d.generateAgreeToggleByType(),d.generateAgreeToggleByTypeForMobile(),d.changeLanguage(d.activeLanguage),d.changeTab(0,!1),d.updateConsentAcceptationValue(),d.setButtonEvent(),d.closeModal()},d.setButtonEvent=function(){var e=d.shadowRoot.querySelector("#full-version-btn-container"),t=e.getElementsByClassName("modal-content-footer-text");t[0].onclick=d.showFullDescriptionToggle;var n=d.shadowRoot.querySelector("#full-description-consent-message-btn-container"),o=n.getElementsByClassName("consent-message-back-button");o[0].onclick=d.showFullDescriptionToggle;var i=d.shadowRoot.querySelector("#overlay");if(d.previewMode?i.classList.add("hide-element"):i.onclick=d.closeModal,!d.previewMode){var a=d.shadowRoot.querySelector("#modal-close-btn");a.onclick=d.closeModal;var s=d.shadowRoot.querySelectorAll(".notification-close-btn");s[0].onclick=d.closeNotiBar;var r=d.shadowRoot.querySelector("#brief-description-consent-message-btn-container"),l=r.querySelectorAll(".consent-message-save-button");l[0].onclick=d.immediatelySubmit?d.submitConsent:d.closeModal;var c=r.querySelectorAll(".consent-message-accept-button");c[0].onclick=function(){return d.acceptAllConsent(d.immediatelySubmit,d.closeModal)};var p=d.shadowRoot.querySelector("#consent-noti-btn-container"),g=p.querySelectorAll(".accept-btn");g[0].onclick=function(){return d.acceptAllConsent(!0)}}},d.expandConsentBox=function(e,t){for(var n=d.shadowRoot.querySelectorAll(".mobile-consent-detail-type-tab"),o=d.shadowRoot.querySelectorAll(".mobile-consent-detail-container"),a=0;a<o.length;a++)a==e?t?(n[a].classList.toggle("highlight-mobile-type-tab"),o[a].classList.toggle("is-expanded"),o[a].classList.toggle("is-collapsed")):(n[a].classList.toggle("highlight-mobile-type-tab"),o[a].classList.add("is-expanded"),o[a].classList.remove("is-collapsed")):(n[a].classList.remove("highlight-mobile-type-tab"),o[a].classList.add("is-collapsed"),o[a].classList.remove("is-expanded"));t&&d.changeTab(e,!0)},d.languageButton=function(){if(!(1>=d.consentDetail.setting.available_languages.length)){var e=d.shadowRoot.querySelector("#language-btn-container"),t=d.shadowRoot.querySelector("#modal-language-btn-container");if(e&&t){var n=0;if(4<d.consentDetail.setting.available_languages.length){var o=document.createElement("select");o.options.selectedIndex=0,o.id="select_lang_bar",o.name="select_lang_bar",o.classList.add("select-language");for(var a=0,s=d.consentDetail.setting.available_languages;a<s.length;a++){var r=s[a],l=document.createElement("option");l.value=r.toLowerCase(),l.text=r.toUpperCase(),o.appendChild(l)}o.onchange=function(){return d.changeLanguage(o.options[o.selectedIndex].value.toLowerCase())},e.appendChild(o);var c=document.createElement("select");c.options.selectedIndex=0,c.id="select_lang_modal",c.name="select_lang_modal",c.classList.add("select-language");for(var p=0,g=d.consentDetail.setting.available_languages;p<g.length;p++){var r=g[p],l=document.createElement("option");l.value=r.toLowerCase(),l.text=r.toUpperCase(),c.appendChild(l)}c.onchange=function(){return d.changeLanguage(c.options[c.selectedIndex].value.toLowerCase())},t.appendChild(c)}else if(2<d.consentDetail.setting.available_languages.length){var m=document.createElement("select");m.options.selectedIndex=0,m.id="select_lang_modal",m.name="select_lang_modal",m.classList.add("select-language");for(var u=0,b=d.consentDetail.setting.available_languages;u<b.length;u++){var r=b[u],l=document.createElement("option");l.value=r.toLowerCase(),l.text=r.toUpperCase(),m.appendChild(l)}m.onchange=function(){return d.changeLanguage(m.options[m.selectedIndex].value.toLowerCase())},t.appendChild(m);for(var r,h=function(t){var o=document.createElement("span");if(o.innerHTML=t.toUpperCase(),o.onclick=function(){return d.changeLanguage(t.toLowerCase())},o.classList.add("language-btn"),t==d.consentDetail.setting.default_language&&o.classList.add("active-language-btn"),e.appendChild(o),1<d.consentDetail.setting.available_languages.length-n){var i=document.createElement("span");i.innerHTML="&nbsp;&nbsp;|&nbsp;&nbsp;",e.appendChild(i)}n+=1},f=0,y=d.consentDetail.setting.available_languages;f<y.length;f++)r=y[f],h(r)}else for(var r,x=function(o){var i=document.createElement("span");if(i.innerHTML=o.toUpperCase(),i.onclick=function(){return d.changeLanguage(o.toLowerCase())},i.classList.add("language-btn"),o==d.consentDetail.setting.default_language&&i.classList.add("active-language-btn"),e.appendChild(i),1<d.consentDetail.setting.available_languages.length-n){var a=document.createElement("span");a.innerHTML="&nbsp;&nbsp;|&nbsp;&nbsp;",e.appendChild(a)}var s=document.createElement("div");s.classList.add("modal-language-btn"),s.onclick=function(){return d.changeLanguage(o.toLowerCase())},s.innerHTML=o.toUpperCase(),t.appendChild(s),n+=1},_=0,v=d.consentDetail.setting.available_languages;_<v.length;_++)r=v[_],x(r)}}},d.generateConsentTextForMobile=function(){var e=d.shadowRoot.querySelector("#mobile-consent-message-container");if(e){var t=0,n=function(n){if(d.consentDetail.setting[n].is_enabled){var o=t,i=document.createElement("div");i.classList.add("mobile-consent-detail-container"),i.classList.add("is-collapsed");var a=document.createElement("div");a.classList.add("consent-detail-type-tab"),a.classList.add("mobile-consent-detail-type-tab"),a.onclick=function(){return d.expandConsentBox(o,!0)};var s=document.createElement("div");s.classList.add("active-consent-type-icon-container");var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.classList.add("active-consent-type-icon"),r.setAttributeNS(null,"viewBox","0 0 24 24");var l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d","M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"),l.setAttribute("fill","currentColor"),r.appendChild(l),s.appendChild(r);var c=document.createElement("span");c.classList.add("consent-detail-type"),c.classList.add("mobile-consent-detail-type"),c.innerHTML=d.consentDetailType[n].label;var p=document.createElement("div"),g=document.createElement("i");g.classList.add("arrow"),g.classList.add("down"),p.appendChild(g),a.appendChild(s),a.appendChild(c),a.appendChild(p),i.appendChild(a);var m=document.createElement("div");m.classList.add("mobile-consent-message-content-container");var u=document.createElement("div");u.classList.add("modal-content-topic-container");var b=document.createElement("h4");b.classList.add("mobile-modal-content-topic"),b.innerHTML=d.consentDetailType[n].label,u.appendChild(b);var h=document.createElement("div");h.classList.add("mobile-consent-message-description-container");var f=document.createElement("p");f.classList.add("mobile-consent-message-description"),f.innerHTML=d.consentDetail.setting[n].brief_description[d.activeLanguage]||"",h.appendChild(f);var y=document.createElement("div");y.classList.add("mobile-modal-content-footer-container");var x=document.createElement("div");x.classList.add("mobile-full-version-btn-container");var _=document.createElement("div");_.classList.add("mobile-accept-by-type-toggle-container"),y.appendChild(x),y.appendChild(_),m.appendChild(u),m.appendChild(h),m.appendChild(y),i.appendChild(m),e.appendChild(i),t+=1}};for(var o in d.consentDetailType)n(o)}},d.generateMobileConsentBriefDescriptionByLang=function(){var e=d.shadowRoot.querySelectorAll(".mobile-consent-message-description"),t=0;for(var n in d.consentDetailType)d.consentDetail.setting[n].is_enabled&&(e[t].innerHTML=d.consentDetail.setting[n].brief_description[d.activeLanguage]||"",t+=1)},d.displayConsentBar=function(e){var t=d.shadowRoot.querySelector("#consent-noti");e&&t.classList.add("hide-element")},d.generateConsentText=function(){var e=d.shadowRoot.querySelector("#consent-txt"),t=d.shadowRoot.querySelector("#consent-noti-btn-container"),n=t.querySelectorAll(".accept-btn"),o=d.shadowRoot.querySelectorAll(".consent-detail-title");e.innerHTML=d.consentDetail.setting.display_text[d.activeLanguage],n[0].innerHTML=d.consentDetail.setting.accept_button_text[d.activeLanguage];var i=o[0].getElementsByTagName("h3");i[0].innerHTML=d.consentDetail.setting.consent_detail_title[d.activeLanguage];var a=document.createElement("span");a.innerHTML=d.consentDetail.setting.more_info.display_text[d.activeLanguage]||"More Info",a.classList.add("more-info-link");var s=document.createElement("a");d.consentDetail.setting.more_info.is_custom_url_enabled?(s.href=d.consentDetail.setting.more_info.custom_url[d.activeLanguage]||"#",s.target="_blank",s.appendChild(a),e.appendChild(s)):(a.onclick=d.openModal,e.appendChild(a))},d.generateConsentDetailTypeTab=function(){return n(d,void 0,void 0,function(){var e,t,n,a,s,r=this;return o(this,function(){for(s in e=this.shadowRoot.querySelector("#consent-detail-type-tab-bar"),t=0,n=function(n){if(a.consentDetail.setting[n].is_enabled){var o=t,i=document.createElement("div");i.classList.add("consent-detail-type-tab"),i.onclick=function(){return r.changeTab(o,!1)};var s=document.createElement("div");s.classList.add("active-consent-type-icon-container");var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.classList.add("active-consent-type-icon"),l.setAttributeNS(null,"viewBox","0 0 24 24");var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d","M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"),c.setAttribute("fill","currentColor"),l.appendChild(c);var d=document.createElement("span");d.classList.add("consent-detail-type"),d.innerHTML=a.consentDetailType[n].label,s.appendChild(l),i.appendChild(s),i.appendChild(d),e.appendChild(i),t+=1}},a=this,this.consentDetailType)n(s);return[2]})})},d.generateFullVersionButton=function(){var e=d.shadowRoot.querySelector("#full-version-btn-container"),t=e.getElementsByClassName("modal-content-footer-text");t[0].onclick=d.showFullDescriptionToggle;var n=0;for(var o in d.consentDetailType)if(d.consentDetail.setting[o].is_enabled){if(d.selectedConsentDetailTypeIdx==n){d.consentDetail.setting[o].is_full_description_enabled?(t[0].innerHTML="Full Version",t[0].style.display="block"):(t[0].innerHTML="",t[0].style.display="none");break}n+=1}},d.generateFullVersionButtonForMobile=function(){var e=d.shadowRoot.querySelectorAll(".mobile-full-version-btn-container"),t=0;for(var n in d.consentDetailType)if(d.consentDetail.setting[n].is_enabled){var o=document.createElement("span");o.classList.add("modal-content-footer-text"),d.consentDetail.setting[n].is_full_description_enabled?(o.innerHTML="Full Version",o.onclick=d.showFullDescriptionToggle):(o.innerHTML="",o.style.display="none"),e[t].appendChild(o),t+=1}},d.generateAgreeToggleByType=function(){var e=d.shadowRoot.querySelector("#accept-by-type-toggle-container"),t=0,n=function(n){if(d.consentDetail.setting[n].is_enabled){var o=t,i=document.createElement("input");i.type="checkbox",i.id="checkbox_"+n,i.name="test-input-group",i.value=""+n,i.classList.add("accept-by-type-toggle"),i.checked=!0,i.onclick=function(){return d.acceptToggle(o,n)};var a=document.createElement("label");a.classList.add("accept-by-type-switch"),a.style.display=d.selectedConsentDetailTypeIdx==o?"block":"none";var s=document.createElement("span");s.classList.add("slider"),s.classList.add("round"),a.appendChild(i),a.appendChild(s),e.appendChild(a),t+=1}};for(var o in d.consentDetailType)n(o);var a=document.createElement("span");a.innerHTML="Accept",a.classList.add("modal-content-footer-text"),e.appendChild(a)},d.generateAgreeToggleByTypeForMobile=function(){var e=d.shadowRoot.querySelectorAll(".mobile-accept-by-type-toggle-container"),t=0,n=function(n){if(d.consentDetail.setting[n].is_enabled){var o=t,i=document.createElement("input");i.type="checkbox",i.id="mobile_checkbox_"+n,i.name="mobile_"+n,i.value=""+n,i.classList.add("accept-by-type-toggle"),i.checked=!0,i.onclick=function(){return d.acceptToggle(o,n)};var a=document.createElement("label");a.classList.add("accept-by-type-switch");var s=document.createElement("span");s.classList.add("slider"),s.classList.add("round"),a.appendChild(i),a.appendChild(s),e[o].appendChild(a);var r=document.createElement("span");r.innerHTML="Accept",r.classList.add("modal-content-footer-text"),e[o].appendChild(r),d.consentDetailType[n].isAlwaysAccepted&&(e[o].style.display="none"),t+=1}};for(var o in d.consentDetailType)n(o)},d.generateConsentDetailByType=function(){var e=d.shadowRoot.querySelector("#modal-content-list");if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var t=0;for(var n in d.consentDetailType)if(d.consentDetail.setting[n].is_enabled){var o=document.createElement("div");o.classList.add("modal-content"),o.style.display=d.selectedConsentDetailTypeIdx==t?"block":"none";var a=document.createElement("p");a.innerHTML=d.consentDetail.setting[n].brief_description[d.activeLanguage]||"",o.appendChild(a),e.appendChild(o),t+=1}}},d.generateConsentFullDetailByType=function(){var e=d.shadowRoot.querySelector("#modal-full-content-list");if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var t=0;for(var n in d.consentDetailType)if(d.consentDetail.setting[n].is_enabled){var o=document.createElement("div");o.classList.add("full-modal-content"),o.style.display=d.selectedConsentDetailTypeIdx==t?"block":"none";var a=document.createElement("p");a.innerHTML=d.consentDetail.setting[n].full_description[d.activeLanguage]||"",o.appendChild(a),e.appendChild(o),t+=1}}},d.changeLanguage=function(e){var t=d.shadowRoot.querySelectorAll(".language-btn"),n=d.shadowRoot.querySelectorAll(".modal-language-btn");d.activeLanguage=e;for(var o,a=0;a<t.length;a++)o=t[a].innerHTML.trim().toLowerCase(),e.toLowerCase()==o?(t[a].classList.add("active-language-btn"),3>t.length&&(n[a].classList.add("active-modal-language-btn"),n[a].classList.remove("inactive-language-btn"))):(t[a].classList.remove("active-language-btn"),3>t.length&&(n[a].classList.remove("active-modal-language-btn"),n[a].classList.add("inactive-language-btn")));d.generateConsentText(),d.generateConsentDetailByType(),d.generateMobileConsentBriefDescriptionByLang(),d.generateConsentFullDetailByType()},d.changeTab=function(e,t){var n=d.shadowRoot.querySelectorAll(".consent-detail-type-tab"),o=d.shadowRoot.querySelectorAll(".consent-detail-type"),a=d.shadowRoot.querySelectorAll(".modal-content"),s=d.shadowRoot.querySelectorAll(".full-modal-content"),r=d.shadowRoot.querySelector("#modal-content-topic"),l=d.shadowRoot.querySelector("#modal-full-content-topic"),c=d.shadowRoot.querySelector("#accept-by-type-toggle-container"),p=c.getElementsByClassName("accept-by-type-switch");d.selectedConsentDetailTypeIdx=e;for(var g=0;g<a.length;g++)if(g===e){r.innerHTML=o[g].innerHTML,l.innerHTML=o[g].innerHTML,n[g].classList.add("modal-tab-active"),a[g].style.display="block",s[g].style.display="block";var m=0;for(var u in d.consentDetailType)if(d.consentDetail.setting[u].is_enabled){if(m==e){c.style.display=d.consentDetailType[u].isAlwaysAccepted?"none":"flex";break}m+=1}p[g].style.display="block"}else n[g].classList.remove("modal-tab-active"),a[g].style.display="none",s[g].style.display="none",p[g].style.display="none";d.generateFullVersionButton(),t||d.expandConsentBox(e,!1)},d.showFullDescriptionToggle=function(){var e=d.shadowRoot.querySelector("#consent-message-container"),t=d.shadowRoot.querySelector("#full-consent-message-container"),n=d.shadowRoot.querySelector("#brief-description-consent-message-btn-container"),o=d.shadowRoot.querySelector("#full-description-consent-message-btn-container"),i=d.shadowRoot.querySelector("#mobile-consent-message-container");i.classList.toggle("hide-element"),null===e||void 0===e?void 0:e.classList.toggle("hide-element"),null===t||void 0===t?void 0:t.classList.toggle("hide-element"),null===n||void 0===n?void 0:n.classList.toggle("hide-element"),null===o||void 0===o?void 0:o.classList.toggle("hide-element")},d.acceptToggle=function(e,t){var n=d.shadowRoot.querySelector("#consent-detail-type-tab-bar"),o=d.shadowRoot.querySelector("#mobile-consent-message-container"),i=n.querySelectorAll(".active-consent-type-icon"),a=o.querySelectorAll(".active-consent-type-icon");i[e].classList.toggle("hide-element"),a[e].classList.toggle("hide-element"),d.shadowRoot.querySelector("#checkbox_"+t).checked=!i[e].classList.contains("hide-element"),d.shadowRoot.querySelector("#mobile_checkbox_"+t).checked=!a[e].classList.contains("hide-element"),d.callbackTriggering()},d.acceptAllConsent=function(e,t){var n=0,o=d.shadowRoot.querySelector("#consent-detail-type-tab-bar"),a=d.shadowRoot.querySelector("#mobile-consent-message-container"),s=o.querySelectorAll(".active-consent-type-icon"),r=a.querySelectorAll(".active-consent-type-icon");for(var l in d.consentDetailType)if(d.consentDetail.setting[l].is_enabled){var c=n;s[c].classList.remove("hide-element"),r[c].classList.remove("hide-element"),d.shadowRoot.querySelector("#checkbox_"+l).checked=!0,d.shadowRoot.querySelector("#mobile_checkbox_"+l).checked=!0,n+=1}d.callbackTriggering(),e&&d.submitConsent(),t&&t()},d.unAcceptAllConsent=function(){var e=0,t=d.shadowRoot.querySelector("#consent-detail-type-tab-bar"),n=d.shadowRoot.querySelector("#mobile-consent-message-container"),o=t.querySelectorAll(".active-consent-type-icon"),a=n.querySelectorAll(".active-consent-type-icon");for(var s in d.consentDetailType)if(d.consentDetail.setting[s].is_enabled){var r=e;o[r].classList.add("hide-element"),a[r].classList.add("hide-element"),d.shadowRoot.querySelector("#checkbox_"+s).checked=!1,d.shadowRoot.querySelector("#mobile_checkbox_"+s).checked=!1,e+=1}d.callbackTriggering()},d.acceptSpecificConsent=function(e){var t=d.shadowRoot.querySelector("#consent-detail-type-tab-bar"),n=d.shadowRoot.querySelector("#mobile-consent-message-container"),o=t.querySelectorAll(".active-consent-type-icon"),a=n.querySelectorAll(".active-consent-type-icon");for(var s in e){var r=0;for(var l in d.consentDetailType)if(d.consentDetail.setting[l].is_enabled){var c=r;if(s==l){e[s]?(o[c].classList.remove("hide-element"),a[c].classList.remove("hide-element")):(o[c].classList.add("hide-element"),a[c].classList.add("hide-element")),d.shadowRoot.querySelector("#checkbox_"+l).checked=!!e[s],d.shadowRoot.querySelector("#mobile_checkbox_"+l).checked=!!e[s];break}r+=1}}d.callbackTriggering()},d.updateConsentAcceptationValue=function(){for(var e in d.consentDetailType)d.consentDetail.setting[e].is_enabled&&d.assign(d.updatedConsentAcceptation.permission,[e],d.shadowRoot.querySelector("#checkbox_"+e).checked)},d.submitConsent=function(){return n(d,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:if(!!this.previewMode)return[3,5];this.closeModal(),this.closeNotiBar(),e=void 0,n.label=1;case 1:return n.trys.push([1,4,,5]),this.submitConsentPermission?[4,this.submitConsentPermission(this.updatedConsentAcceptation)]:[3,3];case 2:return e=n.sent(),[2,e];case 3:return[3,5];case 4:throw t=n.sent(),t;case 5:return[2,null];}})})},d.callbackTriggering=function(){var e={consent_message_id:d.updatedConsentAcceptation.consent_message_id,version:d.updatedConsentAcceptation.version,permission:r({},d.updatedConsentAcceptation.permission)};d.updateConsentAcceptationValue();var t={consent_message_id:d.updatedConsentAcceptation.consent_message_id,version:d.updatedConsentAcceptation.version,permission:r({},d.updatedConsentAcceptation.permission)};d.callback&&d.callback(e,t)},d.openModal=function(){d.shadowRoot.querySelector("#overlay").style.display="block",d.shadowRoot.querySelector("#modal").style.display="flex"},d.closeModal=function(){d.shadowRoot.querySelector("#overlay").style.display="none",d.shadowRoot.querySelector("#modal").style.display="none"},d.closeNotiBar=function(){d.shadowRoot.querySelector("#consent-noti").style.display="none"},d.removePopup=function(){d.close()},d.assign=function(e,t,n){for(var o,a=t.length-1,s=0;s<a;++s)o=t[s],o in e||(e[o]={}),e=e[o];e[t[a]]=n},d}return t(i,e),i.prototype.render=function(){e.prototype.render.call(this);var t=document.createElement("template");t.innerHTML=this.template.trim(),this.setDOM(t.content.firstChild),this.init(!1)},i.prototype.renderOnElement=function(t){e.prototype.renderOnElement.call(this,t);var n=document.createElement("template");n.innerHTML=this.template.trim(),this.setDOM(n.content.firstChild),this.init(!0),this.openModal()},i.prototype.renderOnlyPopup=function(t){if(void 0===t&&(t=!1),!this.isRendered){e.prototype.render.call(this);var n=document.createElement("template");n.innerHTML=this.template.trim(),this.setDOM(n.content.firstChild),this.init(!0),t&&this.openModal()}else this.openModal()},i}(z),Z=function(){return function(e,t){var i=this;this.consentDetail=e,this.submitConsentPermission=t,this.consentMessageID="",this.permission={},this.trackingConsentDetailType={termsAndConditions:{nameStr:"Terms & Conditions",key:"terms_and_conditions",allow:!1},privacyOverview:{nameStr:"Privacy Overview",key:"privacy_overview",allow:!1},necessaryCookies:{nameStr:"Necessary Cookies",key:"necessary_cookies",allow:!1},preferencesCookies:{nameStr:"Preferences Cookies",key:"preferences_cookies",allow:!1},analyticsCookies:{nameStr:"Analytics Cookies",key:"analytics_cookies",allow:!1},marketingCookies:{nameStr:"Marketing Cookies",key:"marketing_cookies",allow:!1},socialMediaCookies:{nameStr:"Social Media Cookies",key:"social_media_cookies",allow:!1}},this.contactingTypeDetailOptions={termsAndConditions:{nameStr:"Terms & Conditions",key:"terms_and_conditions",allow:!1},privacyOverview:{nameStr:"Privacy Overview",key:"privacy_overview",allow:!1},email:{nameStr:"Email",key:"email",allow:!1},sms:{nameStr:"SMS",key:"sms",allow:!1},line:{nameStr:"LINE",key:"line",allow:!1},facebookMessenger:{nameStr:"Facebook Messenger",key:"facebook_messenger",allow:!1},pushNotification:{nameStr:"Push Notification",key:"push_notification",allow:!1}},this.consentAcceptation={consent_message_id:this.consentDetail.consent_message_id,version:this.consentDetail.setting.version,permission:{}},this.init=function(){i.consentMessageID=i.consentDetail.consent_message_id;var e="tracking_type"===i.consentDetail.consent_message_type?i.trackingConsentDetailType:i.contactingTypeDetailOptions;for(var t in e)i.consentDetail.setting[e[t].key].is_enabled&&(i.permission[t]=r({},e[t]))},this.setPermission=function(e,t){for(var n in i.permission){var o=i.permission[n];n==e&&i.consentDetail.setting[o.key].is_enabled&&(o.allow=t)}},this.allowAll=function(){for(var e in i.permission){var t=i.permission[e];i.consentDetail.setting[t.key].is_enabled&&(t.allow=!0)}},this.disallowAll=function(){for(var e in i.permission){var t=i.permission[e];i.consentDetail.setting[t.key].is_enabled&&(t.allow=!1)}},this.submitConsent=function(){return n(i,void 0,void 0,function(){var e,t,n,i,a;return o(this,function(o){switch(o.label){case 0:for(n in t={},this.permission)i=this.permission[n],t[i.key]=i.allow;this.consentAcceptation.permission=t,o.label=1;case 1:return o.trys.push([1,4,,5]),this.submitConsentPermission?[4,this.submitConsentPermission(this.consentAcceptation)]:[3,3];case 2:return e=o.sent(),[2,e];case 3:return[3,5];case 4:throw a=o.sent(),a;case 5:return[2];}})})},this.init()}}(),$=function(){function e(e,t){var i,s=this;this.ctx=e,this.service=t,this.NUMBER_OF_MINUTES_TO_CHECK_POPUP_PERMISSION=1,this.NUMBER_OF_HOUR_TO_GET_CONSENT_API=1,this.HAS_LOGGEDIN_KEY="pam_has_loggedin",this.LOGIN_ID_KEY="pam_login_id",this.submitConsentToPublicDatabase=function(e,t){return void 0===t&&(t={}),n(s,void 0,void 0,function(){var n,i,s,l,c,d,p;return o(this,function(){if(n=this.ctx.config.publicDBAlias,e.database&&(n=e.database),i=r({_consent_message_id:e.consent_message_id,_version:e.version,_database:n},t),this.hasLoggedIn&&this.loginIdKey&&this.loginId&&(i[this.loginIdKey]=this.loginId),e.permission)for(s=0,l=Object.entries(e.permission);s<l.length;s++)c=l[s],d=c[0],p=c[1],i["_allow_"+d]=p;return[2,this.service.sendEvent("allow_consent","",r({},i),a.PUBLIC)]})})},this.submitMultipleConsent=function(e){return n(s,void 0,void 0,function(){var t,n,s,r,l,d,g,m,u,b,f,y,s,r;return o(this,function(o){switch(o.label){case 0:for(s in t=[],n=E()===a.LOGIN?this.ctx.config.loginDBAlias:this.ctx.config.publicDBAlias,e){for(d in r=e[s],l={},l._consent_message_id=r.consentAcceptation.consent_message_id,l._version=r.consentAcceptation.version,l._database=n,r.permission)g=r.permission[d],l["_allow_"+g.key]=g.allow;m=h("allow_consent",l),t.push(m)}return u={_use_first_contact_id_for_all_events:!0,events:t},[4,this.service.sendBulkEvent(u)];case 1:for(s in b=o.sent(),f={},y=0,e)r=e[s],f[r.consentMessageID]=b[y],y++;return[2,f];}})})},this.submitConsent=function(e,t){return void 0===t&&(t={}),n(s,void 0,void 0,function(){var n,i,s,l,c,d,p;return o(this,function(){if(n=E()===a.LOGIN?this.ctx.config.loginDBAlias:this.ctx.config.publicDBAlias,e.database&&(n=e.database),i=r({_consent_message_id:e.consent_message_id,_version:e.version,_database:n},t),this.hasLoggedIn&&this.loginIdKey&&this.loginId&&(i[this.loginIdKey]=this.loginId),e.permission)for(s=0,l=Object.entries(e.permission);s<l.length;s++)c=l[s],d=c[0],p=c[1],i["_allow_"+d]=p;return[2,this.service.sendEvent("allow_consent","",r({},i))]})})},this.submitConsentAndRefreshStatus=function(e,t){return void 0===t&&(t={}),n(s,void 0,void 0,function(){var n,i;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.submitConsent(e,t)];case 1:return n=o.sent(),[4,this.refreshTrackingConsentStatus()];case 2:return o.sent(),[2,n];case 3:throw i=o.sent(),i;case 4:return[2];}})})},this.displayConsentMessageModal=function(e){return n(s,void 0,void 0,function(){var t,n;return o(this,function(o){switch(o.label){case 0:return[4,this.service.fetchConsentMessage(e)];case 1:return t=o.sent(),n=new X(t,this.submitConsent,!0),this.notificationPopups.push(n),n.renderOnlyPopup(),[2];}})})},this.createPopup=function(e,t,i,a){return void 0===a&&(a=!1),n(s,void 0,void 0,function(){var n,s;return o(this,function(o){switch(o.label){case 0:return[4,this.service.fetchConsentMessage(e)];case 1:return n=o.sent(),s=new X(n,this.submitConsent,t,i,!1,a),this.notificationPopups.push(s),[2,s];}})})},this.loadConsentDetails=function(e){return n(s,void 0,void 0,function(){var t,n,a;return o(this,function(o){switch(o.label){case 0:t={},n=0,o.label=1;case 1:return n<e.length?[4,this.service.fetchConsentMessage(e[n])]:[3,4];case 2:a=o.sent(),t[e[n]]=new Z(a,this.submitConsent),o.label=3;case 3:return n++,[3,1];case 4:return[2,t];}})})},this.customerConsentDetail=null,this.notificationPopups=[],this._hasLoggedIn=L(null!==(i=window.localStorage.getItem(this.HAS_LOGGEDIN_KEY))&&void 0!==i?i:""),this.loginIdKey=this.ctx.config.loginKey,this.loginId=window.localStorage.getItem(this.LOGIN_ID_KEY),this._isFetching=!1,this._isTrackingConsentRefreshing=!1}return Object.defineProperty(e.prototype,"isFetching",{get:function(){return this._isFetching},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTrackingConsentRefreshing",{get:function(){return this._isTrackingConsentRefreshing},enumerable:!0,configurable:!0}),e.prototype.start=function(){return n(this,void 0,void 0,function(){var e,t,n,i;return o(this,function(o){switch(o.label){case 0:if(this._isFetching=!0,!this.ctx.config.trackingConsentMessageId)return console.error("PAM tracking consent message id must be provided"),this._isFetching=!1,[2];o.label=1;case 1:return o.trys.push([1,3,,4]),e=this,[4,this.service.fetchConsentMessage()];case 2:return e.consentMessage=o.sent(),[3,4];case 3:return t=o.sent(),console.error(t),this._isFetching=!1,[2];case 4:return this.ctx.config.disableInstantPopupUI?[3,6]:[4,this.getShowConsentPopup()];case 5:return o.sent(),[3,10];case 6:if(n=_(),!n)return[3,10];o.label=7;case 7:return o.trys.push([7,9,,10]),[4,this.refreshTrackingConsentStatus()];case 8:return o.sent(),[3,10];case 9:return i=o.sent(),console.error(i),this._isFetching=!1,[2];case 10:return this._isFetching=!1,[2];}})})},e.prototype.getShowConsentPopup=function(){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:return[4,this.setIsShowConsentPopup(!0)];case 1:return t.sent(),setInterval(function(){return e.setIsShowConsentPopup()},1e3*(60*this.NUMBER_OF_MINUTES_TO_CHECK_POPUP_PERMISSION)),[2];}})})},e.prototype.setIsShowConsentPopup=function(e){void 0===e&&(e=!1);var t;return n(this,void 0,void 0,function(){var n,i,a,s,r,l,c,d,p,r,g;return o(this,function(o){switch(o.label){case 0:if(n=this.isLastPopupMoreThanHours(this.NUMBER_OF_HOUR_TO_GET_CONSENT_API),e&&(n=!0),!n)return[3,13];if(i=_(),!i)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.refreshTrackingConsentStatus()];case 2:return o.sent(),[3,4];case 3:return a=o.sent(),console.error(a),[2];case 4:if(s=[],i&&this.customerConsentDetail&&!this.customerConsentDetail.need_consent_review||(r=new X(this.consentMessage,this.submitConsentAndRefreshStatus,!0),this.notificationPopups.push(r),s.push(r)),!(i&&this.ctx.config.contactingConsentMessageIds))return[3,12];l=0,c=this.ctx.config.contactingConsentMessageIds,o.label=5;case 5:if(!(l<c.length))return[3,12];d=c[l],o.label=6;case 6:return o.trys.push([6,10,,11]),[4,this.service.getCustomerConsentDetail(i,d)];case 7:return p=o.sent(),p.need_consent_review?[4,this.createPopup(d,!0)]:[3,9];case 8:r=o.sent(),s.push(r),o.label=9;case 9:return[3,11];case 10:return g=o.sent(),[3,11];case 11:return l++,[3,5];case 12:for(;s.length;)null===(t=s.pop())||void 0===t?void 0:t.render();window.localStorage.setItem("latest_get_customer_consent",new Date().toISOString()),o.label=13;case 13:return[2];}})})},e.prototype.isLastPopupMoreThanHours=function(e){var t=window.localStorage.getItem("latest_get_customer_consent");return!t||(new Date().getTime()-new Date(t).getTime())/3600000>e},Object.defineProperty(e.prototype,"isTrackingAllowed",{get:function(){var e,t;return null!==(t=null===(e=this.customerConsentDetail)||void 0===e?void 0:e.tracking_permission)&&void 0!==t&&t.preferences_cookies&&!!_()},enumerable:!0,configurable:!0}),e.prototype.refreshTrackingConsentStatus=function(){return n(this,void 0,void 0,function(){var e,t,n;return o(this,function(o){switch(o.label){case 0:if(this._isTrackingConsentRefreshing=!0,e=_(),!e)throw this._isTrackingConsentRefreshing=!1,new Error("contact_id is not defined");o.label=1;case 1:return o.trys.push([1,3,,4]),t=this,[4,this.service.getCustomerConsentDetail(e,this.ctx.config.trackingConsentMessageId)];case 2:return t.customerConsentDetail=o.sent(),[3,4];case 3:if(n=o.sent(),this.customerConsentDetail=null,"NOT_FOUND"===n.code)return this._isTrackingConsentRefreshing=!1,[2];throw this._isTrackingConsentRefreshing=!1,n;case 4:return this._isTrackingConsentRefreshing=!1,[2];}})})},e.prototype.clear=function(){for(var e,t=0,n=this.notificationPopups;t<n.length;t++)e=n[t],e.close();this.notificationPopups=[]},e.prototype.setLoginState=function(e){if(e.hasLoggedIn){if(this.loginId=window.localStorage.getItem(this.LOGIN_ID_KEY),!this.loginIdKey)return void console.error("login_id key must be provided");var t=e.loginId||this.loginId;if(!t)return void console.log("login_id must be provided");this._hasLoggedIn=!0,window.localStorage.setItem(this.HAS_LOGGEDIN_KEY,"true"),window.localStorage.setItem(this.LOGIN_ID_KEY,t),window.localStorage.setItem("db_type",a.LOGIN)}else this._hasLoggedIn=!1,this.loginId=null,window.localStorage.setItem(this.HAS_LOGGEDIN_KEY,"false"),window.localStorage.setItem("db_type",a.PUBLIC)},e.prototype.userLogin=function(e){return n(this,void 0,void 0,function(){var t,n,i;return o(this,function(o){switch(o.label){case 0:this.clear(),t=(i={_database:this.ctx.config.loginDBAlias},i[this.loginIdKey]=e,i),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,this.service.sendEvent("login","",t)];case 2:return o.sent(),this._hasLoggedIn=!0,this.loginId=e,window.localStorage.setItem(this.HAS_LOGGEDIN_KEY,"true"),window.localStorage.setItem(this.LOGIN_ID_KEY,e),window.localStorage.setItem("db_type",a.LOGIN),[4,this.setIsShowConsentPopup(!0)];case 3:return o.sent(),[3,5];case 4:throw n=o.sent(),n;case 5:return[2];}})})},e.prototype.userLogout=function(){var e;return n(this,void 0,void 0,function(){var t,n,i,s;return o(this,function(o){switch(o.label){case 0:if(this.clear(),!this.loginIdKey)throw new Error("login_id key must be provided");if(!this.loginId)throw new Error("login_id must be provided");t=(s={_database:this.ctx.config.loginDBAlias},s[this.loginIdKey]=this.loginId,s),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,this.service.sendEvent("logout","",t)];case 2:return o.sent(),this._hasLoggedIn=!1,this.loginId=null,window.localStorage.setItem(this.HAS_LOGGEDIN_KEY,"false"),n=null!==(e=g(this.ctx.config.publicDBAlias+"_contact_id"))&&void 0!==e?e:"",window.localStorage.setItem(this.LOGIN_ID_KEY,n),window.localStorage.setItem("db_type",a.PUBLIC),[4,this.setIsShowConsentPopup(!0)];case 3:return o.sent(),[3,5];case 4:throw i=o.sent(),i;case 5:return[2];}})})},Object.defineProperty(e.prototype,"hasLoggedIn",{get:function(){return this._hasLoggedIn},enumerable:!0,configurable:!0}),e.prototype.getCustomerConsentDetail=function(e){return n(this,void 0,void 0,function(){var t,n,i;return o(this,function(o){switch(o.label){case 0:this._isFetching=!0,t={},o.label=1;case 1:return o.trys.push([1,4,5,6]),n=_(),n?[4,this.service.getCustomerConsentDetail(n,e)]:[3,3];case 2:return t=o.sent(),[2,t];case 3:return[3,6];case 4:return i=o.sent(),[3,6];case 5:return this._isFetching=!1,[7];case 6:return[2,t];}})})},e}();(function(e){e.SM="SM",e.MD="MD",e.LG="LG",e.FULL="FULL",e.CUSTOM="CUSTOM"})(K||(K={}));var J;(function(e){e.SM="small",e.MD="medium",e.LG="large",e.FULL="full",e.CUSTOM="custom"})(J||(J={}));var ee;(function(e){e.TIME_SPEND="TIME_SPEND",e.PAGE_SCROLLING="PAGE_SCROLLING"})(ee||(ee={}));var te;(function(e){e.BAR="BAR",e.POPUP="POPUP",e.CORNER="CORNER",e.REPLACE="REPLACE",e.PREPEND="PREPEND",e.APPEND="APPEND"})(te||(te={}));var ne={SM:"300px",MD:"500px",LG:"700px",FULL:"1200px",DEFAULT:"500px"},oe="pam-attention-popup-open",ie=function(e){var t=e.html,n=e.width,o=e.backdropOpacity,i=e.isBorderless;return"<div>\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\"/>\n    <style>\n\n    .popup {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      position: fixed;\n      z-index: 2147483647; /* Sit on top */\n      left: 0;\n      top: 0;\n      padding: 50px 50px;\n      width: 100%; /* Full width */\n      height: 100%; /* Full height */\n      overflow: auto; /* Enable scroll if needed */\n    }\n\n    .popup-content {\n      z-index: 2;\n      position: relative;\n      background-color: #fefefe;\n      width: "+n+"; /* Could be more or less, depending on screen size */\n      outline: 0;\n      max-width: 92%;\n      overflow-x: hidden;\n      overflow-y: auto;\n      max-height: 100%;\n      -ms-overflow-style: none;  /* IE and Edge */\n    }\n\n    .body {\n      padding: "+(i?0:"20px")+";\n      border-radius: 5px;\n      outline: 0;\n    }\n\n    @media (max-width: 575px) {\n      .popup-content {\n        width: 100%;\n      }\n      .popup {\n        padding: "+(i?0:"50px 15px")+";\n      }\n    }\n\n    .attention-popup-backdrop {\n      overflow: hidden;\n      background-color: rgba(0, 0, 0, "+o/100+");\n      width: 100vw;\n      height: 100vh;\n      position: fixed;\n      left: 0;\n      top: 0;\n      z-index: 1;\n      visibility: visible;\n      transition: opacity 0.2s ease-in;\n    }\n\n    .attention-popup-close {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      position: absolute;\n      background-color: #ffffff;\n      border-radius: 50%;\n      width: 20px;\n      height: 20px;\n      right: 6px;\n      top: 6px;\n      z-index: 2001;\n      margin: 0;\n      padding: 0;\n      cursor: pointer\n    }\n    </style>\n    <div class=\"popup\">\n      <div\n        class=\"attention-popup-backdrop\"\n      ></div>\n      <div class=\"popup-content\">\n        <div class=\"attention-popup-close\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" id=\"Capa_1\" x=\"0px\" y=\"0px\" width=\"8px\" height=\"8px\" viewBox=\"0 0 348.333 348.334\" style=\"enable-background:new 0 0 348.333 348.334;\" xml:space=\"preserve\" class=\"\">\n            <g>\n              <path d=\"M336.559,68.611L231.016,174.165l105.543,105.549c15.699,15.705,15.699,41.145,0,56.85   c-7.844,7.844-18.128,11.769-28.407,11.769c-10.296,0-20.581-3.919-28.419-11.769L174.167,231.003L68.609,336.563   c-7.843,7.844-18.128,11.769-28.416,11.769c-10.285,0-20.563-3.919-28.413-11.769c-15.699-15.698-15.699-41.139,0-56.85   l105.54-105.549L11.774,68.611c-15.699-15.699-15.699-41.145,0-56.844c15.696-15.687,41.127-15.687,56.829,0l105.563,105.554   L279.721,11.767c15.705-15.687,41.139-15.687,56.832,0C352.258,27.466,352.258,52.912,336.559,68.611z\" data-original=\"#000000\" class=\"active-path\" data-old_color=\"#000000\" fill=\"#000000\"/>\n            </g>\n          </svg>\n        </div>\n        "+t+"\n      </div>\n    </div>\n  </div>"},ae=function(){function e(e,t,n,o,i){var a=this;this.ctx=e,this.shadow=t,this.shadowHost=n,this.attentionItem=o,this.onClose=i,this.close=function(){a.shadowHost&&(u(window.document.body,oe),a.shadowHost.remove())},this._render()}return e.prototype._render=function(){return n(this,void 0,void 0,function(){var e,t,n,i,a;return o(this,function(){return e=window.document.createElement("style"),e.innerHTML="."+oe+" {overflow: hidden !important;}",document.body.insertBefore(e,document.body.firstChild),t=window.document.createElement("section"),this._createElement(t,this.attentionItem),u(window.document.body,oe),n=this.attentionItem.options.allow_backdrop_click||!1,n&&(i=this.shadow.querySelectorAll(".attention-popup-backdrop"),i[0].onclick=this.onClose),a=this.shadow.querySelectorAll(".attention-popup-close"),a[0].onclick=this.onClose,[2]})})},e.prototype._createElement=function(t,n){t.innerHTML=ie({html:n.html,width:e._getPopupSize(n.options.size),backdropOpacity:null===n.options.backdrop_opacity?.6:n.options.backdrop_opacity,isBorderless:n.options.is_borderless||!1}),this.shadow.appendChild(t)},e._getPopupSize=function(e){switch(e.type){case J.SM:case K.SM:return ne.SM;case J.MD:case K.MD:return ne.MD;case J.LG:case K.LG:return ne.LG;case J.FULL:case K.FULL:return ne.FULL;case J.CUSTOM:case K.CUSTOM:return e.width?e.width+"px":ne.DEFAULT;default:return ne.DEFAULT;}},e}(),se=function(){function e(e,t){this.ctx=e,this.attentionItem=t,this.close=function(){console.log("")},this._render()}return e.prototype._render=function(){return n(this,void 0,void 0,function(){var e,t,n,i,a;return o(this,function(){if(!this.attentionItem.options.container_id)console.error("Web-attention container's id is invalid!");else if(e=window.document.getElementById(this.attentionItem.options.container_id),null!=e){switch(this.attentionItem.options.type){case te.REPLACE:e.innerHTML=this.attentionItem.html;break;case te.PREPEND:e.innerHTML=this.attentionItem.html+e.innerHTML;break;case te.APPEND:e.innerHTML+=this.attentionItem.html;break;default:console.error("Attention's type is not found");}t=window.document.createElement("script"),n=window.document.createTextNode(this.attentionItem.js),t.appendChild(n),e.appendChild(t),i=window.document.createElement("style"),a=this.attentionItem.css,this.attentionItem.custom_css&&(a+=this.attentionItem.custom_css.replace("\n","")),i.innerHTML=a,e.appendChild(i)}else console.error("Web-attention container's ID '"+this.attentionItem.options.container_id+"' is not found!");return[2]})})},e}(),re=function(){function e(e){var t=this;this.ctx=e,this.isRendered=!1,this.totalSeconds=0,this.firstFetchIntervalPeriod=5,this.fetchIntervalPeriod=30,this._onScroll=function(){var e=t.attention.options.display_after.percent||0;y()>=e&&!t.isRendered&&t._show()},this._show=function(){if(t.attention.options.type===te.POPUP){t.shadowHost=window.document.createElement("div"),t.shadowHost.id="pam_attention";var e=window.document.querySelector("body");e.insertBefore(t.shadowHost,e.childNodes[0]||null),t.shadow=t.shadowHost.attachShadow({mode:"open"});var n=window.document.createElement("style"),o=t.attention.css;if(t.attention.custom_css&&(o+=t.attention.custom_css.replace("\n","")),n.innerHTML=o,t.shadow.appendChild(n),t.content=new ae(t.ctx,t.shadow,t.shadowHost,t.attention,function(){return t.close()}),t.attention.js){var i=window.document.createElement("script"),a=window.document.createTextNode(t.attention.js);i.appendChild(a),e.appendChild(i)}window.dispatchEvent(new Event("pam-wa:open",{bubbles:!0,composed:!0}))}else if(t.attention.options.type===te.REPLACE||te.PREPEND||te.APPEND)t.content=new se(t.ctx,t.attention);else return;t.isRendered||(t.isRendered=!0)},this._fetchAndCount=this._fetchAndCount.bind(this)}return e.prototype.render=function(e){var t=Math.max,n=this;if(!this.isRendered){if(this.attention=e,e.options.display_after.type===ee.PAGE_SCROLLING)return void window.addEventListener("scroll",this._onScroll,!0);var o=0;if(e.options.display_after.type===ee.TIME_SPEND){var i=e.options.display_after.second;if(i){var a=t(i-this.totalSeconds,0);o=1e3*a}this.isRendered=!0}setTimeout(function(){n._show()},o)}},e.prototype._createEvent=function(e,t){return new CustomEvent(e,{bubbles:!0,composed:!0,detail:t})},e.prototype.submit=function(e,t){return n(this,void 0,void 0,function(){var n,i,a,s,l,c,p;return o(this,function(o){switch(o.label){case 0:n=e.querySelector("button[type=\"submit\"]"),i="",n&&(i=n.getAttribute("data-tags")||""),a=r(r({},f(e)),{_campaign:t,tags:i}),s=h("form_submit",a),o.label=1;case 1:return o.trys.push([1,3,4,5]),n.dispatchEvent(this._createEvent("pam-submit:request",{id:n.id,data:s})),[4,d(this.ctx.config.baseApi+"/trackers/events",s)];case 2:return l=o.sent(),n.dispatchEvent(this._createEvent("pam-submit:success",{id:n.id,data:s,response:l})),[3,5];case 3:return c=o.sent(),n.dispatchEvent(this._createEvent("pam-submit:error",{id:n.id,data:s,error:c})),[3,5];case 4:return this.close(),p=n.getAttribute("data-href"),p&&(window.location.href=p),[7];case 5:return[2];}})})},e.prototype.tag=function(e,t){return n(this,void 0,void 0,function(){var n,i,a,s,r,l;return o(this,function(o){switch(o.label){case 0:n=e.getAttribute("data-tags")||"",i={_campaign:t,tags:n},a=h("attention_tag",i),o.label=1;case 1:if(o.trys.push([1,3,4,5]),e.dispatchEvent(this._createEvent("pam-tag:request",{id:e.id,data:a})),!n)throw new Error("tags is empty");return[4,d(this.ctx.config.baseApi+"/trackers/events",a)];case 2:return s=o.sent(),e.dispatchEvent(this._createEvent("pam-tag:success",{id:e.id,data:a,response:s})),[3,5];case 3:return r=o.sent(),e.dispatchEvent(this._createEvent("pam-tag:error",{id:e.id,data:a,error:r})),[3,5];case 4:return l=e.getAttribute("data-href"),l&&(window.location.href=l),[7];case 5:return[2];}})})},e.prototype.close=function(){this.attention.options.type===te.POPUP&&(window.removeEventListener("scroll",this._onScroll,!0),this.content.close(),window.dispatchEvent(new Event("pam-wa:close",{bubbles:!0,composed:!0})))},e.prototype.startFetchInterval=function(){return n(this,void 0,void 0,function(){var e,t=this;return o(this,function(n){switch(n.label){case 0:return[4,this.fetch()];case 1:return(e=n.sent(),Object.keys(e).length)?(this.render(e),[2]):(setTimeout(function(){t._fetchAndCount(t.firstFetchIntervalPeriod),t.intervalInstance=setInterval(function(){t._fetchAndCount()},1e3*t.fetchIntervalPeriod)},1e3*this.firstFetchIntervalPeriod),[2]);}})})},e.prototype.stopFetchInterval=function(){this.intervalInstance&&clearInterval(this.intervalInstance)},e.prototype._fetchAndCount=function(e){return void 0===e&&(e=this.fetchIntervalPeriod),n(this,void 0,void 0,function(){var t,n;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.fetch()];case 1:return t=o.sent(),Object.keys(t).length&&(this.render(t),this.stopFetchInterval()),this.totalSeconds+=e,[3,3];case 2:return n=o.sent(),console.error(n),[3,3];case 3:return[2];}})})},e.prototype.fetch=function(){var e,t=null!==(e=g("contact_id"))&&void 0!==e?e:"";return d(this.ctx.config.baseApi+"/attention",{page_url:decodeURI(b()),_contact_id:t})},e}(),le=function(){function e(e){this.ctx=e,this.hasAlreadyInitialzed=!1}return e.prototype.init=function(){return n(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:if(this.hasAlreadyInitialzed)throw new Error("facebook ads instance has already initialized");n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fetchEvents()];case 2:return e=n.sent().events,this.installScript(),this.initAndTrackFacebookEvent(e),this.hasAlreadyInitialzed=!0,[3,4];case 3:return t=n.sent(),console.error(t),[3,4];case 4:return[2];}})})},e.prototype.fetchEvents=function(){return p(this.ctx.config.baseApi+"/audiences/events")},e.prototype.installScript=function(){var e=window.document.getElementsByTagName("head");if(!e.length)throw new Error("no head element");var t=window.document.createElement("script");t.innerText="!function(f,b,e,v,n,t,s)\n        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n        n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n        n.queue=[];t=b.createElement(e);t.async=!0;\n        t.src=v;s=b.getElementsByTagName(e)[0];\n        s.parentNode.insertBefore(t,s)}(window, document,'script',\n        'https://connect.facebook.net/en_US/fbevents.js');",e[0].appendChild(t)},e.prototype.initAndTrackFacebookEvent=function(e){var t=Array.from(new Set(e.map(function(t){return t.pixel_id})));t.forEach(function(e){window.fbq("init",e)}),e.forEach(function(t){window.fbq("trackSingleCustom",t.pixel_id,"Other",{name:"PamSegment",value:t.segment})})},e}(),ce=function(){return function(){}}(),de=function(e){function n(t,n,o,i,a,s){void 0===s&&(s="AUTO");var r=e.call(this)||this;return r.name=t,r.formFields=n,r.resolve=o,r.reject=i,r.tags=a,r.specificDatabase=s,r}return t(n,e),n}(ce),pe=function(e){function n(t,n,o){var i=e.call(this)||this;return i.data=t,i.resolve=n,i.reject=o,i}return t(n,e),n}(ce),ge=function(){function e(e,t){this.ctx=e,this.eventQueue=t}return e.prototype.sendBulkEvent=function(e){return n(this,void 0,void 0,function(){var t,n,i,a,s,r,l;return o(this,function(o){switch(o.label){case 0:i=new Promise(function(e,o){t=e,n=o}),a=new pe(e,t,n),s=new P(S.TrackerBulk,a),this.eventQueue.enqueue(s),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i];case 2:return r=o.sent(),m("contact_id",r[0].contact_id,1825),C(r[0].contact_id,E()),[2,r];case 3:return l=o.sent(),[2,l];case 4:return[2];}})})},e.prototype.sendEvent=function(e,t,i,a){return void 0===t&&(t=""),void 0===i&&(i={}),void 0===a&&(a="AUTO"),n(this,void 0,void 0,function(){var n,s,r,l,c,d,p;return o(this,function(o){switch(o.label){case 0:r=new Promise(function(e,t){n=e,s=t}),l=new de(e,i,n,s,t.split(","),a),c=new P(S.TrackerSingle,l),this.eventQueue.enqueue(c),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r];case 2:return d=o.sent(),m("contact_id",d.contact_id,1825),C(d.contact_id,E()),[2,d];case 3:return p=o.sent(),[2,p];case 4:return[2];}})})},e.prototype.fetchConsentMessage=function(e){void 0===e&&(e=this.ctx.config.trackingConsentMessageId);var t=this.ctx.config.baseApi+"/consent-message/"+e;return p(t)},e.prototype.getCustomerConsentDetail=function(e,t){return p(this.ctx.config.baseApi+"/contacts/"+e+"/consents/"+t)},e}(),me=function(){function e(e){var t=this;this.pusher=null,!e.baseApi&&e.trackerApi&&(e.baseApi=e.trackerApi.replace("/trackers/events","")),"undefined"==typeof e.enableFacebookTracking&&(e.enableFacebookTracking=!1),"undefined"==typeof e.disableWebAttention&&(e.disableWebAttention=!1),"undefined"==typeof e.disableInstantPopupUI&&(e.disableInstantPopupUI=!1),"undefined"==typeof e.enableSkipConsent&&(e.enableSkipConsent=!1),e.publicDBAlias||(e.publicDBAlias="default",console.warn("publicDBAlias is not defined, use default")),e.loginDBAlias||(e.loginDBAlias="default",console.warn("logigDBAlias is not defined, use default")),e.prefixPathWorkerScript=e.prefixPathWorkerScript||"",this.ctx={config:e},this.eventQueue=new M,this.service=new ge(this.ctx,this.eventQueue),this.consentManager=new $(this.ctx,this.service),e.disableWebAttention||(this.attention=new re(this.ctx)),e.enableSkipConsent||this.consentManager.start(),this.tracker=new O(this.ctx,this.service,this.attention,this.consentManager,this.eventQueue),e.enableFacebookTracking&&window.addEventListener("send_tracking",function(){t.facebookAds=new le(t.ctx),t.facebookAds.init()},{once:!0}),k()&&e.webPushPublicKey&&this.initPusher(),A.init(),A.log("Pam Start",this.getContactID(),r({},e)),setTimeout(function(){window.dispatchEvent(new Event("pam-ready"))},100)}return e.prototype.trackToPublicDatabase=function(e,t,i){return void 0===i&&(i=[]),n(this,void 0,void 0,function(){var n;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.tracker.send(e,i.join(","),t,a.PUBLIC)];case 1:return[2,o.sent()];case 2:return n=o.sent(),[2,{error:n+""}];case 3:return[2];}})})},e.prototype.track=function(e,t,i){return void 0===i&&(i=[]),n(this,void 0,void 0,function(){var n;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.tracker.send(e,i.join(","),t)];case 1:return[2,o.sent()];case 2:return n=o.sent(),[2,{error:n+""}];case 3:return[2];}})})},e.prototype.send=function(e,t,i){return n(this,void 0,void 0,function(){var n;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.tracker.send(e,t,i)];case 1:return[2,o.sent()];case 2:return n=o.sent(),[2,{error:n+""}];case 3:return[2];}})})},e.prototype.getContactID=function(){return this.tracker.getContactID()},e.prototype.initPusher=function(){var e=this;this.pusher=new Q,this.pusher.init(this.ctx).then(function(t){var n,o,i;t.autoSubscribe?null===(n=e.pusher)||void 0===n?void 0:n.subscribe():t.enableWebPushPopup&&(null===(o=e.pusher)||void 0===o?void 0:o.permission)===j.DEFAULT&&(null===(i=e.pusher)||void 0===i?void 0:i.render(t))}).catch(function(e){e!==N.USER_IS_SUBSCRIBED&&window.console.error(e)})},e}();e.NotificationPopup=X,e.default=me,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=pam4-tracker.umd.js.map
